(function() {
  var root = this;
  var e,aa=[];function n(a){this.M="";this.qc=this.mb=this.vb=null;this.nb=!0;this.xd=this.bd=!1;this.xf=null;this.Va=a||"BaseObject"}n.prototype.constructor=n;function ba(a){if("string"!==typeof a.M||""===a.M)a.M=p.Xg();p.register(a);null!==a.vb&&("string"===typeof a.vb&&(a.vb=[a.vb]),!0===Array.isArray(a.vb)&&ca.register(a))}function da(a){""!==a.M&&!0===p.Xa(a.M)&&p.unregister(a)}
function ea(a,b,d){d=d||"log";console[d].apply(console,["%c[ForgeJS]%c FORGE."+a.Va+" : "+b+" %c(@"+window.performance.now().toFixed(2)+"ms)","background: #e2edff; color: #4286f4; font-weight: 700","font-weight: 400","color: #AAA"]);if("object"===typeof b&&null!==b)console[d](b)}n.prototype.log=function(a){if(!0===window.FORGE.DEBUG||!0===window.FORGE[this.Va].DEBUG||!0===this.bd)ea(this,a,"log"),null===this.xf&&(this.xf=[]),this.xf.push(a)};
n.prototype.warn=function(a){!0!==window.FORGE.WARNING&&!0!==window.FORGE[this.Va].WARNING&&!0!==this.xd||ea(this,a,"warn")};n.prototype.destroy=function(){!1!==this.nb&&(da(this),null!==this.qc&&(this.qc.D(),this.qc.destroy(),this.qc=null),this.mb=null,this.nb=!1)};Object.defineProperty(n.prototype,"className",{get:function(){return this.Va}});Object.defineProperty(n.prototype,"uid",{get:function(){return this.M}});Object.defineProperty(n.prototype,"tags",{get:function(){return this.vb}});
Object.defineProperty(n.prototype,"alive",{get:function(){return this.nb}});Object.defineProperty(n.prototype,"data",{get:function(){return this.mb},set:function(a){this.mb=a}});Object.defineProperty(n.prototype,"debug",{get:function(){return this.bd},set:function(a){this.bd=!!a;!0===this.bd&&(console.log("Enabling debug for a FORGE."+this.Va+" instance :"),console.log(this))}});
Object.defineProperty(n.prototype,"warning",{get:function(){return this.xd},set:function(a){this.xd=!!a;!0===this.xd&&(console.log("Enabling warning for a FORGE."+this.Va+" instance :"),console.log(this))}});Object.defineProperty(n.prototype,"onDestroy",{get:function(){null===this.qc&&(this.qc=new q(this));return this.qc}});
function r(a,b,d){n.call(this,"Viewer");this.j=a;this.ea=b;this.o=this.Z=this.ga=this.C=this.Fb=this.B=this.sc=this.la=this.W=this.qa=this.$b=this.P=this.va=this.L=this.S=this.ha=this.X=this.H=this.J=this.m=this.Da=this.I=this.G=this.F=this.c=this.O=this.U=this.aa=null;this.ja=this.N=!1;this.A=this.u=this.V=null;this.f=d||null;window.setTimeout(this.sm.bind(this),0)}r.prototype=Object.create(n.prototype);r.prototype.constructor=r;var fa={background:"#000",autoResume:!0,autoPause:!0};e=r.prototype;
e.sm=function(a){this.M="FORGE-instance-"+String(aa.length);aa.push(this.M);ba(this);this.U=new ga(this);"string"===typeof this.j&&""!==this.j&&(this.j=document.getElementById(this.j));if("undefined"===typeof this.j||null===this.j||!1===ha.bh(this.j))throw"$_Viewer.boot : Viewer parent is invalid";this.O=document.createElement("div");this.O.style.width="100%";this.O.style.height="100%";this.O.style.position="relative";this.j.appendChild(this.O);this.c=new t(this,null,null,this.O);this.c.id="FORGE-main-container-"+
this.M;this.F=new t(this);this.F.id="FORGE-canvas-container-"+this.M;this.c.index=0;this.F.Kb(!0);this.c.ec(this.F);this.G=new t(this);this.G.id="FORGE-dom-hotspot-container-"+this.M;this.c.index=0;this.G.Kb(!0);this.c.ec(this.G);this.I=new t(this);this.I.id="FORGE-plugin-container-"+this.M;this.c.index=0;this.I.Kb(!0);this.c.ec(this.I);this.Da=new ia(this);this.Da.Kb(!0);this.F.ec(this.Da);this.fa=new ja(this);this.ha=new ka(this);this.C=new la(this);this.m=new v(this);this.Fb=new ma(this);this.Z=
new na(this);this.P=new x(this);this.$b=new oa(this);this.o=new y(this);this.L=new pa(this);this.J=new z(this);this.B=new qa(this);this.H=new ra(this);this.X=new sa(this);this.S=new ta(this);this.va=new ua(this);this.la=new va(this);this.sc=new wa(this);this.W=new xa(this);this.qa=new za(this);this.ga=new Aa(this);this.fa.boot();this.m.boot();this.Fb.boot();this.P.boot();this.J.boot();this.B.boot();this.H.boot();"function"===typeof a&&a.call();null!==this.f&&"function"===typeof this.f.boot&&this.f.boot.call();
this.ja=!0;null!==this.V&&this.V.D();a=this.ea;"string"===typeof a?this.qa.json(this.M+"-configuration",a,this.ln,this):null!==a&&"object"===typeof a&&Ba(this,a)};e.ln=function(a){a=this.W.get(A.JSON,a.key).data;Ba(this,a)};
function Ba(a,b){a.ea=b;a.aa=B.Pa(fa,b.viewer);"undefined"!==typeof b.i18n&&a.Z.ia(b.i18n);a.$b.ia(b.history);"undefined"!==typeof b.audio&&a.m.ia(b.audio);"undefined"!==typeof b.playlists&&a.J.ia(b.playlists);"undefined"!==typeof b.actions&&a.X.ia(b.actions);"undefined"!==typeof b.director&&a.S.load(b.director);"undefined"!==typeof b.hotspots&&a.H.uk(b.hotspots);"undefined"!==typeof b.postProcessing&&a.va.ia(b.postProcessing);"undefined"!==typeof b.plugins&&a.B.ia(b.plugins);a.L.ia(b.controllers);
"undefined"!==typeof b.story&&a.P.load(b.story);a.Fb.start()}e.update=function(a){!0!==this.N&&(this.C.update(a),this.U.update(),this.la.update(),this.m.update(),this.B.update(),this.ga.update(),this.H.update(),this.L.update(),this.o.update(),null!==this.f&&"function"===typeof this.f.update&&this.f.update.call(),null!==this.f&&"function"===typeof this.f.qo&&this.f.qo.call(),null!==this.o&&this.o.render(),null!==this.f&&"function"===typeof this.f.po&&this.f.po.call())};
e.pause=function(a){!0!==this.N&&(this.N=!0,!0===a&&!0!==this.aa.autoPause||this.m.fl(),null!==this.u&&this.u.D({internal:a}))};e.resume=function(a){!1!==this.N&&(this.N=!1,!0===a&&!0!==this.aa.autoResume||this.m.il(),null!==this.A&&this.A.D({internal:a}))};
e.destroy=function(){this.Fb.stop();this.j=null;this.fa.destroy();this.fa=null;this.B.destroy();this.B=null;this.Fb.destroy();this.Fb=null;this.qa.destroy();this.qa=null;this.$b.destroy();this.$b=null;this.C.destroy();this.C=null;this.la.destroy();this.la=null;this.sc.destroy();this.sc=null;this.H.destroy();this.H=null;this.S.destroy();this.S=null;this.o.destroy();this.o=null;this.Da.destroy();this.Da=null;this.F.destroy();this.F=null;this.G.destroy();this.G=null;this.va.destroy();this.va=null;this.I.destroy();
this.I=null;this.X.destroy();this.X=null;this.c.destroy();this.c=null;this.U.destroy();this.U=null;this.J.destroy();this.J=null;this.m.destroy();this.m=null;this.P.destroy();this.P=null;this.W.destroy();this.W=null;this.ga.destroy();this.ga=null;this.Z.destroy();this.Z=null;this.L.destroy();this.f=this.L=null;null!==this.V&&(this.V.destroy(),this.V=null);null!==this.u&&(this.u.destroy(),this.u=null);null!==this.A&&(this.A.destroy(),this.A=null);aa.splice(this.M,1);n.prototype.destroy.call(this)};
Object.defineProperty(r.prototype,"ready",{get:function(){return this.ja}});Object.defineProperty(r.prototype,"mainConfig",{get:function(){return this.ea}});Object.defineProperty(r.prototype,"config",{get:function(){return this.aa}});Object.defineProperty(r.prototype,"parent",{get:function(){return this.j}});Object.defineProperty(r.prototype,"display",{get:function(){return this.U}});
Object.defineProperty(r.prototype,"fullscreen",{get:function(){return this.c.od()},set:function(a){"boolean"===typeof a&&this.c.od()!==a&&(this.c.fullscreen=a)}});Object.defineProperty(r.prototype,"container",{get:function(){return this.c}});Object.defineProperty(r.prototype,"canvasContainer",{get:function(){return this.F}});Object.defineProperty(r.prototype,"canvas",{get:function(){return this.Da}});Object.defineProperty(r.prototype,"domHotspotContainer",{get:function(){return this.G}});
Object.defineProperty(r.prototype,"pluginContainer",{get:function(){return this.I}});Object.defineProperty(r.prototype,"raf",{get:function(){return this.Fb}});Object.defineProperty(r.prototype,"audio",{get:function(){return this.m}});Object.defineProperty(r.prototype,"playlists",{get:function(){return this.J}});Object.defineProperty(r.prototype,"hotspots",{get:function(){return this.H}});Object.defineProperty(r.prototype,"actions",{get:function(){return this.X}});
Object.defineProperty(r.prototype,"dependencies",{get:function(){return this.ha}});Object.defineProperty(r.prototype,"director",{get:function(){return this.S}});Object.defineProperty(r.prototype,"story",{get:function(){return this.P}});Object.defineProperty(r.prototype,"history",{get:function(){return this.$b}});Object.defineProperty(r.prototype,"load",{get:function(){return this.qa}});Object.defineProperty(r.prototype,"cache",{get:function(){return this.W}});
Object.defineProperty(r.prototype,"plugins",{get:function(){return this.B}});Object.defineProperty(r.prototype,"clock",{get:function(){return this.C}});Object.defineProperty(r.prototype,"tween",{get:function(){return this.ga}});Object.defineProperty(r.prototype,"i18n",{get:function(){return this.Z}});Object.defineProperty(r.prototype,"renderer",{get:function(){return this.o}});Object.defineProperty(r.prototype,"view",{get:function(){return this.o.view}});
Object.defineProperty(r.prototype,"camera",{get:function(){return this.o.camera}});Object.defineProperty(r.prototype,"controllers",{get:function(){return this.L}});Object.defineProperty(r.prototype,"postProcessing",{get:function(){return this.va}});Object.defineProperty(r.prototype,"keyboard",{get:function(){return this.la}});Object.defineProperty(r.prototype,"gyroscope",{get:function(){return this.sc}});
Object.defineProperty(r.prototype,"width",{get:function(){return this.c.width},set:function(a){this.c.width=a}});Object.defineProperty(r.prototype,"height",{get:function(){return this.c.height},set:function(a){this.c.height=a}});Object.defineProperty(r.prototype,"onReady",{get:function(){null===this.V&&(this.V=new q(this));return this.V}});Object.defineProperty(r.prototype,"onPause",{get:function(){null===this.u&&(this.u=new q(this));return this.u}});
Object.defineProperty(r.prototype,"onResume",{get:function(){null===this.A&&(this.A=new q(this));return this.A}});
var ca=function(a){a=a();a.prototype=Object.create(n.prototype);a.prototype.constructor=a;a.prototype.register=function(a){if("object"===typeof a&&"string"===typeof a.uid&&Array.isArray(a.tags)){var b=a.uid,g=a.tags;if(!0===p.Xa(b))for(var h=0,k=g.length;h<k;h++)a=g[h],"string"!==typeof a?this.warn("Tags: An object has a tag that isn't a string!"):("undefined"===typeof this.ob[a]&&(this.ob[a]=[],null!==this.jd&&this.jd.D({tag:a})),-1===this.ob[a].indexOf(b)&&this.ob[a].push(b));else this.warn("Tags: The object you want to register in tags is not known by UID!"),
this.warn(a)}else this.warn("Tags: No uid or no tags on the object you try to register!"),this.warn(a)};a.prototype.Zg=function(a,d){var b=[];if("string"===typeof a)b=this.ob[a];else if(Array.isArray(a)){var h=0;for(a=a.length;h<a;h++);}"string"===typeof d&&(b=p.pe(b,d));return b};a.prototype.get=function(a,d){if("string"===typeof a)return p.get(this.ob[a],d);if(Array.isArray(a)){var b=0;for(a=a.length;b<a;b++);return p.get([],d)}};a.prototype.Jo=function(a,d){if(!0===this.Xa(a)){a=this.ob[a];for(var b=
0,h=this.ob.length;b<h;b++)if(!0===p.R(a[b],d))return!0}return!1};a.prototype.Xa=function(a){return"undefined"!==typeof this.ob[a]&&null!==this.ob[a]};Object.defineProperty(a.prototype,"list",{get:function(){return Object.keys(this.ob)}});Object.defineProperty(a.prototype,"onRegister",{get:function(){null===this.jd&&(this.jd=new q(this));return this.jd}});return new a}(function(){return function(){this.ob={};this.jd=null;n.call(this,"Tags")}}),p=function(a){a=a();a.prototype=Object.create(n.prototype);
a.prototype.constructor=a;a.prototype.Xg=function(){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});return!1===p.Xa(a)?a:p.Xg()};a.prototype.pl=function(a){function b(a){var d,h;for(h in a)if("uid"===h)if(d=a[h],"string"===typeof d){if(p.Xa(d))throw"UID configuration not valid, uid "+d+" already have an object binded to!";if(-1!==g.indexOf(d))throw"UID configuration not valid, uid "+d+" is in double in config file!";
g.push(a[h])}else throw"Found a uid in configuration that is not a string!";else"object"===typeof a[h]&&b(a[h]);return!0}var g=[];return b(a)};a.prototype.register=function(a){if("object"===typeof a&&"string"===typeof a.uid){var b=a.uid;if(!1===p.Xa(b))return this.ba[b]=a,!0;this.warn("The uid you want to register already exists!");this.warn(a)}else this.warn("No uid on the object you try to register!"),this.warn(a);return!1};a.prototype.unregister=function(a){"object"===typeof a&&"string"===typeof a.uid?
(a=a.uid,this.ba[a]=null,delete this.ba[a]):this.warn("No uid on the object you try to unregister!")};a.prototype.Zg=function(a){return"undefined"===typeof a||null===a?Object.keys(this.ba):p.pe(Object.keys(this.ba),a)};a.prototype.pe=function(a,d){return a.filter(function(a){return p.R(a,d)?!0:!1})};a.prototype.get=function(a,d){if("undefined"===typeof a||null===a){if("string"!==typeof d)return this.ba;a=Object.keys(this.ba)}if("string"===typeof a)return this.ba[a];if(Array.isArray(a)){"string"===
typeof d&&(a=p.pe(a,d));d=[];for(var b,h=0,k=a.length;h<k;h++)b=a[h],!0===p.Xa(b)&&d.push(this.ba[b]);return d}};a.prototype.R=function(a,d){a=p.get(a);return B.R(a,d)};a.prototype.Xa=function(a){return"undefined"!==typeof this.ba[a]&&null!==this.ba[a]};return new a}(function(){return function(){this.ba={};n.call(this,"UID")}});function q(a,b){this.o=a;this.j=b||!1;this.c=this.m=null;this.f=!0;this.u=!1;n.call(this,"EventDispatcher")}q.prototype=Object.create(n.prototype);e=q.prototype;
e.constructor=q;function Ca(a,b,d,g,h){if("function"!==typeof b)a.warn("You're trying to add an undefined listener");else if(!0===a.has(b,g))a.warn("You're trying to add a duplicate listener for this context");else{b=new Da(a,b,d,g,h);null===a.c&&(a.c=[]);if(a.c.length){d=a.c.length;do d--;while(a.c[d]&&b.Bg<=a.c[d].Bg);a.c.splice(d+1,0,b)}else a.c.push(b);!0===a.j&&!0===a.f&&!0===a.u&&b.Gb(a.m)}}
function Ea(a,b,d){if(null===a.c)return-1;"undefined"===typeof d&&(d=null);for(var g,h=0,k=a.c.length;h<k;h++)if(g=a.c[h],g.listener===b&&g.context===d)return h;return-1}e.add=function(a,b,d){Ca(this,a,!1,b,d)};e.ca=function(a,b,d){Ca(this,a,!0,b,d)};e.remove=function(a,b){a=Ea(this,a,b);-1!==a&&(this.c[a].destroy(),this.c.splice(a,1))};e.has=function(a,b){return-1!==Ea(this,a,b)};
e.D=function(a,b){this.u=!0;!0===this.j&&(this.m=void 0===a?null:a);if(!1!==this.f&&null!==this.c)for(var d=this.c.length;d--;)this.c[d].Gb(a,b)};e.destroy=function(){if(!1!==this.nb){if(null!==this.c){for(var a=this.c.length;a--;)this.c[a].destroy();this.c=null}this.m=this.o=null;n.prototype.destroy.call(this)}};Object.defineProperty(q.prototype,"emitter",{get:function(){return this.o}});Object.defineProperty(q.prototype,"memorize",{get:function(){return this.j},set:function(a){this.j=!!a}});
Object.defineProperty(q.prototype,"active",{get:function(){return this.f},set:function(a){this.f=!!a}});function Fa(a,b){this.f=a;this.c=b||null}Fa.prototype.constructor=Fa;Object.defineProperty(Fa.prototype,"emitter",{get:function(){return this.f}});Object.defineProperty(Fa.prototype,"data",{get:function(){return this.c}});function Da(a,b,d,g,h){this.j=a;this.c=b;this.f=g||null;this.o=d||!1;this.Bg=h||0;this.m=0;this.M=!1}e=Da.prototype;e.constructor=Da;
e.mj=function(a){this.c.call(this.f,new Fa(this.j.emitter,a));this.m++;!0===this.o&&this.Jh();this.M=!1};e.Gb=function(a,b){null!==this.c&&(!0===b&&!1===this.M?(this.M=!0,window.setTimeout(this.mj.bind(this,a),0)):!0!==b&&this.mj(a))};e.Jh=function(){return this.j.remove(this.c,this.f)};e.destroy=function(){this.f=this.c=this.j=null};Object.defineProperty(Da.prototype,"listener",{get:function(){return this.c}});Object.defineProperty(Da.prototype,"context",{get:function(){return this.f}});
Object.defineProperty(Da.prototype,"priority",{get:function(){return this.Bg}});Object.defineProperty(Da.prototype,"callCount",{get:function(){return this.m}});function x(a){this.i=a;this.L=this.O=this.J=this.c=null;this.I="";this.f=null;this.o="";this.u=null;this.m="";this.j={};this.A=this.G=this.H=this.C=this.B=this.F=this.P=this.V=null;n.call(this,"Story")}x.prototype=Object.create(n.prototype);e=x.prototype;e.constructor=x;e.dm=function(a){a=this.i.cache.get(A.JSON,a.key).data;Ga(this,a)};
function Ga(a,b){if(!0!==p.pl(b))throw"Story configuration is not valid!";a.c=b;a.M=a.c.uid;ba(a);a.I=a.c["default"];a.J.key=a.c.name;a.O.key=a.c.slug;a.L.key=a.c.description;if("undefined"!==typeof a.c.scenes&&0<a.c.scenes.length){b=a.c.scenes;for(var d,g=0,h=b.length;g<h;g++)d=new C(a.i),d.ia(b[g]),!0===d.booted&&Ha(a,d)}if("undefined"!==typeof a.c.groups&&0<a.c.groups.length)for(b=a.c.groups,g=0,h=b.length;g<h;g++)d=new D(a.i,b[g]),a.u.push(d.uid);if("object"===typeof a.c.events&&null!==a.c.events){b=
a.c.events;for(var k in b)d=new Ia(a.i),d.c(b[k]),a.j[k]=d}Ja(a)}function Ja(a){if("undefined"===typeof a.c.scenes||a.f.length===a.c.scenes.length){null!==a.V&&a.V.D();!0===B.R(a.j.onReady,"ActionEventDispatcher")&&a.j.onReady.D();var b=Ka().hashParameters;null!==b&&"string"===typeof b.uid&&p.Xa(b.uid)?La(b.uid):""!==a.I&&null!==a.I&&p.Xa(a.I)?La(a.I):a.Qc(0)}}function La(a){!0!==p.R(a,"Scene")&&!0!==p.R(a,"Group")||p.get(a).load()}
function Ha(a,b){b.onLoadRequest.add(a.ao,a);b.onLoadStart.add(a.fm,a);b.onLoadComplete.add(a.em,a);a.f.push(b.uid)}e.Dm=function(){this.i.renderer.pickingManager.start()};
e.ao=function(a){var b=this.scene;a=a.emitter;var d=0;null!==b&&(-1!==a.sync.indexOf(b.uid)&&b.media.type===F.VIDEO&&(d=b.media.displayObject.currentTime),b.Ne());this.o=a.uid;a.$k(d);!1===a.xc()?(this.m=null,null!==this.A&&this.A.D({groupUid:this.m}),!0===B.R(this.j.onGroupChange,"ActionEventDispatcher")&&this.j.onGroupChange.D()):!0===a.xc()&&!1===a.nd(this.m)&&Ma(this,a.groups[0].uid);null!==this.P&&this.P.D({sceneUid:this.o});!0===B.R(this.j.onSceneLoadRequest,"ActionEventDispatcher")&&this.j.onSceneLoadRequest.D()};
e.fm=function(){null!==this.F&&this.F.D({sceneUid:this.o});!0===B.R(this.j.onSceneLoadStart,"ActionEventDispatcher")&&this.j.onSceneLoadStart.D()};e.em=function(){null!==this.C&&this.C.D({sceneUid:this.o});!0===B.R(this.j.onSceneLoadComplete,"ActionEventDispatcher")&&this.j.onSceneLoadComplete.D()};function Ma(a,b){!0===p.R(b,"Group")&&b!==a.m&&(a.m=b,null!==a.A&&a.A.D({groupUid:a.m}),!0===B.R(a.j.onGroupChange,"ActionEventDispatcher")&&a.j.onGroupChange.D())}
e.boot=function(){this.f=[];this.u=[];this.J=new Na(this.i);this.O=new Na(this.i);this.L=new Na(this.i)};e.load=function(a){"string"===typeof a?this.i.load.json("forge.story.config",a,this.dm,this):"object"===typeof a&&Ga(this,a)};e.gm=function(){return!!this.f.length};e.xc=function(){return!!this.u.length};e.hm=function(){var a=this.f.indexOf(this.o);this.Qc(a+1<this.f.length?this.f[a+1]:this.f[0])};e.im=function(){var a=this.f.indexOf(this.o);this.Qc(0<=a-1?this.f[a-1]:this.f[this.f.length-1])};
e.Qc=function(a){var b;"number"===typeof a?0<=a&&a<this.f.length?b=this.f[a]:this.warn("Load scene error: index "+a+" is out of bounds"):"string"===typeof a&&p.R(a,"Scene")?b=a:"object"===typeof a&&B.R(a,"Scene")&&(b=a.uid);"undefined"!==typeof b&&b!==this.o&&(this.i.renderer.pickingManager.stop(),this.i.renderer.onBackgroundReady.ca(this.Dm,this),La(b))};
e.fh=function(a){var b;"number"===typeof a?0<=a&&a<this.u.length?b=this.u[a]:this.warn("Load group, index "+a+" is out of bounds"):"string"===typeof a&&p.R(a,"Group")?b=a:"object"===typeof a&&B.R(a,"Group")&&(b=a.uid);"undefined"!==typeof b&&b!==this.m&&(Ma(this,b),La(b))};e.dl=function(a){Ha(this,a);Ja(this)};
e.destroy=function(){this.c=this.i=null;this.J.destroy();this.J=null;this.O.destroy();this.O=null;this.L.destroy();this.L=null;for(var a=0,b=this.f.length;a<b;a++)p.get(this.f[a]).destroy();this.f=null;a=0;for(b=this.u.length;a<b;a++)p.get(this.u[a]).destroy();this.u=null;null!==this.V&&(this.V.destroy(),this.V=null);null!==this.F&&(this.F.destroy(),this.F=null);null!==this.B&&(this.B.destroy(),this.B=null);null!==this.C&&(this.C.destroy(),this.C=null);null!==this.H&&(this.H.destroy(),this.H=null);
null!==this.G&&(this.G.destroy(),this.G=null);null!==this.A&&(this.A.destroy(),this.A=null);for(var d in this.j)this.j[d].destroy(),this.j[d]=null;this.j=null;n.prototype.destroy.call(this)};Object.defineProperty(x.prototype,"config",{get:function(){return this.c}});Object.defineProperty(x.prototype,"name",{get:function(){return this.J.value}});Object.defineProperty(x.prototype,"slug",{get:function(){return this.O.value}});Object.defineProperty(x.prototype,"description",{get:function(){return this.L.value}});
Object.defineProperty(x.prototype,"scenes",{get:function(){return p.get(this.f)}});Object.defineProperty(x.prototype,"scene",{get:function(){return null===this.o||""===this.o?null:p.get(this.o)},set:function(a){this.Qc(a)}});Object.defineProperty(x.prototype,"sceneUids",{get:function(){return this.f}});Object.defineProperty(x.prototype,"sceneUid",{get:function(){return this.o},set:function(a){this.Qc(a)}});Object.defineProperty(x.prototype,"groups",{get:function(){return p.get(this.u)}});
Object.defineProperty(x.prototype,"group",{get:function(){return null===this.m||""===this.m?null:p.get(this.m)},set:function(a){this.fh(a)}});Object.defineProperty(x.prototype,"groupUids",{get:function(){return this.u}});Object.defineProperty(x.prototype,"groupUid",{get:function(){return this.m},set:function(a){this.fh(a)}});Object.defineProperty(x.prototype,"onReady",{get:function(){null===this.V&&(this.V=new q(this));return this.V}});
Object.defineProperty(x.prototype,"onSceneLoadRequest",{get:function(){null===this.P&&(this.P=new q(this));return this.P}});Object.defineProperty(x.prototype,"onSceneLoadStart",{get:function(){null===this.F&&(this.F=new q(this));return this.F}});Object.defineProperty(x.prototype,"onSceneLoadProgress",{get:function(){null===this.B&&(this.B=new q(this));return this.B}});Object.defineProperty(x.prototype,"onSceneLoadComplete",{get:function(){null===this.C&&(this.C=new q(this));return this.C}});
Object.defineProperty(x.prototype,"onSceneLoadError",{get:function(){null===this.H&&(this.H=new q(this));return this.H}});Object.defineProperty(x.prototype,"onScenePreview",{get:function(){null===this.G&&(this.G=new q(this));return this.G}});Object.defineProperty(x.prototype,"onGroupChange",{get:function(){null===this.A&&(this.A=new q(this));return this.A}});
function D(a,b){this.i=a;this.f=b;this.o=null;this.C="#ffffff";this.A=1;this.c=this.m=this.u=null;this.j="";n.call(this,"Group");this.M=this.f.uid;this.vb=this.f.tags;ba(this);this.c=[];this.o=new Na(this.i,this.f.name);this.u=new Na(this.i,this.f.slug);this.m=new Na(this.i,this.f.description);"string"===typeof this.f.color&&(this.C=this.f.color);"number"===typeof this.f.alpha&&(this.A=this.f.alpha);a=this.f;"undefined"!==typeof a.children&&!0===B.Ga(a.children,"string")?this.c=a.children:this.warn("A group has no children in its configuration, or configuration is not valid!");
"string"===typeof a["default"]&&(-1!==this.c.indexOf(a["default"])?this.j=a["default"]:this.warn("A group has a default child that is not in its children array!"))}D.prototype=Object.create(n.prototype);e=D.prototype;e.constructor=D;
e.load=function(a){if(null===this.c||!this.c.length)throw"Group.load() : can't load a group that have no children";var b="";"undefined"===typeof a||null===a?b="string"===typeof this.j&&""!==this.j?this.j:this.c[0]:"number"===typeof a&&0<=a&&a<this.c.length?b=this.c[a]:"string"===typeof a?b=a:"object"===typeof a&&!0===this.Ve(a)&&(b=a.uid);if(-1===this.c.indexOf(b))throw'Group.load() : uid "'+b+'" is not in children of the group!';if(!0===p.R(b,"Scene")||!0===p.R(b,"Group"))p.get(b).load();else throw"Impossible to load group child with uid "+
b+", it seems to be neither a scene or a group!";};e.Ve=function(a){return"string"===typeof a?-1!==this.c.indexOf(a):!0===B.R(a,"Scene")||!0===B.R(a,"Group")?this.Ve(a.uid):!1};e.Pc=function(a){return"string"===typeof a&&p.R(a,"Scene")?-1!==this.c.indexOf(a):!0===B.R(a,"Scene")?this.Pc(a.uid):!1};e.nd=function(a){return"string"===typeof a&&p.R(a,"Group")?-1!==this.c.indexOf(a):!0===B.R(a,"Group")?this.nd(a.uid):!1};e.Go=function(){return!!this.c.length};
e.ah=function(a){for(var b,d=0,g=this.c.length;d<g;d++)if(b=this.c[d],p.R(b,a))return!0;return!1};e.We=function(){return this.ah("Scene")};e.xc=function(){return this.ah("Group")};e.ld=function(a){if("string"!==typeof a)return this.c;for(var b=[],d=0,g=this.c.length;d<g;d++)p.R(this.c[d],a)&&b.push(this.c[d]);return b};e.se=function(a){a=this.ld(a);return p.get(a)};
e.zl=function(){if(!1===this.We())this.warn("Can't do Group.nextScene() on this group that have no scenes!");else{var a=this.scenesUids,b=a.indexOf(this.i.story.sceneUid),d;-1===b&&(p.R(this.j,"Scene")?d=this.j:d=a[0]);b+1<a.length?d=a[b+1]:-1!==b&&(d=a[0]);this.load(d)}};
e.Al=function(){if(!1===this.We())this.warn("Can't do Group.previousScene() on this group that have no scenes!");else{var a=this.scenesUids,b=a.indexOf(this.i.story.sceneUid),d;-1===b&&(p.R(this.j,"Scene")?d=this.j:d=a[0]);0<=b-1?d=a[b-1]:-1!==b&&(d=a[a.length-1]);this.load(d)}};e.destroy=function(){this.c=this.i=null;this.o.destroy();this.o=null;this.u.destroy();this.u=null;this.m.destroy();this.m=null;n.prototype.destroy.call(this)};Object.defineProperty(D.prototype,"config",{get:function(){return this.f}});
Object.defineProperty(D.prototype,"name",{get:function(){return this.o.value}});Object.defineProperty(D.prototype,"color",{get:function(){return this.C}});Object.defineProperty(D.prototype,"alpha",{get:function(){return this.A}});Object.defineProperty(D.prototype,"slug",{get:function(){return this.u.value}});Object.defineProperty(D.prototype,"description",{get:function(){return this.m.value}});Object.defineProperty(D.prototype,"childrenUids",{get:function(){return this.ld()}});
Object.defineProperty(D.prototype,"children",{get:function(){return this.se()}});Object.defineProperty(D.prototype,"scenesUids",{get:function(){return this.ld("Scene")}});Object.defineProperty(D.prototype,"scenes",{get:function(){return this.se("Scene")}});Object.defineProperty(D.prototype,"groupsUids",{get:function(){return this.ld("Group")}});Object.defineProperty(D.prototype,"groups",{get:function(){return this.se("Group")}});
function C(a){this.i=a;this.B=this.I=this.G=this.c=null;this.O=[];this.J=0;this.L=!1;this.f={};this.H=this.C=this.o=this.u=this.j=this.m=this.F=this.A=null;n.call(this,"Scene")}C.prototype=Object.create(n.prototype);e=C.prototype;e.constructor=C;e.cm=function(a){this.L=!0;"string"===typeof a.data&&(a.data=JSON.parse(a.data));this.c=B.Pa(this.c,a.data);this.i.story.dl(this);null!==this.C&&this.C.D()};
e.ia=function(a){this.c=a;this.M=a.uid;this.vb=a.tags;ba(this);this.G=new Na(this.i,this.c.name);this.I=new Na(this.i,this.c.slug);this.B=new Na(this.i,this.c.description);this.O=!0===B.Ga(this.c.sync,"string")?this.c.sync:[];if("object"===typeof a.events&&null!==a.events){var b=a.events,d,g;for(g in b)d=new Ia(this.i),d.c(b[g]),this.f[g]=d}!1===this.L&&"string"===typeof a.url&&""!==a.url?this.i.load.json(this.M,a.url,this.cm,this):this.L=!0};
e.load=function(){this.i.story.scene!==this&&(null!==this.F&&this.F.D(),!0===B.R(this.f.onLoadRequest,"ActionEventDispatcher")&&this.f.onLoadRequest.D())};
e.$k=function(a){"number"===typeof a&&!1===isNaN(a)&&"undefined"!==typeof this.c.media&&("undefined"===typeof this.c.media.options&&(this.c.media.options={}),this.c.media.options.startTime=a);null===this.A&&(this.A=new Oa(this.i,this.c.media),null!==this.H&&this.H.D({media:this.A}));null!==this.m&&this.m.D();!0===B.R(this.f.onLoadStart,"ActionEventDispatcher")&&this.f.onLoadStart.D();this.J++;null!==this.j&&this.j.D();!0===B.R(this.f.onLoadComplete,"ActionEventDispatcher")&&this.f.onLoadComplete.D()};
e.Ne=function(){null!==this.u&&this.u.D();!0===B.R(this.f.onUnloadStart,"ActionEventDispatcher")&&this.f.onUnloadStart.D();this.A.destroy();this.A=null;null!==this.o&&this.o.D();!0===B.R(this.f.onUnloadComplete,"ActionEventDispatcher")&&this.f.onUnloadComplete.D()};e.nd=function(a){return"string"===typeof a&&!0===p.R(a,"Group")?p.get(a).Pc(this):!0===B.R(a,"Group")?a.Pc(this):!1};e.xc=function(){for(var a=this.i.story.groups,b,d=0,g=a.length;d<g;d++)if(b=a[d],!0===b.Pc(this))return!0;return!1};
e.Tk=function(){return"undefined"!==typeof this.c.sound&&"undefined"!==typeof this.c.sound.source&&("undefined"!==typeof this.c.sound.source.url&&""!==this.c.sound.source.url||"undefined"!==typeof this.c.sound.source.target&&""!==this.c.sound.source.target)?!0:!1};e.Uk=function(a){return"undefined"!==typeof this.c.sound&&"undefined"!==typeof this.c.sound.source&&"undefined"!==typeof this.c.sound.source.target&&""!==this.c.sound.source.target&&this.c.sound.source.target===a?!0:!1};
e.Yk=function(){return!0===this.Tk()&&this.c.sound.type===Pa.kf?!0:!1};e.destroy=function(){this.i=null;this.G.destroy();this.G=null;this.I.destroy();this.I=null;this.B.destroy();this.B=null;null!==this.m&&(this.m.destroy(),this.m=null);null!==this.j&&(this.j.destroy(),this.j=null);null!==this.u&&(this.u.destroy(),this.u=null);null!==this.o&&(this.o.destroy(),this.o=null);for(var a in this.f)this.f[a].destroy(),this.f[a]=null;this.f=null;n.prototype.destroy.call(this)};
Object.defineProperty(C.prototype,"booted",{get:function(){return this.L}});Object.defineProperty(C.prototype,"config",{get:function(){return this.c}});Object.defineProperty(C.prototype,"viewCount",{get:function(){return this.J}});Object.defineProperty(C.prototype,"viewed",{get:function(){return!!this.J}});Object.defineProperty(C.prototype,"name",{get:function(){return this.G.value}});Object.defineProperty(C.prototype,"slug",{get:function(){return this.I.value}});
Object.defineProperty(C.prototype,"description",{get:function(){return this.B.value}});Object.defineProperty(C.prototype,"sync",{get:function(){return this.O}});Object.defineProperty(C.prototype,"groupsUid",{get:function(){for(var a=this.i.story.groups,b,d=[],g=0,h=a.length;g<h;g++)b=a[g],!0===b.Pc(this)&&d.push(b.uid);return d}});Object.defineProperty(C.prototype,"groups",{get:function(){return p.get(this.groupsUid)}});Object.defineProperty(C.prototype,"thumbnails",{get:function(){return this.c.thumbnails}});
Object.defineProperty(C.prototype,"media",{get:function(){return this.A}});Object.defineProperty(C.prototype,"background",{get:function(){return"undefined"!==typeof this.c.background?this.c.background:this.i.config.background}});Object.defineProperty(C.prototype,"onLoadRequest",{get:function(){null===this.F&&(this.F=new q(this));return this.F}});Object.defineProperty(C.prototype,"onLoadStart",{get:function(){null===this.m&&(this.m=new q(this));return this.m}});
Object.defineProperty(C.prototype,"onLoadComplete",{get:function(){null===this.j&&(this.j=new q(this));return this.j}});Object.defineProperty(C.prototype,"onUnloadStart",{get:function(){null===this.u&&(this.u=new q(this));return this.u}});Object.defineProperty(C.prototype,"onUnloadComplete",{get:function(){null===this.o&&(this.o=new q(this));return this.o}});Object.defineProperty(C.prototype,"onConfigLoadComplete",{get:function(){null===this.C&&(this.C=new q(this));return this.C}});
Object.defineProperty(C.prototype,"onMediaCreate",{get:function(){null===this.H&&(this.H=new q(this));return this.H}});var G={Na:"degrees",tb:"radians"};G.Ci=Math.PI/180;G.Ki=180/Math.PI;G.Qi=2*Math.PI;G.T=function(a){return a*G.Ci};G.Ya=function(a){return a*G.Ki};G.Ie=function(a){return Math.round(10*a)/10};G.$=function(a,b,d){b="number"===typeof b&&!1===isNaN(b)?b:-Infinity;d="number"===typeof d&&!1===isNaN(d)?d:Infinity;return Math.min(Math.max(a,b),d)};
G.Za=function(a,b,d){d-=b;return((a-b)%d+d)%d+b};G.Uo=function(a,b,d){return a*d+b*(1-d)};G.ap=function(a,b,d){a=G.$((a-b)/(d-b),0,1);return a*a*(3-2*a)};G.qd=function(a){return!!a&&!(a&a-1)};G.ih=function(a){return{yaw:Math.atan2(-a.elements[2],a.elements[10]),pitch:Math.asin(-a.elements[6]),roll:Math.atan2(-a.elements[4],a.elements[5])}};
G.ne=function(a,b,d,g){var h=Math.cos(a);a=Math.sin(a);var k=Math.cos(-b);b=Math.sin(-b);var l=Math.cos(d);d=Math.sin(d);"undefined"===typeof g&&(g=!1);return g?(new THREE.Matrix4).set(h*l+a*b*d,-h*d+a*b*l,a*k,0,k*d,k*l,-b,0,-a*l+h*b*d,a*d+h*b*l,h*k,0,0,0,0,1):(new THREE.Matrix4).set(l*h-d*b*a,-d*k,l*a+d*b*h,0,d*h+l*b*a,l*k,d*a-l*b*h,0,-a*k,b,k*h,0,0,0,0,1)};
var H={Le:function(a){a=(new THREE.Euler).setFromQuaternion(a,"XYZ");return{yaw:a.x,pitch:-a.y,roll:a.z}},wc:function(a,b,d){"object"===typeof a&&(b=a.pitch,d=a.roll,a=a.yaw);return(new THREE.Quaternion).setFromEuler(new THREE.Euler(a,-b,d,"ZXY"))},ll:function(a){a=H.Le(a);return G.ne(a.yaw,a.pitch,a.roll)},Ao:function(a){return H.wc(G.ih(a))},cancelRoll:function(a){a=H.Le(a);return H.wc(a.yaw,a.pitch,0)},vo:function(a,b){return(new THREE.Quaternion).copy(a).inverse().multiply(b)},vk:function(a,b){a=
Math.abs(a.dot(b));return 1<=a?0:2*Math.acos(a)},multiplyScalar:function(a,b){return new THREE.Quaternion(a*b.x,a*b.y,a*b.z,a*b.w)},add:function(a,b){return new THREE.Quaternion(a.x+b.x,a.y+b.y,a.z+b.z,a.w+b.w)},log:function(a){var b=new THREE.Quaternion(0,0,0,0);if(1>Math.abs(a.w)){var d=Math.acos(a.w),g=Math.sin(d);0<g&&(b.x=d*a.x/g,b.y=d*a.y/g,b.z=d*a.z/g);return b}b.x=a.x;b.y=a.y;b.z=a.z;return b},exp:function(a){var b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),d=Math.sin(b),g=(new THREE.Quaternion).copy(a);
g.w=Math.cos(b);Math.abs(d)>Number.EPSILON&&(g.x=d*a.x/b,g.y=d*a.y/b,g.z=d*a.z/b);return g},slerp:function(a,b,d){var g=new THREE.Quaternion;THREE.Quaternion.slerp(a,b,g,d);return g},bp:function(a,b,d,g,h,k){a=H.slerp(a,g,k);b=H.slerp(b,d,k);return H.slerp(a,b,2*k*(1-k))},cl:function(a,b,d){return H.add(H.multiplyScalar(1-d,a),H.multiplyScalar(d,b)).normalize()},Je:function(a,b,d){var g=a.dot(b);if(.95<=Math.abs(g))return H.cl(a,b,d);g=Math.acos(g);return H.multiplyScalar(1/Math.sin(g),H.add(H.multiplyScalar(Math.sin(g*
(1-d)),a),H.multiplyScalar(Math.sin(g*d),b)))},kl:function(a,b,d,g,h){a=H.Je(a,g,h);b=H.Je(b,d,h);return H.Je(a,b,2*h*(1-h))},mh:function(a,b,d){var g=(new THREE.Quaternion).copy(b).conjugate();a=(new THREE.Quaternion).copy(g).multiply(a);d=(new THREE.Quaternion).copy(g).multiply(d);g=H.log(a);d=H.log(d);d=H.add(g,d);d=H.multiplyScalar(-.25,d);d=H.exp(d);return(new THREE.Quaternion).copy(b).multiply(d).normalize()}};
function Qa(a,b,d,g){this.M="number"===typeof a?a:0;this.j="number"===typeof b?b:0;this.f="number"===typeof d?d:0;this.c="number"===typeof g?g:0}Qa.prototype.constructor=Qa;Object.defineProperty(Qa.prototype,"x",{get:function(){return this.M},set:function(a){"number"===typeof a&&(this.M=a)}});Object.defineProperty(Qa.prototype,"y",{get:function(){return this.j},set:function(a){"number"===typeof a&&(this.j=a)}});
Object.defineProperty(Qa.prototype,"width",{get:function(){return this.f},set:function(a){"number"===typeof a&&(this.f=a)}});Object.defineProperty(Qa.prototype,"w",{get:function(){return this.width},set:function(a){this.width=a}});Object.defineProperty(Qa.prototype,"height",{get:function(){return this.c},set:function(a){"number"===typeof a&&(this.c=a)}});Object.defineProperty(Qa.prototype,"h",{get:function(){return this.height},set:function(a){this.height=a}});
Object.defineProperty(Qa.prototype,"center",{get:function(){return new THREE.Vector2(this.M+.5*this.f,this.j+.5*this.c)}});Object.defineProperty(Qa.prototype,"origin",{get:function(){return new THREE.Vector2(this.M,this.j)}});Object.defineProperty(Qa.prototype,"size",{get:function(){return new Ra(this.f,this.c)}});function Ra(a,b){this.f=a||0;this.c=b||0}Ra.prototype.constructor=Ra;Object.defineProperty(Ra.prototype,"width",{get:function(){return this.f}});
Object.defineProperty(Ra.prototype,"height",{get:function(){return this.c}});Object.defineProperty(Ra.prototype,"ratio",{get:function(){return this.f/this.c}});var F={Db:"undefined",IMAGE:"image",VIDEO:"video",oc:"grid"},Sa={Dc:"equi",Ad:"cube",Sa:"flat",wm:"hotspot"};
function Oa(a,b){this.i=a;this.m=b;this.j="";this.K=this.c=null;this.o=!1;this.f=null;n.call(this,"Media");this.f=new q(this,!0);b=this.m;if("undefined"===typeof b||null===b)this.j=F.Db,Ta(this);else if(this.M=b.uid,this.c="undefined"!==typeof b.options?b.options:null,this.j=b.type,a=b.source,"undefined"!==typeof b.source&&"undefined"===typeof b.source.format&&(b.source.format=Sa.Sa),this.j===F.oc)Ta(this);else if("undefined"!==typeof b.source&&null!==b.source)if(this.j===F.IMAGE){if(!a.url)throw"Multi resolution not implemented yet !";
if(a.format===Sa.Dc)a={key:this.M,url:a.url},this.K=new Ua(this.i,a);else if(a.format===Sa.Ad||a.format===Sa.Sa)a={key:this.M,url:a.url},this.K=new Ua(this.i,a);else throw"Media format not supported";this.K.onLoadComplete.ca(this.A,this)}else if(this.j===F.VIDEO){if(Array.isArray(a.levels)){a.url=[];b=0;for(var d=a.levels.length;b<d;b++)!1!==I.check(a.levels[b].device)&&a.url.push(a.levels[b].url)}if("string"===typeof a.url||0!==a.url.length)"undefined"!==typeof a.streaming&&a.streaming.toLowerCase()===
Va.mf?this.K=new J(this.i,this.M):(b=this.i.story.scene,this.K=new K(this.i,this.M,null,null,!0===b.Uk(this.M)&&!0===b.Yk()?!0:!1)),this.K.load(a.url),this.K.onLoadedMetaData.ca(this.u,this)}}Oa.prototype=Object.create(n.prototype);Oa.prototype.constructor=Oa;Oa.prototype.A=function(){Ta(this)};
Oa.prototype.u=function(){null!==this.c&&(this.K.volume="number"===typeof this.c.volume?this.c.volume:1,this.K.loop="boolean"===typeof this.c.loop?this.c.loop:!0,this.K.currentTime="number"===typeof this.c.startTime?this.c.startTime:0,!0===this.c.autoPlay&&"visible"===document[I.visibilityState]&&this.K.play(),this.K.autoPause=this.c.autoPause,this.K.autoResume=this.c.autoResume);Ta(this)};function Ta(a){a.o=!0;a.f.D()}
Oa.prototype.destroy=function(){null!==this.K&&(this.K.destroy(),this.K=null);null!==this.f&&(this.f.destroy(),this.f=null);this.i=null};Object.defineProperty(Oa.prototype,"config",{get:function(){return this.m}});Object.defineProperty(Oa.prototype,"type",{get:function(){return this.j}});Object.defineProperty(Oa.prototype,"displayObject",{get:function(){return this.K}});Object.defineProperty(Oa.prototype,"loaded",{get:function(){return this.o}});
Object.defineProperty(Oa.prototype,"onLoadComplete",{get:function(){return this.f}});function y(a){this.i=a;this.c=this.A=this.u=this.o=this.f=this.m=this.F=null;this.G=Wa.Db;this.H=this.I=this.O=this.j=null;this.P=this.J=this.L=!1;this.B=null;n.call(this,"RenderManager");this.C=new THREE.Clock;this.i.onReady.add(this.fi,this,1E3)}y.prototype=Object.create(n.prototype);e=y.prototype;e.constructor=y;
e.fi=function(){var a={antialias:!0,alpha:!0,premultipliedAlpha:!1,stencil:!1,canvas:this.i.canvas.dom};try{this.F=new THREE.WebGLRenderer(a)}catch(b){this.destroy();return}this.F.autoClear=!1;this.F.autoClearDepth=!0;this.F.autoClearColor=!0;this.o=new Xa(this.i);this.o.onChange.add(this.Xn,this);this.A=new Ya(this.i);this.f=new Za(this.i);this.H=new $a(this.i);this.m=new ab(this.i);this.f.onDisplayChange.add(this.Vj,this);bb(this,this.f.rendererSize);this.j=new L(this.i);this.i.canvas.onResize.add(this.Xi,
this);this.i.story.onSceneLoadStart.add(this.Kj,this)};
e.Kj=function(){this.i.story.scene.onUnloadStart.ca(this.Nn,this);var a=this.i.story.scene.config;this.i.container.background=this.i.story.scene.background;this.H.yk();this.m.tk(this.H.renderScenes);this.o.load(a.view);var b=B.gb(this.i.mainConfig.camera,a.camera);this.j.load(b);b=a.sound;if("undefined"!==typeof b&&"undefined"!==typeof b.source){var d,g,h,k;"undefined"!==typeof b.options&&(d="number"===typeof b.options.volume?G.$(b.options.volume,0,1):1,g="boolean"===typeof b.options.loop?b.options.loop:
!1,h="number"===typeof b.options.startTime?b.options.startTime:0,k="boolean"===typeof b.options.autoPlay?b.options.autoPlay:!1);"undefined"!==typeof b.source.url&&""!==b.source.url&&(this.u=new N(this.i,a.sound.uid,a.sound.source.url,a.sound.type===Pa.kf),"undefined"!==typeof b.options&&null!==b.options&&(this.u.volume=d,this.u.loop=g,this.u.startTime=h,!0===k&&this.u.play(this.u.startTime,this.u.loop,!0)))}a=this.i.story.scene.media;a.onLoadComplete.ca(this.pn,this);B.R(a.displayObject,["VideoHTML5",
"VideoDash"])&&a.displayObject.onQualityChange.add(this.bm,this)};e.Nn=function(){this.J=this.P=!1;cb(this);null!==this.H&&this.H.df();null!==this.A&&this.A.Mh();null!==this.m&&this.m.ff();null!==this.u&&(this.u.destroy(),this.u=null)};e.Xn=function(){null!==this.c&&this.c.Ac();this.A.nl(this.o.type);this.o.type===db.rc?this.m.Wg(!1):this.m.Wg(!0,this.A.material,this.A.renderTarget)};
e.pn=function(a){a=a.emitter;eb(this,this.f.presentingVR);fb(this,this.G);null!==this.c&&(this.c.displayObject=a.displayObject);a=null;var b=this.i.story.scene.config,d=b.media;"undefined"!==typeof d&&null!==d&&"undefined"!==typeof d.fx&&null!==d.fx&&(a=this.i.postProcessing.te(d.fx));null!==this.c&&this.m.Tg(this.c.renderTarget.texture,a,1);"undefined"!==typeof b.fx&&null!==b.fx&&this.m.sk(this.i.postProcessing.te(b.fx));this.J=!0};e.bm=function(a){this.c.displayObject=a.emitter};
function bb(a,b){var d=a.f.presentingVR,g=!0;!0===d&&(g=!1);!1===d&&a.f.setSize(b);a.F.setSize(b.width,b.height,g);a.O=b;a.I=new Ra(b.width*(d?.5:1),b.height);null!==a.c&&a.c.setSize(a.I);a.A.setSize(a.I);a.m.setSize(a.I)}e.Xi=function(){var a=this.i.canvas.dom;bb(this,new Ra(a.width,a.height))};e.Vj=function(){bb(this,this.f.rendererSize);this.A.mode=!0===this.f.presentingVR?gb.Ec:gb.$a};
function fb(a,b){var d=null,g=null;null!==a.c&&(null!==a.c.displayObject&&(d=a.c.displayObject),null!==a.c.renderTarget&&(g=a.c.renderTarget));cb(a);var h={},k=a.i.story.scene.media,l=k.config;if("undefined"!==typeof l&&null!==l){h.type=l.type;if("undefined"!==typeof l.source&&null!==l.source&&(h.So=l.source.format,k=k.displayObject.element.width/k.displayObject.element.height,"undefined"!==typeof l.source.fov)){var u;"number"===typeof l.source.fov?u=l.source.fov.vertical:"number"===typeof l.source.fov.vertical?
u=l.source.fov.vertical:u="number"===typeof l.source.fov.horizontal?l.source.fov.horizontal/k:"number"===typeof l.source.fov.diagonal?l.source.fov.diagonal/Math.sqrt(1+k*k):90;h.ip=G.T(u)}"undefined"!==typeof l.options&&null!==l.options&&"undefined"!==typeof l.options.color&&(h.color=l.options.color)}b===Wa.Kd?(a.c=new hb(a.i,g,h),b=a.F.getSize(),bb(a,new Ra(b.width,b.height))):b===Wa.Fc&&("undefined"!==typeof l&&null!==l&&"undefined"!==typeof l.source&&null!==l.source&&(h.order=l.source.order||"RLUDFB",
"number"===typeof l.source.tile?h.tile=l.source.tile:Array.isArray(l.source.levels)&&"number"===typeof l.source.levels[0].tile&&(h.tile=l.source.levels[0].tile)),a.c=new ib(a.i,g,h));null!==d&&(a.c.displayObject=d);null!==a.c&&a.c.Ac();a.L=!0;null!==a.B&&a.B.D()}
function eb(a,b){var d=a.i.story.scene.media;d.type===F.Db?a.G=Wa.Db:!0===b?a.G=Wa.Fc:(b=d.config,a.G=b.type===F.oc?Wa.Fc:"undefined"===typeof b.source||b.source.format===Sa.Ad||b.source.format===Sa.Sa||"undefined"===typeof b.source||"undefined"===typeof b.source.format?a.o.current.type===db.Sa?Wa.Kd:Wa.Fc:Wa.Kd,"undefined"===typeof b.source||"undefined"===typeof b.source.format?a.log("VR off - view "+a.o.current.type+", background type = "+a.G):a.log("VR off - media "+b.source.format+", view "+a.o.current.type+
", background type = "+a.G))}function cb(a){null!==a.c&&(a.c.destroy(),a.c=null);a.L=!1}e.update=function(){this.j.update()};
e.render=function(){if(null!==this.o&&!1!==this.J&&null!==this.m){null!==this.c&&this.c.update();for(var a=this.f.presentingVR,b=this.f.Kk(),d=0,g=b.length;d<g;d++){var h=b[d],k=h.rectangle,h=h.camera;this.F.setViewport(k.origin.x,k.origin.y,k.size.width,k.size.height);null!==this.c&&this.c.render((!0===a?h:null)||null);this.m.render(h);this.F.clearDepth();!0===a&&(k=new THREE.Scene,k.add(h),this.F.render(k,h))}!0===this.f.presentingVR&&this.f.ei()}};
e.hi=function(){if(!0!==this.f.presentingVR&&!0===I.webVR){this.f.di();this.o.wi();var a=this.i.story.scene.config;"undefined"!==typeof a.media&&null!==a.media&&"undefined"!==typeof a.media.source&&null!==a.media.source&&a.media.source.format===Sa.Dc&&fb(this,Wa.Fc)}};
e.gi=function(){if(!1!==this.f.presentingVR&&!0===I.webVR){this.f.ci();this.o.vi();var a=this.i.story.scene.config.media;"undefined"!==typeof a&&null!==a&&"undefined"!==typeof a.source&&null!==a.source&&a.source.format===Sa.Dc&&(eb(this,!1),fb(this,this.G))}};e.fp=function(){!0===this.f.presentingVR?this.gi():this.hi()};
e.destroy=function(){this.i.canvas.onResize.remove(this.Xi,this);this.i.story.onSceneLoadStart.remove(this.Kj,this);this.i.onReady.remove(this.fi,this);null!==this.A&&(this.A.destroy(),this.A=null);null!==this.B&&(this.B.destroy(),this.B=null);null!==this.u&&(this.u.destroy(),this.u=null);null!==this.H&&(this.H.destroy(),this.H=null);null!==this.o&&(this.o.destroy(),this.o=null);null!==this.c&&(this.c.destroy(),this.c=null);null!==this.j&&(this.j.destroy(),this.j=null);null!==this.f&&(this.f.onDisplayChange.remove(this.Vj,
this),this.f.destroy(),this.f=null);null!==this.m&&(this.m.destroy(),this.m=null);this.F=this.C=null;n.prototype.destroy.call(this)};Object.defineProperty(y.prototype,"viewer",{get:function(){return this.i}});Object.defineProperty(y.prototype,"mediaSound",{get:function(){return this.u}});Object.defineProperty(y.prototype,"webGLRenderer",{get:function(){return this.F}});Object.defineProperty(y.prototype,"renderPipeline",{get:function(){return this.m}});
Object.defineProperty(y.prototype,"backgroundRenderer",{get:function(){return this.c}});Object.defineProperty(y.prototype,"pickingManager",{get:function(){return this.A}});Object.defineProperty(y.prototype,"view",{get:function(){return this.o}});Object.defineProperty(y.prototype,"camera",{get:function(){return this.j}});Object.defineProperty(y.prototype,"canvasResolution",{get:function(){return this.O}});Object.defineProperty(y.prototype,"displayResolution",{get:function(){return this.I}});
Object.defineProperty(y.prototype,"presentingVR",{get:function(){return this.f.presentingVR}});Object.defineProperty(y.prototype,"display",{get:function(){return this.f}});Object.defineProperty(y.prototype,"backgroundReady",{get:function(){return this.L}});Object.defineProperty(y.prototype,"onBackgroundReady",{get:function(){null===this.B&&(this.B=new q(this,!0));return this.B}});Object.defineProperty(y.prototype,"objects",{get:function(){return this.H}});
Object.defineProperty(y.prototype,"hotspotsReady",{get:function(){return this.P}});
function jb(a,b,d,g){this.i=a;this.m=b;this.j=d;this.o=g;this.f=this.c=null;n.call(this,"RenderScene");this.c=new kb(lb.Yb,this.i.renderer.webGLRenderer);a=new mb(this.m,this.j);a.position=nb.Yb;this.c.addPass(a);a=this.i.postProcessing.Fe(this.o);b=0;for(d=a.length;b<d;b++)g=a[b],g.renderToScreen=!1,g.position=nb.Yb,this.c.addPass(g);this.f=new kb(lb.Ef,this.i.renderer.webGLRenderer);a=new mb(this.m,this.j);a.position=nb.Yb;this.f.addPass(a)}jb.prototype=Object.create(n.prototype);
jb.prototype.constructor=jb;jb.prototype.setSize=function(a,b){this.c.setSize(a,b);this.f.setSize(a,b)};jb.prototype.destroy=function(){this.c.readBuffer.dispose();for(this.c.writeBuffer.dispose();0<this.c.passes.length;){var a=this.c.passes.pop();a instanceof ob&&a.hasOwnProperty("tDiffuse")&&(a.uniforms.tDiffuse.value.texture.dispose(),a.uniforms.tDiffuse.value=null)}this.c=null;this.f.passes.length=0;this.o=this.j=this.m=this.i=this.f=null;n.prototype.destroy.call(this)};
Object.defineProperty(jb.prototype,"scene",{get:function(){return this.m}});Object.defineProperty(jb.prototype,"camera",{get:function(){return this.j}});Object.defineProperty(jb.prototype,"sceneComposer",{get:function(){return this.c}});Object.defineProperty(jb.prototype,"pickingComposer",{get:function(){return this.f}});function ab(a){this.i=a;this.C=this.f=this.c=null;this.j=!0;n.call(this,"RenderPipeline");this.C=new THREE.Clock;this.f=[];this.c=new kb(lb.Gi,this.i.renderer.webGLRenderer)}
ab.prototype=Object.create(n.prototype);e=ab.prototype;e.constructor=ab;
function pb(a){if(a.passes.length){for(var b=[],d=0,g=a.passes.length;d<g;d++){var h;h=a.passes[d];h=h instanceof ob?h.hasOwnProperty("map")?"Texture("+h.map.uuid.split("-")[0].slice(0,4)+")":"Texture":h instanceof mb?"Render":h instanceof THREE.ClearMaskPass?"ClearMask":h instanceof THREE.MaskPass?"Mask":h instanceof qb?"Shader("+h.type.replace("Shader","")+")":"Pass";b.push(h)}a=0;for(d=b.length;a<d;a++){g=b[a];for(h=0;h<g.length;h++);if(a<d-1)for(g=0;5>g;g++);}a=0;for(b=b.length;a<b;a++);}}
function rb(a){for(var b=0,d=a.f.length;b<d;b++)pb(a.f[b]);pb(a.c)}function sb(a,b,d){a.f.push(b);!1===d&&(b=new tb(b),a.c.addPass(b));ub(a)}function vb(a,b,d){d="undefined"!==typeof d?d:a.passes.length;if(Array.isArray(b))for(var g=b.length-1;0<=g;g--)a.insertPass(b[g],d);else b instanceof THREE.Pass&&a.insertPass(b,d)}
function ub(a){var b=a.c.passes,d=[];b.filter(function(a,b){a.position===nb.yd&&d.push(b)});if(0<d.length&&0<d[0]){for(var g=[],h=d.length-1;0<=h;h--){var k=b.splice(d[h],1)[0];g.push(k)}h=0;for(k=g.length;h<k;h++)a.c.insertPass(g[h],0)}var l=[];b.filter(function(a,b){a.position===nb.sf&&l.push(b)});if(0<l.length&&l[l.length-1]<b.length-1){g=[];h=0;for(k=l.length;h<k;h++){var u=b.splice(l[h],1)[0];g.push(u)}h=0;for(k=g.length;h<k;h++)a.c.addPass(g[h])}g=0;for(h=a.f.length;g<h;g++){var k=a.f[g],u=
!1,w,E=a.f.length;for(w=0;w<E;w++)if(w!==g&&k.readBuffer===a.f[w].readBuffer){u=!0;break}u=u&&g>w;w=0;for(E=k.passes.length;w<E;w++)k.passes[w].clear=!0===u?!1:!w}g=!1;for(h=b.length-1;0<=h;h--)k=b[h],!0===g?k.renderToScreen=!1:!0===k.enabled&&(g=k.renderToScreen=!0);rb(a)}e.Wg=function(a,b,d){for(var g=0,h=this.f.length;g<h;g++){var k=this.f[g];k.type===lb.Ef&&(k.enabled=a,"undefined"!==typeof b&&(k.passes[0].overrideMaterial=b),"undefined"!==typeof d&&(k.renderTarget=d))}};
e.Tg=function(a,b,d){if("undefined"!==typeof b&&null!==b&&0<b.length){b=this.i.postProcessing.Fe(b);for(var g=0,h=b.length;g<h;g++)b[g].position=nb.yd;vb(this.c,b,0)}a=new ob(a,d);a.position=nb.yd;this.c.insertPass(a,0);ub(this)};e.tk=function(a){for(var b=0,d=a.length;b<d;b++)sb(this,a[b].sceneComposer,!1),sb(this,a[b].pickingComposer,!0);ub(this)};e.sk=function(a){a=this.i.postProcessing.Fe(a);for(var b=0,d=a.length;b<d;b++)a[b].position=nb.sf;vb(this.c,a);ub(this)};
e.Eo=function(a){if(null!==this.c)for(var b=0,d=this.c.passes.length;b<d;b++){var g=this.c.passes[b];if(g.uid===a)return g}if(null!==this.f)for(b=0,d=this.f.length;b<d;b++)for(var g=this.f[b],h=0,k=g.passes.length;h<k;h++){var l=g.passes[h];if(l.uid===a)return l}return null};
e.setSize=function(a){for(var b=0,d=this.f.length;b<d;b++){var g=this.f[b];g.setSize(a.width,a.height);for(var h=0,k=g.passes.length;h<k;h++){var l=g.passes[h];l instanceof THREE.ShaderPass&&"undefined"!==typeof l.uniforms.resolution&&(l.uniforms.resolution.value=new THREE.Vector2(1/a.width,1/a.height))}}this.c.setSize(a.width,a.height);h=0;for(k=this.c.passes.length;h<k;h++)l=this.c.passes[h],l instanceof THREE.ShaderPass&&"undefined"!==typeof l.uniforms.resolution&&(l.uniforms.resolution.value=
new THREE.Vector2(1/a.width,1/a.height))};
e.render=function(a){if(null!==this.c){if(!(this.c.passes[0]instanceof ob)){var b=document.createElement("canvas");b.width=b.height=1;var d=b.getContext("2d");d.fillStyle="rgb(0, 0, 0)";d.fillRect(0,0,b.width,b.height);b=(new THREE.TextureLoader).load(b.toDataURL());b.name="forge-default-texture";this.Tg(b,null,0)}b=0;for(d=this.c.passes.length;b<d;b++){var g=this.c.passes[b];if(g instanceof tb){var h=g.composer,k=h.readBuffer.texture;!0===h.passes[h.passes.length-1].needsSwap&&(k=h.writeBuffer.texture);
g.uniforms.tAdd.value=k}}b=this.C.getDelta();d=this.f.concat(this.c);g=0;for(h=d.length;g<h;g++)for(var k=d[g],l=0,u=k.passes.length;l<u;l++){var w=k.passes[l];w instanceof mb&&(w.camera=a)}a=0;for(d=this.f.length;a<d;a++)this.f[a].enabled&&this.f[a].render(b);this.c.render(b)}};
e.ff=function(){if(null!==this.c){this.c.readBuffer.dispose();this.c.writeBuffer.dispose();for(var a=0,b=this.c.passes.length;a<b;a++){var d=this.c.passes[a];d instanceof qb&&d.uniforms.hasOwnProperty("tAdd")&&(d.uniforms.tAdd.value=null)}this.c.passes=[]}this.f=[]};
e.destroy=function(){this.ff();this.C=null;for(var a=this.f.length-1;0<a;a--){for(var b=this.f[a],d=0,g=b.passes.length;d<g;d++){var h=b.passes[d];"function"===typeof h.destroy&&h.destroy()}b.passes.length=0}this.f=null;d=0;for(g=this.c.passes.length;d<g;d++)h=this.c.passes[d],"function"===typeof h.destroy&&h.destroy();this.c.passes.length=0;this.i=this.c=null};
Object.defineProperty(ab.prototype,"enabled",{get:function(){return this.j},set:function(a){for(var b=this.f.concat(this.c),d=0,g=b.length;d<g;d++){var h=b[d],k=a;!1===k&&(this.j=!1);for(var l=h.passes.length-1;0<=l;l--){var u=h.passes[l];u instanceof THREE.ShaderPass&&!(u instanceof tb)&&(u.enabled=k)}h.hasOwnProperty("enabled")&&(h.enabled=k);ub(this)}this.j=a}});
function Za(a){this.i=a;this.o=this.dc=!1;this.u=this.f=this.A=this.m=this.c=null;this.F=1;this.C=this.j=null;n.call(this,"RenderDisplay");wb(this)}Za.prototype=Object.create(n.prototype);e=Za.prototype;e.constructor=Za;
function wb(a){var b=a.i.renderer.webGLRenderer;a.F=b.getPixelRatio();b=b.getSize();a.u=new Ra(b.width,b.height);a.f=a.u;a.m=[0,0,.5,1];a.A=[.5,0,.5,1];"VRFrameData"in window&&(a.j=new VRFrameData);!0===I.webVR?(navigator.getVRDisplays().then(function(b){a.dc=0<b.length;for(var d=0,h=b.length;d<h;d++)if("VRDisplay"in window&&b[d]instanceof VRDisplay){a.c=b[d];a.c.depthNear=.01;a.c.depthFar=2E4;break}}),xb(a)):a.warn("missing api navigator.getVRDisplays")}
function xb(a){a.i.container.onFullscreenEnter.add(a.Cc,a);a.i.container.onFullscreenExit.add(a.Cc,a);window.addEventListener("vrdisplaypresentchange",a.Cc.bind(a),!1)}
e.Cc=function(){var a=this.o,b=this.i.renderer.webGLRenderer;this.o="undefined"!==typeof this.c&&(!0===this.c.isPresenting||!1===this.dc&&document[I.fullscreenElement]instanceof window.HTMLElement);if(!0===this.o){var d=this.c.getEyeParameters("left");!0===this.dc&&(this.B=d.renderWidth,this.H=d.renderHeight,this.m=[0,0,.5,1],this.A=[.5,0,.5,1],this.c.getLayers&&(d=this.c.getLayers(),0<d.length&&null!==d[0].leftBounds&&4===d[0].leftBounds.length&&(this.m=d[0].leftBounds,this.A=d[0].rightBounds)));
!1===a&&(this.F=b.getPixelRatio(),d=b.getSize(),this.u.width=d.width,this.u.height=d.height,this.f=new Ra(2*this.B,this.H),b.setPixelRatio(1))}else!0===a&&(this.f=this.u,b.setPixelRatio(this.F));this.o!==a&&null!==this.C&&this.C.D()};function yb(a,b){var d=a.i.renderer.webGLRenderer.domElement;new Promise(function(a,h){"undefined"===typeof this.c?h(Error("No VR hardware found.")):this.o===b?a():!0===this.dc&&(b?a(this.c.requestPresent([{source:d}])):a(this.c.exitPresent()))}.bind(a))}
e.di=function(){this.i.raf.stop();this.i.raf.start(this.c);yb(this,!0)};e.ci=function(){this.i.raf.stop();this.i.raf.start(window);yb(this,!1)};e.Ik=function(){if(null===this.c)return null;var a=null;null!==this.j&&"undefined"!==typeof this.j.c?a=this.j.c:a=this.c.getPose();if(null===a||null===a.orientation)return new THREE.Quaternion;a=a.orientation;return new THREE.Quaternion(-a[1],-a[0],-a[2],a[3])};
e.Kk=function(){var a=this.i.renderer.camera,b=[];if("undefined"!==typeof this.c&&null!==this.c&&!0===this.o){var d=this.f.width*this.m[0],g=this.f.height*this.m[1],h=this.f.width*this.m[2],k=this.f.height*this.m[3],l=new Qa(d,g,h,k),d=this.f.width*this.A[0],g=this.f.height*this.A[1],h=this.f.width*this.A[2],k=this.f.height*this.A[3],d=new Qa(d,g,h,k);b.push(new zb(l,a.left));b.push(new zb(d,a.right))}else b.push(new zb(new Qa(0,0,this.u.width,this.u.height),this.i.renderer.view.type===db.Sa?a.flat:
a.main));return b};e.setSize=function(a){this.u=a;this.i.renderer.webGLRenderer.setPixelRatio(1)};e.ei=function(){!0===this.dc&&"undefined"!==typeof this.c&&!0===this.o&&!0===this.c.capabilities.hasExternalDisplay&&this.c.submitFrame()};e.destroy=function(){this.i.container.onFullscreenEnter.remove(this.Cc,this);this.i.container.onFullscreenExit.remove(this.Cc,this);window.removeEventListener("vrdisplaypresentchange",this.Cc.bind(this));this.i=this.f=this.A=this.m=this.j=this.c=null};
Object.defineProperty(Za.prototype,"presentingVR",{get:function(){return this.o}});Object.defineProperty(Za.prototype,"vrDisplay",{get:function(){return this.c}});Object.defineProperty(Za.prototype,"vrFrameData",{get:function(){return null!==this.c&&"function"===typeof this.c.getFrameData&&null!==this.j?(this.c.getFrameData(this.j),this.j):null}});Object.defineProperty(Za.prototype,"rendererSize",{get:function(){return this.f}});
Object.defineProperty(Za.prototype,"onDisplayChange",{get:function(){null===this.C&&(this.C=new q(this));return this.C}});function zb(a,b){this.c=a||null;this.j=b||null}zb.prototype.constructor=zb;Object.defineProperty(zb.prototype,"rectangle",{get:function(){return this.c}});Object.defineProperty(zb.prototype,"camera",{get:function(){return this.j}});function Ab(a,b,d,g){this.i=a;this.j=this.m=this.f=this.Da=null;this.B=d.So||Sa.Ad;this.C=b||null;n.call(this,g||"BackgroundRenderer");this.Vc()}
Ab.prototype=Object.create(n.prototype);e=Ab.prototype;e.constructor=Ab;e.Vc=function(){this.m=new THREE.Scene;null===this.C&&(this.C=new THREE.WebGLRenderTarget(this.i.renderer.canvasResolution.width,this.i.renderer.canvasResolution.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,rp:!1}))};e.Gg=function(){throw"Please implement "+this.Va+"::_setDisplayObject";};e.dd=function(){throw"Please implement "+this.Va+"::_clear";};
e.Ac=function(){throw Error(this.Va+"::updateAfterViewChange not implemented");};e.setSize=function(a){null!==this.renderTarget&&this.renderTarget.setSize(a.width,a.height)};
e.render=function(a){if(null!==this.i.renderer&&null!==this.C){if(null!==this.c&&null!==this.A&&null!==this.H&&null!==this.K&&null!==this.K.element&&(!0!==B.R(this.K,["VideoHTML5","VideoDash"])||!1!==this.K.playing)){var b=this.K.element;b instanceof HTMLVideoElement&&b.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA&&this.H&&(this.H.drawImage(b,0,0,b.videoWidth,b.videoHeight,0,0,this.A.width,this.A.height),this.c.needsUpdate=!0)}null!==a?this.i.renderer.webGLRenderer.render(this.m,a,this.C,!0):this.i.renderer.webGLRenderer.render(this.m,
this.j,this.C,!0)}};
e.update=function(){if(this.f.material instanceof THREE.ShaderMaterial){var a=this.i.renderer.displayResolution;this.f.material.uniforms.hasOwnProperty("tViewportResolution")&&(this.f.material.uniforms.tViewportResolution.value=new THREE.Vector2(a.width,a.height));this.f.material.uniforms.hasOwnProperty("tViewportResolutionRatio")&&(this.f.material.uniforms.tViewportResolutionRatio.value=a.ratio);this.f.material.uniforms.hasOwnProperty("tModelViewMatrixInverse")&&(this.f.material.uniforms.tModelViewMatrixInverse.value=this.i.renderer.camera.modelViewInverse);
this.i.renderer.view.current.Nb(this.f.material.uniforms)}};e.destroy=function(){this.j=null;null!==this.C&&(this.C.dispose(),this.C=null);for(;0<this.m.children.length;){var a=this.m.children.pop();null!==a.geometry&&(a.geometry.dispose(),a.geometry=null);this.m.remove(a)}this.i=this.m=null;n.prototype.destroy.call(this)};Object.defineProperty(Ab.prototype,"textureSize",{get:function(){return null===this.c||"undefined"===typeof this.c.image?null:new Ra(this.c.image.width,this.c.image.height)}});
Object.defineProperty(Ab.prototype,"renderTarget",{get:function(){return this.C}});Object.defineProperty(Ab.prototype,"displayObject",{get:function(){return this.K},set:function(a){null===a?this.dd():this.Gg(a)}});Object.defineProperty(Ab.prototype,"scene",{get:function(){return this.m}});var Wa={Db:"undefined",Kd:"shader",Fc:"mesh"};
function ib(a,b,d){this.H=this.A=this.c=this.K=null;this.I=d.type||F.oc;this.P=d.ip||90;this.J=d.color||"#ffffff";this.O=d.order||"RLUDFB";this.u=new THREE.Vector2(0,0);this.L=d.tile||512;this.o=this.F=0;this.G=1;Ab.call(this,a,b,d,"BackgroundMeshRenderer")}ib.prototype=Object.create(Ab.prototype);e=ib.prototype;e.constructor=ib;e.Vc=function(){Ab.prototype.Vc.call(this);this.j=this.i.renderer.camera.main;this.F=2E4;this.o=32};
e.Gg=function(a){this.K=a;if(B.R(a,"Image"))this.c=new THREE.Texture,this.c.image=a.element;else if(B.R(a,"Canvas"))this.c=new THREE.Texture,this.c.image=a.element;else if(B.R(a,["VideoHTML5","VideoDash"]))"safari"===I.browser.toLowerCase()&&1440<a.originalHeight&&(this.G=2),this.A=document.createElement("canvas"),this.A.width=a.originalWidth/this.G,this.A.height=a.originalHeight/this.G,this.H=this.A.getContext("2d"),this.c=new THREE.Texture(this.A);else throw"Wrong type of display object "+a.type;
this.c.format=THREE.RGBAFormat;this.c.mapping=THREE.Texture.DEFAULT_MAPPING;"undefined"!==typeof this.f.material.uniforms.tTextureRatio&&(this.f.material.uniforms.tTextureRatio.value=this.c.image.width/this.c.image.height);this.c.generateMipmaps=!1;this.c.minFilter=THREE.LinearFilter;if(this.B===Sa.Sa){G.qd(a.width)&&G.qd(a.height)&&(this.c.generateMipmaps=!0,this.c.minFilter=THREE.LinearMipMapLinearFilter);this.f.geometry&&(this.f.geometry.dispose(),this.f.geometry=null);var b=this.F,d=Math.round(b/
(a.width/a.height));a=d/(2*Math.tan(.5*this.P));b=new THREE.PlaneBufferGeometry(b,d);this.f.geometry=b;this.f.position.set(0,0,-a)}this.c.needsUpdate=!0;this.f.material.Oe=!1;null!==this.c.image&&(this.u.x=this.c.image.width/this.L,this.u.y=this.c.image.height/this.L);this.f.onBeforeRender=this.rl.bind(this);if(this.f.geometry instanceof THREE.BoxBufferGeometry)b=Bb(this);else if(this.f.geometry instanceof THREE.SphereBufferGeometry){b=new Float32Array(this.f.geometry.attributes.uv.array.byteLength/
4);a=b.keys();var d=this.o,g=1/d,h,k;for(k=0;k<=d;k++){var l=k*g;for(h=0;h<=d;h++){var u=h*g;b[a.next().value]=1-u;b[a.next().value]=1-l}}}else b=null;null!==b&&this.f.geometry.attributes.uv.set(b)};e.rl=function(){"undefined"!==typeof this.f.material.uniforms&&(this.f.material.uniforms.hasOwnProperty("tTexture")&&(this.f.material.uniforms.tTexture.value=this.c),this.f.material.uniforms.hasOwnProperty("tOpacity")&&(this.f.material.uniforms.tOpacity.value=1))};
function Bb(a){function b(a,b,h,mc,nc){if(-1===a)throw"Unknown face for cube mapping.";var E,ya=a%b/b;a=1-(1+parseInt(a/b,10))/h;if(nc)for(nc=0,h=mc;nc<=h;nc++)for(b=0,E=mc;b<=E;b++)d[g.next().value]=u+k*b+ya,d[g.next().value]=w+l*nc+a;else for(nc=0,h=mc;nc<=h;h--)for(b=0,E=mc;b<=E;E--)d[g.next().value]=u+k*E+ya,d[g.next().value]=w+l*h+a}var d=new Float32Array((a.o+1)*(a.o+1)*12),g=B.Vg(d),h=a.O.split(""),k=1/1.01*(1/a.u.x/a.o),l=1/1.01*(1/a.u.y/a.o),u=1/a.u.x*.005,w=1/a.u.y*.005;b(h.indexOf("R"),
a.u.x,a.u.y,a.o);b(h.indexOf("L"),a.u.x,a.u.y,a.o);b(h.indexOf("U"),a.u.x,a.u.y,a.o,!0);b(h.indexOf("D"),a.u.x,a.u.y,a.o,!0);b(h.indexOf("B"),a.u.x,a.u.y,a.o);b(h.indexOf("F"),a.u.x,a.u.y,a.o);return d}e.dd=function(){this.i.renderer.webGLRenderer.clearColor()};
e.Ac=function(){if(null!==this.i.renderer.view.current){var a;this.I===F.oc?(a=B.clone(this.i.renderer.view.current.shaderWTS).Oe,this.o=8):a=B.clone(this.i.renderer.view.current.shaderWTS).mapping;var b=Cb.ib(a.vertexShader),d=Cb.ib(a.fragmentShader);a=new THREE.RawShaderMaterial({fragmentShader:d,vertexShader:b,uniforms:a.uniforms,name:"BackgroundMeshMaterial",transparent:!0,side:THREE.BackSide});b=null;null!==this.c&&(this.f.material.uniforms.hasOwnProperty("tTexture")&&(a.uniforms.tTexture.value=
this.c),this.f.material.uniforms.hasOwnProperty("tTextureRatio")&&(a.uniforms.tTextureRatio.value=this.c.image.width/this.c.image.height));this.I===F.oc&&(a.uniforms.tColor.value=new THREE.Color(this.J),a.j=THREE.CustomBlending,a.f=THREE.AddEquation,a.M=THREE.SrcAlphaFactor,a.c=THREE.OneMinusSrcAlphaFactor);if(0===this.m.children.length){this.B===Sa.Dc?(this.o=64,b=new THREE.SphereBufferGeometry(this.F,this.o,this.o)):this.B===Sa.Sa?b=new THREE.PlaneBufferGeometry(this.F,this.F):b=new THREE.BoxBufferGeometry(this.F,
this.F,this.F,this.o,this.o,this.o);this.f=new THREE.Mesh(b,a);if(this.I===F.oc&&null!==this.f&&"undefined"!==typeof this.f.geometry){for(var b=new Int8Array(2*this.f.geometry.attributes.position.array.length/3),d=B.Vg(b),g=new THREE.Vector2(1,1),h=new THREE.Vector2(1,-1),k=new THREE.Vector2(-1,1),l=new THREE.Vector2(-1,-1),u=this.o+1,w=0;6>w;w++)for(var E=0;E<u;E++){var ya,sc;E&1?(ya=g,sc=h):(ya=k,sc=l);for(var mc=0;mc<u;mc++)mc&1?(b[d.next().value]=sc.x,b[d.next().value]=sc.y):(b[d.next().value]=
ya.x,b[d.next().value]=ya.y)}this.f.geometry.addAttribute("quadrilateralCoords",new THREE.BufferAttribute(b,2))}this.B===Sa.Sa&&(this.f.position.set(0,0,.5*-this.F),this.f.material.side=THREE.FrontSide);this.B===Sa.Dc&&this.f.rotation.set(0,Math.PI/2,0,"YXZ");this.m.add(this.f)}else this.f=this.m.children[0],this.f.material.dispose();this.f.material=a;a.needsUpdate=!0}"undefined"!==typeof this.f.material.uniforms.tTextureRatio&&(this.f.material.uniforms.tTextureRatio.value=this.c.image.width/this.c.image.height)};
e.render=function(a){null!==this.i.renderer&&Ab.prototype.render.call(this,a)};e.destroy=function(){this.dd();this.H=this.A=this.K=null;null!==this.f&&(null!==this.f.geometry&&(this.f.geometry.dispose(),this.f.geometry=null),null!==this.f.material&&(this.f.material.dispose(),this.f.material=null),this.f=null);null!==this.c&&(this.c.dispose(),this.c=null);Ab.prototype.destroy.call(this)};Object.defineProperty(ib.prototype,"texture",{get:function(){return this.c}});
function hb(a,b,d){this.H=this.A=this.c=this.K=null;this.o=1;Ab.call(this,a,b,d,"BackgroundShaderRenderer")}hb.prototype=Object.create(Ab.prototype);e=hb.prototype;e.constructor=hb;e.Vc=function(){Ab.prototype.Vc.call(this);Db(this);this.j=new THREE.OrthographicCamera(-1,1,1,-1,-1,1)};
e.Gg=function(a){this.K=a;if(B.R(a,"Image")||B.R(a,"Canvas"))this.c=new THREE.Texture,this.c.image=a.element;else if(B.R(a,["VideoHTML5","VideoDash"]))"safari"===I.browser.toLowerCase()&&1440<a.originalHeight&&(this.o=2),this.K.onQualityChange.has(this.Wc,this)&&this.K.onQualityChange.remove(this.Wc,this),this.K.onQualityChange.add(this.Wc,this),this.A=document.createElement("canvas"),this.A.width=a.originalWidth/this.o,this.A.height=a.originalHeight/this.o,this.H=this.A.getContext("2d"),this.c=new THREE.Texture(this.A);
else throw"Wrong type of display object "+a.np;this.c.format=THREE.RGBFormat;this.c.mapping=THREE.Texture.DEFAULT_MAPPING;this.c.magFilter=THREE.LinearFilter;this.c.wrapS=THREE.ClampToEdgeWrapping;this.c.wrapT=THREE.ClampToEdgeWrapping;this.c.generateMipmaps=!1;this.c.minFilter=THREE.LinearFilter;this.B===Sa.Sa&&G.qd(a.width)&&G.qd(a.height)&&(this.c.generateMipmaps=!0,this.c.minFilter=THREE.LinearMipMapLinearFilter);this.c.needsUpdate=!0;this.f.material.uniforms.tTexture.value=this.c;this.f.material.uniforms.hasOwnProperty("tTextureRatio")&&
(this.f.material.uniforms.tTextureRatio.value=this.c.image.width/this.c.image.height);this.f.material.uniforms.hasOwnProperty("tTextureSize")&&(this.f.material.uniforms.tTextureSize.value=new THREE.Vector2(this.c.image.width,this.c.image.height))};e.Wc=function(a){a=a.emitter;this.A.width=a.originalWidth/this.o;this.A.height=a.originalHeight/this.o};
function Db(a){var b=a.i.renderer.view.current.shaderSTW,d=Cb.ib(b.vertexShader),g=Cb.ib(b.fragmentShader),b=new THREE.ShaderMaterial({uniforms:b.uniforms,vertexShader:d,fragmentShader:g,side:THREE.FrontSide});null!==a.c&&(b.uniforms.tTexture.value=a.c);0===a.m.children.length?(d=new THREE.PlaneBufferGeometry(2,2),a.f=new THREE.Mesh(d,b),a.m.add(a.f)):(a.f=a.m.children[0],a.f.material=null);a.f.material=b;b.needsUpdate=!0}e.dd=function(){this.i.renderer.webGLRenderer.clearColor()};
e.render=function(){null!==this.i.renderer&&Ab.prototype.render.call(this,null)};e.Ac=function(){Db(this);null!==this.c&&"undefined"!==typeof this.c.image&&(this.f.material.uniforms.hasOwnProperty("tTextureRatio")&&(this.f.material.uniforms.tTextureRatio.value=this.c.image.width/this.c.image.height),this.f.material.uniforms.hasOwnProperty("tTextureSize")&&(this.f.material.uniforms.tTextureSize.value=new THREE.Vector2(this.c.image.width,this.c.image.height)))};
e.destroy=function(){this.dd();"undefined"!==typeof this.K.onQualityChange&&this.K.onQualityChange.has(this.Wc,this)&&this.K.onQualityChange.remove(this.Wc,this);this.H=this.A=this.K=null;null!==this.c&&(this.c.dispose(),this.c=null);Ab.prototype.destroy.call(this)};Object.defineProperty(hb.prototype,"texture",{get:function(){return this.c}});function ua(a){this.i=a;this.c=this.f=null;n.call(this,"PostProcessing");this.c={}}ua.prototype=Object.create(n.prototype);e=ua.prototype;e.constructor=ua;
e.Fe=function(a){if("undefined"===typeof a||null===a||!a.length)return[];for(var b=[],d=0,g=a.length;d<g;d++){var h=a[d],k;if(THREE.hasOwnProperty(h.type)){k=new qb(h.uid,h.type,THREE[h.type]);if("undefined"!==typeof k.uniforms)for(var l in h.params){var u=h.params[l],w=u;if("object"===typeof u&&u.hasOwnProperty("type")&&u.hasOwnProperty("args")){var E=u.args;switch(u.type){case "THREE.Color":if(3===E.length)w=new THREE.Color(E[0],E[1],E[2]);else if("string"===typeof E||"number"===typeof E)w=new THREE.Color(E);
else throw Error("Cannot create THREE.Color with "+typeof E+" (length "+E.length+")");break;case "THREE.Vector2":w=new THREE.Vector2(E[0],E[1]);break;case "THREE.Vector3":w=new THREE.Vector3(E[0],E[1],E[2])}}k.uniforms[l].value=w}b.push(k)}else this.warn("Unknown image effect ("+h.type+")")}return b};e.te=function(a){return this.c[a]};
e.ia=function(a){a=this.f=a;this.M=a.uid;if("undefined"!==typeof a.fxSets&&0<a.fxSets.length)for(var b=0,d=a.fxSets.length;b<d;b++){var g=a.fxSets[b];this.c[g.uid]=g.set}};e.destroy=function(){this.c=this.i=null};var lb={Gi:"main",Yb:"render",Ef:"picking"};function kb(a,b,d){this.M=a||lb.Yb;this.f="";this.c=!0;THREE.EffectComposer.call(this,b,d);this.f=Eb(this.M)}kb.prototype=Object.create(THREE.EffectComposer.prototype);kb.prototype.constructor=kb;
kb.prototype.destroy=function(){this.writeBuffer.dispose();this.writeBuffer=null;this.readBuffer.dispose();this.readBuffer=null};kb.uid=0;function Eb(a){return"$_EffectComposer."+a+"."+kb.uid++}Object.defineProperty(kb.prototype,"type",{get:function(){return this.M}});Object.defineProperty(kb.prototype,"renderTarget",{get:function(){return this.readBuffer},set:function(a){null!==this.readBuffer&&this.readBuffer.dispose();this.readBuffer=a}});
Object.defineProperty(kb.prototype,"enabled",{get:function(){return this.c},set:function(a){this.c=a}});Object.defineProperty(kb.prototype,"name",{get:function(){return this.f}});var nb={Od:"",yd:"background",Yb:"render",sf:"global"};function ob(a,b){this.c="";THREE.TexturePass.call(this,a,b)}ob.prototype=Object.create(THREE.TexturePass.prototype);ob.prototype.constructor=ob;Object.defineProperty(ob.prototype,"position",{get:function(){return this.c},set:function(a){this.c=a}});
function qb(a,b,d,g){this.o=a;this.m=b||"shader";this.M=nb.Od;this.f=0;THREE.ShaderPass.call(this,d,g||"tDiffuse")}qb.prototype=Object.create(THREE.ShaderPass.prototype);qb.prototype.constructor=qb;qb.prototype.render=function(a,b,d,g,h){this.f+=g;this.uniforms.hasOwnProperty("time")&&(this.uniforms.time.value=this.f);THREE.ShaderPass.prototype.render.call(this,a,b,d,g,h)};Object.defineProperty(qb.prototype,"uid",{get:function(){return this.o}});Object.defineProperty(qb.prototype,"type",{get:function(){return this.m}});
Object.defineProperty(qb.prototype,"position",{get:function(){return this.M},set:function(a){this.M=a}});function tb(a){this.j=a;this.c=null;a=Cb.ib(Fb.wts_vert_rectilinear);var b=Cb.ib(Fb.wts_frag_addition);this.c=new THREE.RawShaderMaterial({fragmentShader:b,vertexShader:a,uniforms:{tTexture:{type:"t",value:null},tAdd:{type:"t",value:null}},side:THREE.FrontSide,name:"$_AdditionPassMaterial"});qb.call(this,"","Addition",this.c,"tTexture")}tb.prototype=Object.create(qb.prototype);
tb.prototype.constructor=tb;tb.prototype.destroy=function(){null===this.c&&(this.c.dispose(),this.c=null);this.j=null};Object.defineProperty(tb.prototype,"composer",{get:function(){return this.j}});function mb(a,b,d,g,h){this.c="";THREE.RenderPass.call(this,a,b,d,g,h)}mb.prototype=Object.create(THREE.RenderPass.prototype);mb.prototype.constructor=mb;Object.defineProperty(mb.prototype,"position",{get:function(){return this.c},set:function(a){this.c=a}});
var Fb={coordinates:"\nvec3 toCartesian(in vec3 rtp) {\n    float r = rtp.x;\n    float theta = rtp.y;\n    float phi = rtp.z;\n    float x = r * cos(phi) * sin(theta);\n    float y = r * sin(phi);\n    float z = r * cos(phi) * cos(theta);\n    return vec3(x,y,z);\n}\nvec3 toSpherical(in vec3 pt) {\n    float r = length(pt);\n    float theta = -atan(pt.x, pt.z);\n    float phi = asin(pt.y / r);\n    return vec3(r,theta,phi);\n}\n",defines:"precision highp float;\nprecision highp int;\n#define PI_2  1.5707963268\n#define PI  3.141592653589793\n#define PI2 6.28318530717959\n#define RECIPROCAL_PI2 0.1591549430919\n#define isTrue(a) ((a) != 0)\n",
helpers:"\nfloat wrap(in float x, in float min, in float max) {\n    return x - ((max - min) * (1.0 - step(x, min) - step(x, max)));\n}\nvec2 getFragment() {\n    return (2.0 * gl_FragCoord.xy / tViewportResolution - 1.0) * vec2(tViewportResolutionRatio, 1.0);\n}\nvec2 smoothTexUV(vec2 uv, vec2 texSize) {\n    uv = uv * texSize + 0.5;\n    vec2 iuv = floor(uv);\n    vec2 fuv = uv - iuv;\n    uv = iuv + fuv * fuv * fuv * (fuv * (fuv * 6.0 - 15.0) + 10.0);\n    return (uv - 0.5) / texSize;\n}\n",texcoords:"\nvec2 toEquirectangularTexCoords(in vec2 thetaphi) {\n    thetaphi.x = wrap(thetaphi.x + PI, -PI, PI);\n    vec2 coords = 0.5 + thetaphi / vec2(PI2, PI);\n    return coords;\n}\n",
uniforms:"uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\n",vert_attributes:"attribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n",vert_attributes_wireframe:"attribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 quadrilateralCoords;\n",stw_frag_proj_flat:"\n#include <defines>\nuniform sampler2D tTexture;\nuniform vec2 tViewportResolution;\nuniform float tViewportResolutionRatio;\nuniform float tTextureRatio;\nuniform vec2 tTextureSize;\nuniform float tFov;\nuniform float tYaw;\nuniform float tPitch;\nuniform int tRepeatX;\nuniform int tRepeatY;\n#include <helpers>\n#include <coordinates>\n#include <texcoords>\nvoid main() {\n    vec2 sTexResolution = PI * vec2(tTextureRatio, 1.0);\n    vec2 sReference = vec2(tYaw, tPitch) + sTexResolution / 2.0;\n    vec2 sTexel = sReference + (tFov * 0.5) * getFragment();\n    vec2 uv = sTexel / sTexResolution;\n    if (isTrue(tRepeatX)) {\n        uv.x = mod(uv.x, 1.0);\n    }\n    else if (uv.x > 1.0 || uv.x < 0.0) {\n        discard;\n    }\n    if (isTrue(tRepeatY)) {\n        uv.y = mod(uv.y, 1.0);\n    }\n    else if (uv.y > 1.0 || uv.y < 0.0) {\n        discard;\n    }\n    gl_FragColor = vec4(texture2D(tTexture, uv).rgb, 1.0);\n}\n",
stw_frag_proj_gopro:"\n#include <defines>\nuniform sampler2D tTexture;\nuniform vec2 tViewportResolution;\nuniform float tViewportResolutionRatio;\nuniform mat4 tModelViewMatrixInverse;\nuniform float tProjectionDistance;\nuniform float tProjectionScale;\n#include <helpers>\n#include <coordinates>\n#include <texcoords>\nvec2 projection() {\n    vec2 frag = getFragment();\n    vec2 c = tProjectionScale * frag;\n    float zs = tProjectionDistance;\n    float xy2 = dot(c,c);\n    float zs12 = (zs + 1.0) * (zs + 1.0);\n    float delta = 4.0 * (zs * zs * xy2 * xy2 - (xy2 + zs12) * (xy2 * zs * zs - zs12));\n    if (delta < 0.0) { return vec2(-1.); }\n    float z = (2.0 * zs * xy2 - sqrt(delta)) / (2.0 * (zs12 + xy2));\n    float x = c.x * ((zs - z) / (zs + 1.0));\n    float y = c.y * ((zs - z) / (zs + 1.0));\n    vec3 vx = vec3(tModelViewMatrixInverse * vec4(x, y, z, 1.0));\n    return toSpherical(vx).yz;\n}\nvoid main() {\n    vec2 texCoords = toEquirectangularTexCoords(projection());\n    gl_FragColor = vec4(texture2D(tTexture, texCoords).rgb, 1.0);\n}\n",
stw_frag_proj_rectilinear:"\n#include <defines>\nuniform sampler2D tTexture;\nuniform vec2 tViewportResolution;\nuniform float tViewportResolutionRatio;\nuniform mat4 tModelViewMatrixInverse;\nuniform float tProjectionScale;\n#include <helpers>\n#include <coordinates>\n#include <texcoords>\nvec2 projection() {\n    vec2 frag = tProjectionScale * getFragment();\n    vec4 screenPT = vec4(frag, -1.0, 1.0);\n    vec4 worldPT = tModelViewMatrixInverse * screenPT;\n    return toSpherical(worldPT.xyz).yz;\n}\nvoid main() {\n    vec2 texCoords = toEquirectangularTexCoords(projection());\n    gl_FragColor = vec4(texture2D(tTexture, texCoords).rgb, 1.0);\n}\n",
stw_vert_proj:"\n#include <defines>\nvoid main() {\n   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",wts_frag:"\n#include <defines>\nuniform sampler2D tTexture;\nuniform float tOpacity;\nvarying vec2 vUv;\nvoid main() {\n    vec4 texel = texture2D( tTexture, vUv );\n    gl_FragColor = vec4(texel.rgb, texel.a * tOpacity);\n}\n",wts_frag_addition:"\n#include <defines>\nuniform sampler2D tTexture;\nuniform sampler2D tAdd;\nvarying vec2 vUv;\nvoid main() {\n    vec4 texel = texture2D( tTexture, vUv );\n    vec4 texelAdd = texture2D( tAdd, vUv );\n    float alpha = max(texel.a, texelAdd.a);\n    gl_FragColor = vec4(vec3(texelAdd.a * texelAdd.rgb + (1.0 - texelAdd.a) * texel.rgb), alpha);\n}\n",
wts_frag_color:"\n#include <defines>\nuniform vec3 tColor;\nuniform float tOpacity;\nvarying vec2 vUv;\nvoid main() {\n    vec2 texCoords = vUv;\n    gl_FragColor = vec4(tColor, tOpacity);\n}\n",wts_frag_depth_drawing:"\n#include <defines>\nvarying float vDepth;\nvoid main() {\n    gl_FragColor = vec4(vDepth, vDepth, vDepth, 1.0);\n}\n",wts_frag_equirectangular:"\n#include <defines>\nuniform sampler2D tTexture;\nvarying vec3 vWorldPosition;\nvoid main() {\n    vec3 direction = normalize( vWorldPosition );\n    vec2 sampleUV;\n    sampleUV.y = clamp( direction.y * 0.5 + 0.5, 0.0, 1.0 );\n    sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 - 0.25;\n    sampleUV.x += (1.0 - step(0.0, sampleUV.x));\n    gl_FragColor = texture2D( tTexture, sampleUV );\n}\n",
wts_frag_wireframe:"\n#extension GL_OES_standard_derivatives : enable \n#include <defines>\n#define WIRE_THICKNESS 1.50\nuniform vec3 tColor;\nvarying vec2 vUv;\nvarying vec2 vQuadrilateralCoords;\nvoid main() {\n    vec2 dfdx = dFdx(vQuadrilateralCoords);\n    vec2 dfdy = dFdy(vQuadrilateralCoords);\n    vec2 threshold = vec2(WIRE_THICKNESS * sqrt(dfdx * dfdx + dfdy * dfdy));\n    vec2 amount = smoothstep(vec2(0.0), WIRE_THICKNESS * threshold, vec2(1.0) - abs(vQuadrilateralCoords));\n    float alpha = 1.0 - amount.x * amount.y;\n    gl_FragColor = vec4(tColor.rgb, alpha);\n}\n",
wts_vert_gopro:"\n#include <defines>\n#include <vert_attributes>\n#include <uniforms>\nuniform float tProjectionDistance;\nuniform float tProjectionScale;\nuniform float tViewportResolutionRatio;\nvarying vec2 vUv;\nvoid main() {\n    vec4 spherePt = normalize(modelViewMatrix * vec4( position, 1.0 ));\n    float radius = 1.0 - 0.5 * tProjectionDistance;\n    float offset = radius - 1.0;\n    spherePt.xyz *= radius;\n    spherePt.z += offset;\n    gl_Position = projectionMatrix * spherePt;\n    vUv = uv;\n}\n",
wts_vert_gopro_equirectangular:"\n#include <defines>\n#include <vert_attributes>\n#include <uniforms>\nuniform float tProjectionDistance;\nuniform float tProjectionScale;\nuniform float tViewportResolutionRatio;\nvarying vec3 vWorldPosition;\nvoid main() {\n    vec4 camPt = modelViewMatrix * vec4( position, 1.0 );\n    vec4 origin = vec4(vec3(0.0), 1.0);\n    camPt.z -= tProjectionDistance * distance(camPt, origin);\n    camPt.xyz /= max(1.0, tProjectionScale);\n    gl_Position = projectionMatrix * camPt;\n    vWorldPosition = vec3(position);\n}\n",
wts_vert_gopro_wireframe:"\n#include <defines>\n#include <vert_attributes_wireframe>\n#include <uniforms>\nuniform float tProjectionDistance;\nuniform float tProjectionScale;\nuniform float tViewportResolutionRatio;\nvarying vec2 vUv;\nvarying vec2 vQuadrilateralCoords;\nvoid main() {\n    vec4 spherePt = normalize(modelViewMatrix * vec4( position, 1.0 ));\n    float radius = 1.0 - 0.5 * tProjectionDistance;\n    float offset = radius - 1.0;\n    spherePt.xyz *= radius;\n    spherePt.z += offset;\n    gl_Position = projectionMatrix * spherePt;\n    vUv = uv;\n    vQuadrilateralCoords = quadrilateralCoords;\n}\n",
wts_vert_littleplanet:"\n#include <defines>\n#include <vert_attributes>\n#include <uniforms>\nuniform float tProjectionScale;\nuniform float tViewportResolutionRatio;\nvarying vec2 vUv;\nvoid main() {\n    vec4 camPt = modelViewMatrix * vec4( position, 1.0 );\n    camPt.z -= distance(camPt, vec4(vec3(0.0), 1.0));\n    camPt.xyz /= tProjectionScale;\n    gl_Position = projectionMatrix * camPt;\n    vUv = uv;\n}\n",wts_vert_littleplanet_equirectangular:"\n#include <defines>\n#include <vert_attributes>\n#include <uniforms>\nuniform float tProjectionScale;\nuniform float tViewportResolutionRatio;\nvarying vec3 vWorldPosition;\nvoid main() {\n    vec4 camPt = modelViewMatrix * vec4( position, 1.0 );\n    camPt.z -= distance(camPt, vec4(vec3(0.0), 1.0));\n    camPt.xyz /= tProjectionScale;\n    gl_Position = projectionMatrix * camPt;\n    vWorldPosition = vec3(position);\n}\n",
wts_vert_rectilinear:"\n#include <defines>\n#include <vert_attributes>\n#include <uniforms>\nuniform float tViewportResolutionRatio;\nvarying vec2 vUv;\nvoid main() {\n    vec4 camPt = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * camPt;\n    vUv = uv;\n}\n",wts_vert_rectilinear_equirectangular:"\n#include <defines>\n#include <vert_attributes>\n#include <uniforms>\nuniform float tViewportResolutionRatio;\nvarying vec3 vWorldPosition;\nvoid main() {\n    vec4 camPt = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * camPt;\n    vWorldPosition = vec3( position );\n}\n",
wts_vert_rectilinear_wireframe:"\n#include <defines>\n#include <vert_attributes_wireframe>\n#include <uniforms>\nuniform float tViewportResolutionRatio;\nvarying vec2 vUv;\nvarying vec2 vQuadrilateralCoords;\nvoid main() {\n    vec4 camPt = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * camPt;\n    vUv = uv;\n    vQuadrilateralCoords = quadrilateralCoords;\n}\n"},Cb={screenToWorld:{rectilinear:{uniforms:{tOpacity:{type:"f",value:1},tTexture:{type:"t",value:null},tViewportResolution:{type:"v2",
value:new THREE.Vector2},tViewportResolutionRatio:{type:"f",value:1},tModelViewMatrixInverse:{type:"m4",value:new THREE.Matrix4},tProjectionScale:{type:"f",value:1}},vertexShader:Fb.stw_vert_proj,fragmentShader:Fb.stw_frag_proj_rectilinear},flat:{uniforms:{tTexture:{type:"t",value:null},tTextureSize:{type:"v2",value:new THREE.Vector2},tTextureRatio:{type:"f",value:1},tViewportResolution:{type:"v2",value:new THREE.Vector2},tViewportResolutionRatio:{type:"f",value:1},tFov:{type:"f",value:0},tYaw:{type:"f",
value:0},tPitch:{type:"f",value:0},tRepeatX:{type:"i",value:0},tRepeatY:{type:"i",value:0}},vertexShader:Fb.stw_vert_proj,fragmentShader:Fb.stw_frag_proj_flat},gopro:{uniforms:{tOpacity:{type:"f",value:1},tTexture:{type:"t",value:null},tViewportResolution:{type:"v2",value:new THREE.Vector2},tViewportResolutionRatio:{type:"f",value:1},tModelViewMatrixInverse:{type:"m4",value:new THREE.Matrix4},tProjectionDistance:{type:"f",value:0},tProjectionScale:{type:"f",value:1}},vertexShader:Fb.stw_vert_proj,
fragmentShader:Fb.stw_frag_proj_gopro}},worldToScreen:{rectilinear:{mapping:{uniforms:{tOpacity:{type:"f",value:1},tTexture:{type:"t",value:null},tModelViewMatrixInverse:{type:"m4",value:null}},vertexShader:Fb.wts_vert_rectilinear,fragmentShader:Fb.wts_frag},Oe:{uniforms:{tColor:{type:"c",value:null},tProjectionScale:{type:"f",value:1},tModelViewMatrixInverse:{type:"m4",value:null}},vertexShader:Fb.wts_vert_rectilinear_wireframe,fragmentShader:Fb.wts_frag_wireframe},equirectangular:{uniforms:{tOpacity:{type:"f",
value:1},tTexture:{type:"t",value:null},tProjectionScale:{type:"f",value:1},tViewportResolutionRatio:{type:"f",value:1},tModelViewMatrixInverse:{type:"m4",value:null}},vertexShader:Fb.wts_vert_rectilinear_equirectangular,fragmentShader:Fb.wts_frag_equirectangular}},flat:{mapping:{uniforms:{tOpacity:{type:"f",value:1},tTexture:{type:"t",value:null},tModelViewMatrixInverse:{type:"m4",value:null}},vertexShader:Fb.wts_vert_rectilinear,fragmentShader:Fb.wts_frag},Oe:{uniforms:{tColor:{type:"c",value:null},
tProjectionScale:{type:"f",value:1},tModelViewMatrixInverse:{type:"m4",value:null}},vertexShader:Fb.wts_vert_rectilinear_wireframe,fragmentShader:Fb.wts_frag_wireframe}},littlePlanet:{equirectangular:{uniforms:{tOpacity:{type:"f",value:1},tTexture:{type:"t",value:null},tProjectionScale:{type:"f",value:1},tViewportResolutionRatio:{type:"f",value:1},tModelViewMatrixInverse:{type:"m4",value:null}},vertexShader:Fb.wts_vert_littleplanet_equirectangular,fragmentShader:Fb.wts_frag_equirectangular}},gopro:{mapping:{uniforms:{tOpacity:{type:"f",
value:1},tTexture:{type:"t",value:null},tProjectionScale:{type:"f",value:1},tProjectionDistance:{type:"f",value:1},tModelViewMatrixInverse:{type:"m4",value:null}},vertexShader:Fb.wts_vert_gopro,fragmentShader:Fb.wts_frag},Oe:{uniforms:{tColor:{type:"c",value:null},tProjectionScale:{type:"f",value:1},tProjectionDistance:{type:"f",value:1},tModelViewMatrixInverse:{type:"m4",value:null}},vertexShader:Fb.wts_vert_gopro_wireframe,fragmentShader:Fb.wts_frag_wireframe},equirectangular:{uniforms:{tOpacity:{type:"f",
value:1},tTexture:{type:"t",value:null},tProjectionScale:{type:"f",value:1},tProjectionDistance:{type:"f",value:1},tViewportResolutionRatio:{type:"f",value:1},tModelViewMatrixInverse:{type:"m4",value:null}},vertexShader:Fb.wts_vert_gopro_equirectangular,fragmentShader:Fb.wts_frag_equirectangular}}},ib:function(a){return a.replace(/#include +<([\w\d.]+)>/g,function(a,d){a=Fb[d];if("undefined"===typeof a&&(a=THREE.ShaderChunk[d],"undefined"===typeof a))throw Error("Can not resolve #include <"+d+">");
return Cb.ib(a)})}};function Xa(a){this.i=a;this.c=null;this.ja=!1;this.j="";this.f=null;n.call(this,"ViewManager")}Xa.prototype=Object.create(n.prototype);e=Xa.prototype;e.constructor=Xa;function Gb(a,b){if(null===a.c||a.c.type!==b){a.ja=!1;null!==a.c&&(a.c.destroy(),a.c=null);switch(b){case db.tf:a.c=new Hb(a.i);break;case db.Sa:a.c=new Ib(a.i);break;default:a.c=new Jb(a.i)}a.ja=!0;a.sd()}}e.sd=function(){null!==this.f&&this.f.D()};
e.load=function(a){a=B.gb(this.i.mainConfig.view,a);Gb(this,"string"===typeof a.type?a.type.toLowerCase():db.rc)};e.wi=function(){this.j=this.c.type;Gb(this,db.rc)};e.vi=function(){""!==this.j&&(Gb(this,this.j),this.i.camera.roll=0)};e.destroy=function(){this.i=null;this.c.destroy();this.c=null;null!==this.f&&(this.f.destroy(),this.f=null);n.prototype.destroy.call(this)};Object.defineProperty(Xa.prototype,"current",{get:function(){return this.c}});Object.defineProperty(Xa.prototype,"ready",{get:function(){return this.ja}});
Object.defineProperty(Xa.prototype,"type",{get:function(){return null!==this.c?this.c.type:null},set:function(a){Gb(this,a)}});Object.defineProperty(Xa.prototype,"onChange",{get:function(){null===this.f&&(this.f=new q(this));return this.f}});var db={Db:"undefined",Sa:"flat",rc:"rectilinear",tf:"gopro"};function O(a,b,d){this.i=a;this.m=1;this.I=d;this.u=-Infinity;this.f=Infinity;this.o=-Infinity;this.c=Infinity;this.H=0;this.F=Infinity;this.C=this.A=null;n.call(this,b||"ViewBase")}O.prototype=Object.create(n.prototype);
e=O.prototype;e.constructor=O;e.Bb=function(){};e.Nb=function(){throw"Please implement "+this.Va+"::updateUniforms";};e.worldToScreen=function(){throw"Please implement "+this.Va+"::worldToScreen";};e.screenToWorld=function(){throw"Please implement "+this.Va+"::screenToWorld";};e.we=function(){return G.T(this.i.renderer.camera.fov)};e.destroy=function(){this.C=this.A=this.j=this.i=null;n.prototype.destroy.call(this)};Object.defineProperty(O.prototype,"type",{get:function(){return this.I}});
Object.defineProperty(O.prototype,"yawMin",{get:function(){return this.u}});Object.defineProperty(O.prototype,"yawMax",{get:function(){return this.f}});Object.defineProperty(O.prototype,"pitchMin",{get:function(){return this.o}});Object.defineProperty(O.prototype,"pitchMax",{get:function(){return this.c}});Object.defineProperty(O.prototype,"rollMin",{get:function(){return-Infinity}});Object.defineProperty(O.prototype,"rollMax",{get:function(){return Infinity}});
Object.defineProperty(O.prototype,"fovMin",{get:function(){return this.H}});Object.defineProperty(O.prototype,"fovMax",{get:function(){return this.F}});Object.defineProperty(O.prototype,"shaderSTW",{get:function(){return this.A}});Object.defineProperty(O.prototype,"shaderWTS",{get:function(){return this.C}});function Ib(a){O.call(this,a,"ViewFlat",db.Sa);this.G=this.B=!1;this.Bb()}Ib.prototype=Object.create(O.prototype);e=Ib.prototype;e.constructor=Ib;
e.Bb=function(){O.prototype.Bb.call(this);this.A=B.Pa({},Cb.screenToWorld.flat);this.C=B.Pa({},Cb.worldToScreen.flat);this.u=G.T(-360);this.f=G.T(360);this.o=G.T(-180);this.c=G.T(180);this.H=G.T(20);this.F=G.T(180)};
function Kb(a){var b=G.T(a.i.camera.fov);a.i.renderer.backgroundRenderer instanceof hb?(!1===a.B?(a.f=Math.min(360,Math.max(0,.5*(Math.PI*a.i.renderer.backgroundRenderer.textureSize.ratio-b*a.i.renderer.displayResolution.ratio))),a.u=-a.f):(a.u=G.T(-360),a.f=G.T(360)),!1===a.G?(a.c=.5*Math.max(0,Math.PI-b),a.o=-a.c):(a.o=G.T(-180),a.c=G.T(180)),a.i.view.sd()):(a.f=a.c=G.T(20),a.u=-a.f,a.o=-a.c)}
e.Nb=function(a){Kb(this);"undefined"!==typeof a&&(a.hasOwnProperty("tRepeatX")&&(a.tRepeatX.value=this.B?1:0),a.hasOwnProperty("tRepeatY")&&(a.tRepeatY.value=this.G?1:0),a.hasOwnProperty("tYaw")&&(a.tYaw.value=G.T(this.i.camera.yaw)),a.hasOwnProperty("tPitch")&&(a.tPitch.value=G.T(this.i.camera.pitch)),a.hasOwnProperty("tFov")&&(a.tFov.value=G.T(this.i.renderer.camera.fov)))};e.worldToScreen=function(){return new THREE.Vector2};e.screenToWorld=function(){return new THREE.Vector3};
Object.defineProperty(Ib.prototype,"repeatX",{get:function(){return this.B},set:function(a){this.B=a;Kb(this);this.i.view.sd()}});Object.defineProperty(Ib.prototype,"repeatY",{get:function(){return this.G},set:function(a){this.G=a;Kb(this);this.i.view.sd()}});function Hb(a){this.B=0;O.call(this,a,"ViewGoPro",db.tf);this.Bb()}Hb.prototype=Object.create(O.prototype);Hb.prototype.constructor=Hb;
Hb.prototype.Bb=function(){O.prototype.Bb.call(this);this.A=B.Pa({},Cb.screenToWorld.gopro);this.C=B.Pa({},Cb.worldToScreen.gopro);this.H=G.T(30);this.F=G.T(330)};function Lb(a){var b,d=G.$(a.i.camera.fov,a.i.camera.fovMin,a.i.camera.fovMax);b=90>d?0:180<d?1:.5*(1+Math.sin(Math.PI/2*((d-90)/90*2-1)));a.B=b;d=.5*G.T(d);a.m=(b+1)*Math.sin(d)/(b+Math.cos(d))}
Hb.prototype.Nb=function(a){Lb(this);"undefined"!==typeof a&&(a.hasOwnProperty("tProjectionDistance")&&(a.tProjectionDistance.value=this.B),a.hasOwnProperty("tProjectionScale")&&(a.tProjectionScale.value=this.m))};Hb.prototype.we=function(){Lb(this);var a=.5*G.T(this.i.camera.fov),b=1-this.B/2;return 2*Math.atan2(b*Math.sin(a),Math.abs(b-1)+b*Math.cos(a))};function Jb(a){O.call(this,a,"ViewRectilinear",db.rc);this.Bb()}Jb.prototype=Object.create(O.prototype);e=Jb.prototype;e.constructor=Jb;
e.Bb=function(){O.prototype.Bb.call(this);this.A=B.Pa({},Cb.screenToWorld.rectilinear);this.C=B.Pa({},Cb.worldToScreen.rectilinear);this.o=-G.T(90);this.c=G.T(90);this.H=G.T(40);this.F=G.T(140)};e.Nb=function(a){this.m=Math.tan(G.T(G.$(this.i.camera.fov,this.i.camera.fovMin,this.i.camera.fovMax)/2));"undefined"!==typeof a&&a.hasOwnProperty("tProjectionScale")&&(a.tProjectionScale.value=this.m)};
e.worldToScreen=function(a,b){b=b||0;a=new THREE.Vector4(a.x,a.y,a.z,1);var d=G.ih(this.i.camera.modelView),d=G.ne(d.yaw,d.pitch,d.roll,!0),d=d.transpose();a.applyMatrix4(d);if(0>a.z)return new THREE.Vector2(Infinity,Infinity);d=Math.max(Number.EPSILON,a.z);a=(new THREE.Vector2(a.x,a.y)).divideScalar(d);a.x/=(1+b)*this.m;a.y/=this.m;b=this.i.renderer.displayResolution;a.x=b.width/2*(a.x/b.ratio+1);a.y=b.height/2*(a.y/b.ratio+1);return new THREE.Vector2(Math.round(a.x),b.height-Math.round(a.y))};
e.screenToWorld=function(a){var b=this.i.renderer.displayResolution;a=new THREE.Vector2(2*(a.x/b.width-1)*b.ratio,2*(a.y/b.height-1)*b.ratio);a.multiplyScalar(this.m);a=(new THREE.Vector4(a.x,a.y,-1,0)).applyMatrix4(this.i.camera.modelViewInverse).normalize();return new THREE.Vector3(a.x,a.y,a.z)};function Mb(a){this.c=a||[];n.call(this,"Timeline");B.Ga(this.c,"Keyframe")?this.c=B.ud(this.c,"time"):this.c=[]}Mb.prototype=Object.create(n.prototype);e=Mb.prototype;e.constructor=Mb;
e.Ho=function(){return null!==this.c&&0<this.c.length};e.rb=function(a){B.R(a,"Keyframe")&&(this.c.push(a),this.c=B.ud(this.c,"time"))};e.Co=function(a){a=this.ue(a);return{previous:this.c[a.previous],next:this.c[a.next]||null}};e.ue=function(a){for(var b=-1,d=-1,g=this.c.length-1;0<=g;g--)if(a>=this.c[g].time){b=g;break}b!==this.c.length-1&&(d=b+1);return{previous:b,next:d}};e.Lk=function(a){a=this.Mk(a);return{previous:this.c[a.previous]||null,next:this.c[a.next]||null}};
e.Mk=function(a){a=this.ue(a);var b=0,d=a.next;0<a.previous&&(b=a.previous-1);a.next<this.c.length-2&&(d=a.next+1);return{previous:b,next:d}};e.xo=function(){for(;0<this.c.length;)this.c.pop().data=null;this.c=[]};e.destroy=function(){for(;0<this.c.length;)this.c.pop().data=null;this.c=null;n.prototype.destroy.call(this)};Object.defineProperty(Mb.prototype,"keyframes",{get:function(){return this.c},set:function(a){B.Ga(a,"Keyframe")&&(this.c=B.ud(a,"time"))}});
function Nb(a,b){n.call(this,"Keyframe");this.c=a;this.mb=b}Nb.prototype=Object.create(n.prototype);Nb.prototype.constructor=Nb;Object.defineProperty(Nb.prototype,"time",{get:function(){return this.c},set:function(a){"number"===typeof a&&(this.c=a)}});Object.defineProperty(Nb.prototype,"data",{get:function(){return this.mb},set:function(a){this.mb=a}});
function Ob(a,b){this.i=a;this.ma=b||null;this.H=this.B=this.o=this.Ja=null;this.L=this.G=0;this.P=!1;this.f=null;this.O=0;this.X=!1;this.u=this.C=this.F=this.A=this.S=this.U=null;n.call(this,"Animation");this.Se()}Ob.prototype=Object.create(n.prototype);e=Ob.prototype;e.constructor=Ob;
e.Se=function(){ba(this);this.f=new Pb(this.i,this);this.f.onStart.add(this.Un,this);this.f.onStop.add(this.Vn,this);this.f.onProgress.add(this.ql,this);this.f.onComplete.add(this.Tn,this);this.i.tween.add(this.f);this.o=new Mb};function Qb(a,b){a=a.split(".");for(var d=0,g=a.length;d<g-1;d++)b=b[a[d]];return[b,a[d]]}
function Rb(a,b){b=b||a.G;var d=a.o.ue(b||a.G);a.H=a.o.keyframes[d.next];a.B=a.o.keyframes[d.previous];if(null===a.H||-1===d.next)return!1;if(a.X){var g=a.o.Lk(b);if(null!==g.previous&&null!==g.next){b=(new THREE.Quaternion).copy(a.B.data.quaternion).normalize();var d=(new THREE.Quaternion).copy(a.H.data.quaternion).normalize(),h=(new THREE.Quaternion).copy(g.previous.data.quaternion).normalize(),g=(new THREE.Quaternion).copy(g.next.data.quaternion).normalize();a.U=H.mh(h,b,d);a.S=H.mh(b,d,g)}}a.L=
a.H.time-a.B.time;a.f.jf({tweenTime:1},a.L);a.O=0;a.f.start();return!0}e.Un=function(){!0!==this.P&&(null!==this.A&&this.A.D(),this.P=!0)};e.Vn=function(){this.P=!1;null!==this.F&&this.F.D()};
e.ql=function(){var a=this.O;if(null!==this.H){this.G=a*this.L+this.B.time;var b=[],d,g,h;Array.isArray(this.Ja.prop)||(this.Ja.prop=[this.Ja.prop]);h=this.Ja.prop.length;for(g=0;g<h;g++)b.push(Qb(this.Ja.prop[g],this.ma));if(!0===this.Ja.smooth&&"quaternion"===this.Ja.prop[0])d=b[0],d[0].quaternion=H.kl(this.B.data.quaternion,this.U,this.S,this.H.data.quaternion,a);else if("quaternion"===this.Ja.prop[0])d=b[0],d[0].quaternion=H.slerp(this.B.data.quaternion,this.H.data.quaternion,a);else{var k=this.f.easing(a),
l,u,w=0;for(g=0;g<h;g++){l=Qb(this.Ja.prop[g],this.B.data);u=Qb(this.Ja.prop[g],this.H.data);d=b[g];l=l[0][l[1]];u=u[0][u[1]];if(this.Ja.Za&&this.Ja.Za[g]){var E=this.Ja.Za[g][0],ya=this.Ja.Za[g][1],w=Math.abs(E-ya)/2;Math.abs(l-u)>w?(l=G.Za(l+w,E,ya),u=G.Za(u+w,E,ya)):w=0}d[0][d[1]]=(1-k)*l+k*u-w}}"function"===typeof this.Ja.Ek&&this.Ja.Ek.call(this,a)}null!==this.C&&this.C.D({progress:this.G/this.L})};e.Tn=function(){Rb(this)||null!==this.u&&this.u.D()};e.play=function(a){this.G=a||0;Rb(this,this.G)};
e.stop=function(){this.f.stop()};e.resume=function(){Rb(this)};e.destroy=function(){null!==this.o&&(this.o.destroy(),this.o=null);null!==this.f&&(this.f.destroy(),this.f=null);null!==this.A&&(this.A.destroy(),this.A=null);null!==this.F&&(this.F.destroy(),this.F=null);null!==this.C&&(this.C.destroy(),this.C=null);null!==this.u&&(this.u.destroy(),this.u=null);n.prototype.destroy.call(this)};Object.defineProperty(Ob.prototype,"timeline",{get:function(){return this.o}});
Object.defineProperty(Ob.prototype,"instruction",{get:function(){return this.Ja},set:function(a){this.Ja=a}});Object.defineProperty(Ob.prototype,"tween",{get:function(){return this.f},set:function(a){this.f=a}});Object.defineProperty(Ob.prototype,"tweenTime",{get:function(){return this.O},set:function(a){this.O=a}});Object.defineProperty(Ob.prototype,"smooth",{get:function(){return this.X},set:function(a){this.X=a}});
Object.defineProperty(Ob.prototype,"onPlay",{get:function(){null===this.A&&(this.A=new q(this));return this.A}});Object.defineProperty(Ob.prototype,"onStop",{get:function(){null===this.F&&(this.F=new q(this));return this.F}});Object.defineProperty(Ob.prototype,"onProgress",{get:function(){null===this.C&&(this.C=new q(this));return this.C}});Object.defineProperty(Ob.prototype,"onComplete",{get:function(){null===this.u&&(this.u=new q(this));return this.u}});
function Sb(a,b,d){this.i=a;this.ma=b||null;this.c=null;this.C=0;this.o=this.f=null;n.call(this,d)}Sb.prototype=Object.create(n.prototype);e=Sb.prototype;e.constructor=Sb;e.stop=function(){if(null!==this.c)for(var a=0,b=this.c.length;a<b;a++)this.c[a].stop()};e.resume=function(){if(null!==this.c)for(var a=0,b=this.c.length;a<b;a++)this.c[a].resume()};e.ac=function(){this.C++;this.C===this.c.length&&null!==this.o&&this.o.D()};
function Tb(a,b,d,g,h,k){var l=null,u=null;d=B.ud(d,"time");for(var w=0;w<d.length;w++){var E="string"===typeof k?d[w].data[k][g]:d[w].data[g];if("undefined"!==typeof E&&null!==E&&(d[w].time<b&&(l=d[w]),d[w].time>b)){u=d[w];break}}null===l&&(l={time:0,data:{}},"string"===typeof k?l.data[k]=a.ma[k]:l.data[g]=a.ma[g]);if(null===u)return"string"===typeof k?l.data[k][g]:l.data[g];a=h((b-l.time)/(u.time-l.time));return(1-a)*("string"===typeof k?l.data[k][g]:l.data[g])+a*("string"===typeof k?u.data[k][g]:
u.data[g])}function Ub(a){for(var b;a.c&&0<a.c.length;)b=a.c.pop(),b.onComplete.remove(a.ac,a),b.destroy();a.c=[];a.C=0}e.destroy=function(){Ub(this);for(this.c=null;this.f&&0<this.f.length;)this.f.pop();this.f=null;null!==this.o&&(this.o.destroy(),this.o=null);n.prototype.destroy.call(this)};Object.defineProperty(Sb.prototype,"onComplete",{get:function(){null===this.o&&(this.o=new q(this));return this.o}});function Vb(a){this.c=this.A=this.C=null;this.u=0;this.f=null;this.m=0;n.call(this,a)}
Vb.prototype=Object.create(n.prototype);Vb.prototype.constructor=Vb;Vb.prototype.j=function(a){this.M=a.uid;this.C=a.name;this.A=a.description;this.c=a.keyframes;this.f="linear";this.m=0;"object"===typeof a.easing&&null!==a.easing&&(this.f=a.easing["default"]||this.f,this.m=a.easing.offset||this.m);ba(this)};Vb.prototype.destroy=function(){da(this)};Object.defineProperty(Vb.prototype,"name",{get:function(){return this.C}});Object.defineProperty(Vb.prototype,"description",{get:function(){return this.A}});
Object.defineProperty(Vb.prototype,"keyframes",{get:function(){return this.c}});Object.defineProperty(Vb.prototype,"count",{set:function(a){"number"===typeof a&&(this.u=a)},get:function(){return this.u}});Object.defineProperty(Vb.prototype,"easing",{get:function(){return this.f}});Object.defineProperty(Vb.prototype,"offset",{get:function(){return this.m}});
Object.defineProperty(Vb.prototype,"duration",{get:function(){for(var a=this.c[0].time,b=1,d=this.c.length;b<d;b++)this.c[b].time>a&&(a=this.c[b].time);return a}});function Wb(a,b){this.i=a;this.c=null;this.N="";this.I=this.B=!0;this.m=null;this.ga=!1;this.O=null;this.ja=!1;this.V=this.A=this.C=this.F=null;n.call(this,b||"Object3D");this.cf()}Wb.prototype=Object.create(n.prototype);e=Wb.prototype;e.constructor=Wb;e.cf=function(){this.m={};this.c=new THREE.Mesh;this.O=Xb(this.c);this.i.renderer.objects.register(this)};
e.click=function(){!0===B.R(this.m.onClick,"ActionEventDispatcher")&&this.m.onClick.D();null!==this.F&&this.F.D()};e.Bc=function(){!0===B.R(this.m.onOver,"ActionEventDispatcher")&&this.m.onOver.D();null!==this.C&&this.C.D()};e.nc=function(){!0===B.R(this.m.onOut,"ActionEventDispatcher")&&this.m.onOut.D();null!==this.A&&this.A.D()};
e.destroy=function(){this.i.renderer.objects.unregister(this);null!==this.c&&(this.c.c=null,null!==this.c.geometry&&(this.c.geometry.dispose(),this.c.geometry=null),this.c=this.c.material=null);null!==this.F&&(this.F.destroy(),this.F=null);null!==this.C&&(this.C.destroy(),this.C=null);null!==this.A&&(this.A.destroy(),this.A=null);null!==this.V&&(this.V.destroy(),this.V=null);for(var a in this.m)this.m[a].destroy(),this.m[a]=null;this.i=this.m=null;n.prototype.destroy.call(this)};
Object.defineProperty(Wb.prototype,"mesh",{get:function(){return this.c}});Object.defineProperty(Wb.prototype,"visible",{get:function(){return this.B},set:function(a){this.B=!!a;null!==this.c&&(this.c.visible=this.B)}});Object.defineProperty(Wb.prototype,"hovered",{get:function(){return this.ga},set:function(a){this.ga=!!a}});Object.defineProperty(Wb.prototype,"interactive",{get:function(){return this.I},set:function(a){this.I=!!a}});Object.defineProperty(Wb.prototype,"fx",{get:function(){return this.N}});
Object.defineProperty(Wb.prototype,"events",{get:function(){return this.m}});Object.defineProperty(Wb.prototype,"ready",{get:function(){return this.ja}});Object.defineProperty(Wb.prototype,"onClick",{get:function(){null===this.F&&(this.F=new q(this));return this.F}});Object.defineProperty(Wb.prototype,"onOver",{get:function(){null===this.C&&(this.C=new q(this));return this.C}});Object.defineProperty(Wb.prototype,"onOut",{get:function(){null===this.A&&(this.A=new q(this));return this.A}});
Object.defineProperty(Wb.prototype,"onReady",{get:function(){null===this.V&&(this.V=new q(this));return this.V}});function $a(a){this.i=a;this.c=this.ba=null;n.call(this,"ObjectRenderer");this.ba=[];this.c=[]}$a.prototype=Object.create(n.prototype);e=$a.prototype;e.constructor=$a;function Yb(a,b){var d=[];return d="undefined"===typeof b||""===b||null===b?a.ba.filter(function(a){return"undefined"===typeof a.fx||""===a.fx||null===a.fx}):a.ba.filter(function(a){return a.fx===b})}
function Zb(a){var b=Yb(a,null);return B.wk(a.ba,b)}function $b(a){return Zb(a).reduce(function(a,d){0>a.indexOf(d.fx)&&a.push(d.fx);return a},[])}e.register=function(a){this.ba.push(a)};e.unregister=function(a){this.ba.splice(this.ba.indexOf(a),1)};
e.yk=function(){var a=this.i.renderer.camera.main,b=Yb(this,null);if(0<b.length){for(var d=new THREE.Scene,g=0,h=b.length;g<h;g++)d.add(b[g].mesh);h=new jb(this.i,d,a,null);this.c.push(h)}b=$b(this);d=0;for(g=b.length;d<g;d++){for(var h=b[d],k=Yb(this,h),l=new THREE.Scene,u=0,w=k.length;u<w;u++)l.add(k[u].mesh);h=new jb(this.i,l,a,this.i.postProcessing.te(h));this.c.push(h)}};e.Jk=function(){return this.ba.filter(function(a){return!0===a.ready&&!0===a.interactive})};
e.Gk=function(a){for(var b=0,d=this.ba.length;b<d;b++)if(this.ba[b].mesh===a)return this.ba[b];return null};e.df=function(){for(var a=this.c.length;a--;)this.c.pop().destroy()};e.destroy=function(){this.df();this.i=this.c=null;n.prototype.destroy.call(this)};Object.defineProperty($a.prototype,"all",{get:function(){return this.ba}});Object.defineProperty($a.prototype,"renderScenes",{get:function(){return this.c}});function ac(a){this.i=a;this.c=this.f=null;n.call(this,"Raycaster")}ac.prototype=Object.create(n.prototype);
e=ac.prototype;e.constructor=ac;e.start=function(a){null===this.f&&(this.f=new THREE.Raycaster);a===gb.$a?(!1===this.i.canvas.pointer.onClick.has(this.Qd,this)&&this.i.canvas.pointer.onClick.add(this.Qd,this),!1===this.i.canvas.pointer.onMove.has(this.Rd,this)&&this.i.canvas.pointer.onMove.add(this.Rd,this)):a===gb.Ec&&!1===this.i.renderer.camera.onCameraChange.has(this.Pd,this)&&this.i.renderer.camera.onCameraChange.add(this.Pd,this)};
e.stop=function(){this.i.canvas.pointer.onClick.has(this.Qd,this)&&this.i.canvas.pointer.onClick.remove(this.Qd,this);this.i.canvas.pointer.onMove.has(this.Rd,this)&&this.i.canvas.pointer.onMove.remove(this.Rd,this);this.i.renderer.camera.onCameraChange.has(this.Pd,this)&&this.i.renderer.camera.onCameraChange.remove(this.Pd,this);bc(this);this.f=null};e.Qd=function(a){a.data.center=a.data.center||{x:a.data.clientX,y:a.data.clientY};cc(this,"click",a.data.center)};
e.Rd=function(a){a.data.center=a.data.center||{x:a.data.clientX,y:a.data.clientY};cc(this,"move",a.data.center)};e.Pd=function(){cc(this,"move")};
function cc(a,b,d){if(null===a.c||!1!==a.c.ready){var g=a.i.renderer.canvasResolution;d=d||{x:g.width/2,y:g.height/2};var h=a.i.renderer.camera,k=(new THREE.Vector2(d.x/g.width,1-d.y/g.height)).multiplyScalar(2).addScalar(-1),g=a.i.renderer.objects.Jk();d=0;for(var l=g.length;d<l;d++)g[d].hovered=!1;d=null;a.f.setFromCamera(k,h.main);h=[];k=0;for(l=g.length;k<l;k++)h.push(g[k].mesh);for(g=a.f.intersectObjects(h);null===d&&0<g.length;){var h=g.shift(),k=h.object,u=h.uv,h=a.i.renderer.objects.Gk(k);
if(!1===k.material.transparent)d=h;else{l=h;k=u;u=null;if(null!==l.mesh&&null!==l.mesh.material&&"undefined"!==typeof l.mesh.material.uniforms.tTexture){var w=l.mesh.material.uniforms.tTexture.value,l=null;null!==w&&null!==w.image&&("img"===w.image.nodeName.toLowerCase()?(l=document.createElement("canvas"),l.width=w.image.width,l.height=w.image.height,l.getContext("2d").drawImage(w.image,0,0)):"canvas"===w.image.nodeName.toLowerCase()&&(l=w.image),null!==l&&(u=l.width,w=l.height,k=4*(Math.floor(w-
k.y*w)*u+Math.floor(k.x*u)),l=l.getContext("2d").getImageData(0,0,u,w).data,u=new dc(0,0,0,l[k+3])))}else"undefined"!==typeof l.mesh.material.color&&(u=l.mesh.material.color);k=u;if(null===k||k&&10<k.alpha)d=h}}null!==d?"click"===b?(a.c=d,a.click()):"move"===b&&d!==a.c&&(bc(a),a.c=d,d.Bc(),a.i.renderer.pickingManager.mode===gb.Ec&&a.i.renderer.camera.gaze.start()):bc(a)}}function bc(a){null!==a.c&&(a.c.nc(),a.c=null,a.i.renderer.pickingManager.mode===gb.Ec&&a.i.renderer.camera.gaze.stop())}
e.click=function(){null!==this.c&&this.c.click()};e.bi=function(){this.c=null};Object.defineProperty(ac.prototype,"hoveredObject",{get:function(){return this.c}});
function ec(a){this.i=a;this.c=this.f=this.ma=null;n.call(this,"PickingDrawPass");a=B.clone(this.i.renderer.view.current.shaderWTS.mapping);a.uniforms.tColor={type:"c",value:new THREE.Color(0)};this.f=new THREE.RawShaderMaterial({fragmentShader:Cb.ib(Fb.wts_frag_color),vertexShader:Cb.ib(a.vertexShader),uniforms:a.uniforms,side:THREE.FrontSide,name:"PickingMaterial"});this.ma=new THREE.WebGLRenderTarget(this.i.renderer.canvasResolution.width/3,this.i.renderer.canvasResolution.height/3,{format:THREE.RGBAFormat});
this.ma.name="Picking RenderTarget"}ec.prototype=Object.create(n.prototype);e=ec.prototype;e.constructor=ec;function Xb(a){return new THREE.Color(a.id)}
function fc(a,b){b.data.center=b.data.center||{x:b.data.x,y:b.data.y};var d=new Uint8Array(4);a.i.renderer.webGLRenderer.readRenderTargetPixels(a.ma,b.data.center.x/b.data.target.width*a.ma.width,(1-b.data.center.y/b.data.target.height)*a.ma.height,1,1,d);b=new THREE.Color(d[0],d[1],d[2]);a:{a=a.i.renderer.objects.all;for(var d=0,g=a.length;d<g;d++)if(a[d].mesh.id===((b.r&255)<<16|((b.g&255)<<8)+(b.b&255))){b=a[d];break a}b=null}return b}e.hd=function(a){a=fc(this,a);null!==a&&a.click()};
e.ae=function(a){a=fc(this,a);null===a?null!==this.c&&(this.c.nc(),this.c=null):a!==this.c&&(null!==this.c&&this.c.nc(),a.Bc(),this.c=a)};e.start=function(){this.i.canvas.pointer.enabled=!0;!1===this.i.canvas.pointer.onClick.has(this.hd,this)&&this.i.canvas.pointer.onClick.add(this.hd,this);!1===this.i.canvas.pointer.onMove.has(this.ae,this)&&this.i.canvas.pointer.onMove.add(this.ae,this)};
e.stop=function(){this.i.canvas.pointer.onClick.has(this.hd,this)&&this.i.canvas.pointer.onClick.remove(this.hd,this);this.i.canvas.pointer.onMove.has(this.ae,this)&&this.i.canvas.pointer.onMove.remove(this.ae,this)};e.click=function(){null!==this.c&&this.i.canvas.pointer.onClick.has(this.hd,this)&&this.c.click()};e.setSize=function(a){null!==this.ma&&this.ma.setSize(a.width,a.height)};e.Lh=function(){this.c=null};
e.destroy=function(){null!==this.f&&(this.f.dispose(),this.f=null);null!==this.ma&&(this.ma.dispose(),this.ma=null);this.i=null;n.prototype.destroy.call(this)};Object.defineProperty(ec.prototype,"material",{get:function(){return this.f}});Object.defineProperty(ec.prototype,"renderTarget",{get:function(){return this.ma}});function Ya(a){this.i=a;this.f=this.c=null;this.j=gb.$a;n.call(this,"PickingManager")}Ya.prototype=Object.create(n.prototype);Ya.prototype.constructor=Ya;var gb={$a:"pointer",Ec:"gaze"};
e=Ya.prototype;e.nl=function(a){a===db.rc?null===this.f&&(null!==this.c&&(this.c.stop(),this.c.destroy(),this.c=null),this.f=new ac(this.i),this.f.start(this.j)):null===this.c&&(null!==this.f&&(this.f.stop(),this.f.destroy(),this.f=null),this.c=new ec(this.i),this.c.start())};e.Mh=function(){null!==this.f&&this.f.bi();null!==this.c&&this.c.Lh()};e.setSize=function(a){null!==this.c&&this.c.setSize(a)};e.click=function(){null!==this.f&&this.f.click();null!==this.c&&this.c.click()};
e.start=function(){null!==this.f&&this.f.start(this.j);null!==this.c&&this.c.start()};e.stop=function(){null!==this.f&&this.f.stop();null!==this.c&&this.c.stop()};e.destroy=function(){null!==this.f&&(this.f.stop(),this.f.destroy(),this.f=null);null!==this.c&&(this.c.stop(),this.c.destroy(),this.c=null);n.prototype.destroy.call(this)};Object.defineProperty(Ya.prototype,"renderTarget",{get:function(){return null===this.c?null:this.c.renderTarget}});
Object.defineProperty(Ya.prototype,"material",{get:function(){return null===this.c?null:this.c.material}});Object.defineProperty(Ya.prototype,"mode",{get:function(){return this.j},set:function(a){a!==gb.$a&&a!==gb.Ec||a===this.j||(this.j=a,this.start())}});function ra(a){this.i=a;this.c=[];n.call(this,"HotspotManager")}ra.prototype=Object.create(n.prototype);e=ra.prototype;e.constructor=ra;
e.Cl=function(){var a=this.i.story.scene;a.onUnloadStart.ca(this.bo,this);"undefined"!==typeof a.config.hotspots&&this.ia(a.config.hotspots)};e.bo=function(){this.Ye()};e.boot=function(){this.i.story.onSceneLoadStart.add(this.Cl,this)};e.Dl=function(a){return this.c.filter(function(b){return b.type===a})};e.ia=function(a){for(var b=0,d=a.length;b<d;b++){var g=a[b],h=null;switch(g.type||gc.Rf){case gc.Rf:h=new hc(this.i,g)}null!==h&&this.c.push(h)}};
e.uk=function(a){if(null!==a.tracks&&"undefined"!==typeof a.tracks){a=a.tracks;for(var b=0,d=a.length;b<d;b++)new ic(a[b])}};e.update=function(){for(var a=0,b=this.c.length;a<b;a++)this.c[a].update()};e.Ye=function(){for(var a=this.c.length;a--;)this.c.pop().destroy()};e.destroy=function(){this.Ye();this.c=this.i=null;n.prototype.destroy.call(this)};Object.defineProperty(ra.prototype,"all",{get:function(){return this.c}});Object.defineProperty(ra.prototype,"count",{get:function(){return this.c.length}});
function hc(a,b){this.G=b;this.X="";this.j=this.o=this.H=this.u=this.f=null;this.Z=!1;this.P="pointer";this.L=this.J=null;Wb.call(this,a,"Hotspot3D")}hc.prototype=Object.create(Wb.prototype);e=hc.prototype;e.constructor=hc;
e.cf=function(){Wb.prototype.cf.call(this);this.f=new jc;this.o=new kc(this.i,this.f);this.J=this.Bl.bind(this);this.L=this.sn.bind(this);this.c.visible=!1;this.c.onBeforeRender=this.J;this.c.onAfterRender=this.L;this.i.renderer.view.onChange.add(this.Hh,this);if("undefined"!==typeof this.G&&null!==this.G){var a=this.G;this.M=a.uid;this.vb=a.tags;ba(this);this.c.name="mesh-"+this.M;this.c.c=a;this.X="string"===typeof a.name?a.name:"";this.B="boolean"===typeof a.visible?a.visible:!0;this.Z="boolean"===
typeof a.facingCenter?a.facingCenter:!1;this.I="boolean"===typeof a.interactive?a.interactive:!0;this.P="string"===typeof a.cursor?a.cursor:"pointer";this.u=new lc(this.i,this.M);this.j=new oc(this.i,this.M);"object"===typeof a.states&&null!==a.states&&this.j.ia(a.states);"object"===typeof a.transform&&null!==a.transform&&this.f.load(a.transform);"object"===typeof a.animation&&null!==a.animation&&(this.o.load(a.animation),this.o.onProgress.add(this.jk,this));var b=a.geometry;if("undefined"!==typeof b&&
"string"===typeof b.type){var d=b.options;switch(b.type){case pc.zi:b=this.c;d=d||{};d=new THREE.BoxBufferGeometry(d.width||20,d.height||20,d.depth||20,d.widthSegments||8,d.heightSegments||8,d.depthSegments||8);b.geometry=d;break;case pc.Mi:b=this.c;d=d||{};d=new THREE.SphereBufferGeometry(d.radius||10,d.widthSegments||64,d.heightSegments||64,d.phiStart||0,d.phiLength||2*Math.PI,d.thetaStart||0,d.thetaLength||2*Math.PI);b.geometry=d;break;case pc.Ai:b=this.c;d=d||{};d=new THREE.CylinderBufferGeometry(d.radiusTop||
10,d.radiusBottom||10,d.height||20,d.radiusSegments||32,d.heightSegments||1,d.openEnded||!1,d.thetaStart||0,d.thetaLength||2*Math.PI);b.geometry=d;break;case pc.Ii:this.c.geometry=qc(d);break;case pc.Li:b=this.c;d=d||{};!1===Array.isArray(d.points)&&(d.points=[[-10,10],[10,10],[10,-10],[-10,-10]]);for(var g=[],h=0,k=d.points.length;h<k;h++){var l=d.points[h],u;!0===Array.isArray(l)&&(u="number"===typeof l[0]&&!1===isNaN(l[0])?l[0]:0,l="number"===typeof l[1]&&!1===isNaN(l[1])?l[1]:0,g.push(new THREE.Vector2(u,
l)))}d=new THREE.ShapeBufferGeometry(new THREE.Shape(g));b.geometry=d;break;default:this.c.geometry=qc()}}else this.c.geometry=qc();var w;"object"===typeof a.material&&null!==a.material?w=a.material:w=rc.Pi;!0===this.bd&&B.gb(w,rc.Bi);"object"===typeof a.sound&&null!==a.sound&&(this.H=new tc(this.i),this.H.load(a.sound,a.transform));"string"===typeof a.fx&&""!==a.fx&&(this.N=a.fx);if("object"===typeof a.events&&null!==a.events){var a=a.events,E;for(E in a)w=new Ia(this.i),w.c(a[E]),this.m[E]=w}this.jk();
this.j.onLoadComplete.add(this.ho,this);this.j.load()}};e.Bl=function(a,b,d,g,h){this.i.renderer.view.current.Nb(h.uniforms);"HotspotMaterial"===h.name?this.u.update():"PickingMaterial"===h.name&&h.program&&(a=this.i.renderer.webGLRenderer.getContext(),a.useProgram(h.program.program),h.program.getUniforms().map.tColor.setValue(a,this.O),h.uniforms.tColor.value=this.O)};e.sn=function(){};
e.ho=function(){this.c.material=this.u.material;this.c.visible=this.B;!0===this.o.autoPlay&&"visible"===document[I.visibilityState]&&this.o.play();null!==this.V&&this.V.D()};
e.jk=function(){this.c.position.x=this.f.position.x;this.c.position.y=this.f.position.y;this.c.position.z=this.f.position.z;if(!0===this.Z){var a=(new THREE.Spherical).setFromVector3(new THREE.Vector3(this.f.position.x,this.f.position.y,this.f.position.z));this.c.rotation.set(-a.phi+Math.PI/2,a.theta+Math.PI,0,"YXZ");this.c.rotation.x+=-G.T(this.f.rotation.x);this.c.rotation.y+=G.T(this.f.rotation.y);this.c.rotation.z+=G.T(this.f.rotation.z)}else this.c.rotation.set(-G.T(this.f.rotation.x),G.T(this.f.rotation.y),
G.T(this.f.rotation.z),"YXZ");this.c.scale.x=G.$(this.f.scale.x,1E-6,1E5);this.c.scale.y=G.$(this.f.scale.y,1E-6,1E5);this.c.scale.z=G.$(this.f.scale.z,1E-6,1E5)};e.Hh=function(){this.c.f=this.i.renderer.view.current instanceof Jb;this.u.ol();this.c.material=this.u.material};e.Bc=function(){Wb.prototype.Bc.call(this);!0===this.j.auto&&this.j.load("over");this.i.canvas.pointer.cursor=this.P};e.nc=function(){Wb.prototype.nc.call(this);!0===this.j.auto&&this.j.load();this.i.canvas.pointer.cursor="default"};
e.update=function(){null!==this.H&&this.H.update()};e.destroy=function(){this.i.renderer.view.onChange.remove(this.Hh,this);this.L=this.J=null;null!==this.j&&(this.j.destroy(),this.j=null);null!==this.f&&(this.f.destroy(),this.f=null);null!==this.o&&(this.o.destroy(),this.o=null);null!==this.u&&(this.u.destroy(),this.u=null);null!==this.H&&(this.H.destroy(),this.H=null);Wb.prototype.destroy.call(this)};Object.defineProperty(hc.prototype,"config",{get:function(){return this.G}});
Object.defineProperty(hc.prototype,"name",{get:function(){return this.X}});Object.defineProperty(hc.prototype,"animation",{get:function(){return this.o}});Object.defineProperty(hc.prototype,"material",{get:function(){return this.u}});Object.defineProperty(hc.prototype,"transform",{get:function(){return this.f}});Object.defineProperty(hc.prototype,"ready",{get:function(){return this.ja=!0===this.j.ready}});Object.defineProperty(hc.prototype,"states",{get:function(){return this.j}});
Object.defineProperty(hc.prototype,"state",{get:function(){return this.j.state},set:function(a){this.j.load(a)}});function tc(a){this.i=a;this.c=this.o=this.V=null;this.A=0;this.u=1;this.C=!1;this.F=0;this.H=!1;this.f={x:0,y:0,z:200};this.m=360;n.call(this,"HotspotSound")}tc.prototype=Object.create(n.prototype);e=tc.prototype;e.constructor=tc;e.El=function(){null!==this.V&&this.V.D()};
e.load=function(a,b){if("undefined"!==typeof a.source&&"object"===typeof a.source)if(this.M=a.uid,"undefined"!==typeof a.source.url&&"string"===typeof a.source.url&&""!==a.source.url){this.j=a.source.url;if("undefined"!==typeof a.options&&"object"===typeof a.options){if("number"===typeof a.options.volume)this.u=a.options.volume;else if("object"===typeof a.options.volume){var d=a.options.volume;this.A="number"===typeof d.min?G.$(d.min,0,1):0;this.u="number"===typeof d.max?G.$(d.max,0,1):1}this.C="boolean"===
typeof a.options.loop?a.options.loop:!1;this.F="number"===typeof a.options.startTime?a.options.startTime:0;this.H="boolean"===typeof a.options.autoPlay?a.options.autoPlay:!1;this.m="number"===typeof a.options.range?G.$(a.options.range,1,360):360}"undefined"!==typeof b&&"undefined"!==typeof b.position&&(this.f.theta="number"===typeof b.position.theta?G.$(b.position.theta,-180,180):0,this.f.phi="number"===typeof b.position.phi?G.$(b.position.phi,-90,90):0);this.c=new N(this.i,this.M,this.j||"");this.c.onCanPlayThrough.ca(this.El,
this);!0===360>this.m&&(a=B.Me(1,G.T(-this.f.theta),G.T(this.f.phi)),this.o=(new THREE.Vector3).setFromSpherical(a),this.c.spatialized=360>this.m,this.c.x=this.o.x,this.c.y=this.o.y,this.c.z=this.o.z);this.c.volume=this.u;this.c.loop=this.C;this.c.startTime=this.F;!0===this.H&&("visible"===document[I.visibilityState]?this.c.play(this.F,this.C,!0):this.c.resumed=!0)}else"undefined"!==typeof a.source.target&&!0===p.Xa(a.source.target)&&p.get(a.source.target)};
e.update=function(){if(!1===this.i.audio.enabled)null!==this.c&&this.c.stop();else if(!0===360>this.m&&!0===360>this.m&&"number"===typeof this.m){var a=this.i.renderer.camera,a=H.wc(G.T(a.yaw),G.T(a.pitch),0),b=H.wc(G.T(this.f.theta),G.T(this.f.phi),0),a=H.vk(b,a),b=G.T(this.m/2);this.c.volume=a<b?this.A+(this.u-this.A)*(1-a/b):this.A}};e.destroy=function(){null!==this.c&&(this.c.destroy(),this.c=null);this.f=this.o=null;null!==this.V&&this.V.destroy();n.prototype.destroy.call(this)};
Object.defineProperty(tc.prototype,"sound",{get:function(){return this.c}});Object.defineProperty(tc.prototype,"onReady",{get:function(){null===this.V&&(this.V=new q(this));return this.V}});function lc(a,b){this.i=a;this.F=b;this.A=null;this.j="";this.f=this.c=null;this.m=1;this.C=!1;this.u=16777215;this.K=null;this.ja=this.o=!1;this.V=null;n.call(this,"HotspotMaterial")}lc.prototype=Object.create(n.prototype);lc.prototype.constructor=lc;
var uc={IMAGE:"image",Of:"sprite",VIDEO:"video",Ji:"plugin",uf:"graphics"},rc={Pi:{color:"#ffffff",opacity:0,transparent:!1},Bi:{color:"#00ff00",opacity:.8,transparent:!1}};e=lc.prototype;e.bn=function(a){this.K=a=a.emitter;this.c=new THREE.Texture;this.c.generateMipmaps=!1;this.c.minFilter=THREE.LinearFilter;this.lh(a.frame);vc(this)};e.fo=function(a){a=a.emitter;this.c=new THREE.Texture;this.c.generateMipmaps=!1;this.c.minFilter=THREE.LinearFilter;this.lh(a.frame);vc(this)};
e.ko=function(a){a=a.emitter;a.play();this.c=new THREE.Texture;this.c.generateMipmaps=!1;this.c.minFilter=THREE.LinearFilter;this.c.image=a.element;vc(this)};e.Qj=function(a){a=a.data;a.uid===this.A.plugin&&(this.i.plugins.onInstanceCreate.remove(this.Qj,this),wc(this,a))};function wc(a,b){!0===b.instanceReady?xc(a,b):b.onInstanceReady.ca(a.Zn,a)}e.Zn=function(a){a=a.emitter;if(null===a.instance||!1===a.instanceReady)throw Error("Plugin instance not available");xc(this,a)};
function xc(a,b){a.K=b.instance.texture;a.c=new THREE.Texture(a.K.dom);a.c.format=THREE.RGBAFormat;a.c.minFilter=THREE.LinearFilter;a.c.generateMipmaps=!1;a.c.needsUpdate=!0;vc(a)}function vc(a){yc(a);a.ja=!0;null!==a.V&&a.V.D()}
function yc(a){if(null!==a.i.renderer.view.current){null!==a.f&&(a.f.dispose(),a.f=null);var b=B.clone(a.i.renderer.view.current.shaderWTS.mapping);a.j===uc.uf&&(b.fragmentShader=Fb.wts_frag_color,b.uniforms.tColor={type:"c",value:new THREE.Color(a.u)});b.uniforms.tOpacity={type:"f",value:a.m};var d=Cb.ib(b.vertexShader),g=Cb.ib(b.fragmentShader);a.f=new THREE.RawShaderMaterial({fragmentShader:g,vertexShader:d,uniforms:b.uniforms,side:THREE.DoubleSide,name:"HotspotMaterial"});null!==a.c&&(a.f.transparent=
a.C,a.f.needsUpdate=!0)}}e.ol=function(){yc(this)};
e.load=function(a){this.A=a;this.ja=!1;a=this.A;this.m="number"===typeof a.opacity?G.$(a.opacity,0,1):1;this.C="boolean"===typeof a.transparent?a.transparent:!1;this.u="string"===typeof a.color?a.color:16777215;this.o="boolean"===typeof a.update?a.update:!1;"undefined"!==typeof a.image&&null!==a.image?(a=a.image,this.j=uc.IMAGE,"string"===typeof a&&(a={url:a}),a.renderMode=zc.Rb,this.K=new Ua(this.i,a),this.K.onLoadComplete.ca(this.bn,this)):"undefined"!==typeof a.sprite&&null!==a.sprite?(a=a.sprite,
this.j=uc.Of,this.o=!0,this.K=new Ac(this.i,a),this.K.onLoadComplete.ca(this.fo,this)):"undefined"!==typeof a.video&&null!==a.video?(a=a.video,this.j=uc.VIDEO,this.o=!0,this.K=new K(this.i,this.F+"-material-video"),this.K.currentTime=1E5,this.K.onLoadedMetaData.ca(this.ko,this),this.K.load(a.url)):"undefined"!==typeof a.plugin&&null!==a.plugin?(a=a.plugin,this.j=uc.Ji,a=this.i.plugins.get(a),"undefined"===typeof a||null===a?this.i.plugins.onInstanceCreate.add(this.Qj,this):wc(this,a)):(this.j=uc.uf,
vc(this))};e.update=function(){this.f&&this.f.uniforms&&(this.f.uniforms.tTexture.value=this.c,this.f.uniforms.tOpacity.value=this.m);null!==this.c&&!0===this.o&&(this.c.needsUpdate=!0)};e.lh=function(a){null===this.K||this.j!==uc.IMAGE&&this.j!==uc.Of||(this.K.frame=a||new Qa(0,0,this.K.element.naturalWidth,this.K.element.naturalHeight),this.c.image=this.K.canvas,this.c.image.crossOrigin="anonymous",this.c.needsUpdate=!0,this.update())};
e.destroy=function(){null!==this.c&&(this.c.dispose(),this.c=null);null!==this.f&&(this.f.dispose(),this.f=null);null!==this.K&&(this.K.destroy(),this.K=null);null!==this.V&&(this.V.destroy(),this.V=null);this.i=null;n.prototype.destroy.call(this)};Object.defineProperty(lc.prototype,"type",{get:function(){return this.j}});Object.defineProperty(lc.prototype,"texture",{get:function(){return this.c}});Object.defineProperty(lc.prototype,"material",{get:function(){return this.f}});
Object.defineProperty(lc.prototype,"opacity",{get:function(){return this.m}});Object.defineProperty(lc.prototype,"transparent",{get:function(){return this.C}});Object.defineProperty(lc.prototype,"color",{get:function(){return this.u}});Object.defineProperty(lc.prototype,"displayObject",{get:function(){return this.K}});Object.defineProperty(lc.prototype,"ready",{get:function(){return this.ja}});Object.defineProperty(lc.prototype,"onReady",{get:function(){null===this.V&&(this.V=new q(this));return this.V}});
function qc(a){a=a||{};return new THREE.PlaneBufferGeometry(a.width||20,a.height||20,a.widthSegments||8,a.heightSegments||8)}var pc={Li:"shape",Ii:"plane",zi:"box",Mi:"sphere",Ai:"cylinder"};function jc(a,b,d){this.c=a||{x:0,y:0,z:-200};this.f=b||{x:0,y:0,z:0};this.j=d||{x:1,y:1,z:1};n.call(this,"HotspotTransform")}jc.prototype=Object.create(n.prototype);jc.prototype.constructor=jc;
jc.prototype.load=function(a){if("undefined"!==typeof a.position)if("number"===typeof a.position.x||"number"===typeof a.position.y||"number"===typeof a.position.z)this.c.x="number"===typeof a.position.x?a.position.x:0,this.c.y="number"===typeof a.position.y?a.position.y:0,this.c.z="number"===typeof a.position.z?a.position.z:-200;else{var b="number"===typeof a.position.radius?a.position.radius:200,d="number"===typeof a.position.theta?G.T(a.position.theta):0,g="number"===typeof a.position.phi?G.T(a.position.phi):
0,d=G.Za(Math.PI-d,-Math.PI,Math.PI),b=(new THREE.Vector3).setFromSpherical(B.Me(b,d,g));this.c.x=b.x;this.c.y=b.y;this.c.z=b.z}"undefined"!==typeof a.rotation&&(this.f.x="number"===typeof a.rotation.x?a.rotation.x:0,this.f.y="number"===typeof a.rotation.y?a.rotation.y:0,this.f.z="number"===typeof a.rotation.z?a.rotation.z:0);"undefined"!==typeof a.scale&&(this.j.x="number"===typeof a.scale.x?G.$(a.scale.x,1E-6,1E5):1,this.j.y="number"===typeof a.scale.y?G.$(a.scale.y,1E-6,1E5):1,this.j.z="number"===
typeof a.scale.z?G.$(a.scale.z,1E-6,1E5):1)};Object.defineProperty(jc.prototype,"position",{get:function(){return this.c}});Object.defineProperty(jc.prototype,"rotation",{get:function(){return this.f}});Object.defineProperty(jc.prototype,"scale",{get:function(){return this.j}});
function kc(a,b){this.j=this.A=null;this.F=this.u=this.H=!1;this.m=null;Sb.call(this,a,b,"HotspotAnimation");this.f=[{prop:["rotation.x","rotation.y","rotation.z"],Za:[[-180,180],[-180,180],[-180,180]],smooth:!1},{prop:["position.x","position.y","position.z"],smooth:!1},{prop:["scale.x","scale.y","scale.z"],smooth:!1}]}kc.prototype=Object.create(Sb.prototype);e=kc.prototype;e.constructor=kc;
e.load=function(a){!0===a.enabled&&(this.H="boolean"===typeof a.loop?a.loop:!1,this.u="boolean"===typeof a.random?a.random:!1,this.F="boolean"===typeof a.autoPlay?a.autoPlay:!1,null!==a.tracks&&B.Ga(a.tracks,"string")&&(this.j=!0===this.u?B.td(a.tracks):a.tracks))};e.ac=function(){if(1<this.j.length){var a=this.j.indexOf(this.A)+1;if(a<this.j.length){this.play(a);return}}!0===this.H?(!0===this.u&&(this.j=B.td(this.j)),this.play(0)):Sb.prototype.ac.call(this)};e.Xe=function(){null!==this.m&&this.m.D()};
e.play=function(a){this.A="number"===typeof a?this.j[a]:"string"===typeof a?a:this.j[0];a=p.get(this.A);Ub(this);var b,d=a.offset,g=new Ob(this.i,this.ma);g.tween.easing=a.easing;g.instruction=this.f[0];g.instruction.smooth=a.smooth;g.onComplete.add(this.ac,this);g.onProgress.add(this.Xe,this);for(var h,k,l,u=0,w=a.keyframes.length;u<w;u++)b=a.keyframes[u].time+d,h=a.keyframes[u].data.rotation,"undefined"!==typeof h&&null!==h&&(k="undefined"!==typeof h.x&&null!==h.x?h.x:Tb(this,b,a.keyframes,"x",
g.tween.easing,"rotation"),l="undefined"!==typeof h.y&&null!==h.y?h.y:Tb(this,b,a.keyframes,"y",g.tween.easing,"rotation"),h="undefined"!==typeof h.z&&null!==h.z?h.z:Tb(this,b,a.keyframes,"z",g.tween.easing,"rotation"),b=new Nb(b+d,{rotation:{x:k,y:l,z:h}}),g.timeline.rb(b));if(0<g.timeline.keyframes.length&&0<g.timeline.keyframes[0].time||0<d)u={rotation:B.clone(this.ma.rotation)},b=new Nb(0,u),g.timeline.rb(b);this.c.push(g);g=new Ob(this.i,this.ma);g.tween.easing=a.easing;g.instruction=this.f[1];
g.instruction.smooth=a.smooth;g.onComplete.add(this.ac,this);g.onProgress.add(this.Xe,this);u=0;for(w=a.keyframes.length;u<w;u++)b=a.keyframes[u].time+d,h=a.keyframes[u].data.position,"undefined"!==typeof h&&null!==h&&("number"===typeof h.x||"number"===typeof h.y||"number"===typeof h.z||"number"!==typeof h.radius&&"number"!==typeof h.theta&&"number"!==typeof h.phi?(k="undefined"!==typeof h.x&&null!==h.x?h.x:Tb(this,b,a.keyframes,"x",g.tween.easing,"position"),l="undefined"!==typeof h.y&&null!==h.y?
h.y:Tb(this,b,a.keyframes,"y",g.tween.easing,"position"),h="undefined"!==typeof h.z&&null!==h.z?h.z:Tb(this,b,a.keyframes,"z",g.tween.easing,"position")):(k="number"===typeof h.radius?h.radius:Tb(this,b,a.keyframes,"radius",g.tween.easing,"position"),l="number"===typeof h.theta?G.T(h.theta):G.T(Tb(this,b,a.keyframes,"theta",g.tween.easing,"position")),h="number"===typeof h.phi?G.T(h.phi):G.T(Tb(this,b,a.keyframes,"phi",g.tween.easing,"position")),l=G.Za(Math.PI-l,-Math.PI,Math.PI),h=(new THREE.Vector3).setFromSpherical(B.Me(k,
l,h)),k=h.x,l=h.y,h=h.z),b=new Nb(b+d,{position:{x:k,y:l,z:h}}),g.timeline.rb(b));if(0<g.timeline.keyframes.length&&0<g.timeline.keyframes[0].time||0<d)u={position:B.clone(this.ma.position)},b=new Nb(0,u),g.timeline.rb(b);this.c.push(g);g=new Ob(this.i,this.ma);g.tween.easing=a.easing;g.instruction=this.f[2];g.instruction.smooth=a.smooth;g.onComplete.add(this.ac,this);g.onProgress.add(this.Xe,this);u=0;for(w=a.keyframes.length;u<w;u++)b=a.keyframes[u].time+d,h=a.keyframes[u].data.scale,"undefined"!==
typeof h&&null!==h&&(k="undefined"!==typeof h.x&&null!==h.x?h.x:Tb(this,b,a.keyframes,"x",g.tween.easing,"scale"),l="undefined"!==typeof h.y&&null!==h.y?h.y:Tb(this,b,a.keyframes,"y",g.tween.easing,"scale"),h="undefined"!==typeof h.z&&null!==h.z?h.z:Tb(this,b,a.keyframes,"z",g.tween.easing,"scale"),b=new Nb(b+d,{scale:{x:k,y:l,z:h}}),g.timeline.rb(b));if(0<g.timeline.keyframes.length&&0<g.timeline.keyframes[0].time||0<d)u={scale:B.clone(this.ma.scale)},b=new Nb(0,u),g.timeline.rb(b);this.c.push(g);
this.c[0].play();this.c[1].play();this.c[2].play()};e.destroy=function(){this.j=null;null!==this.m&&(this.m.destroy(),this.m=null);Sb.prototype.destroy.call(this)};Object.defineProperty(kc.prototype,"autoPlay",{get:function(){return this.F}});Object.defineProperty(kc.prototype,"onProgress",{get:function(){null===this.m&&(this.m=new q(this));return this.m}});function ic(a){Vb.call(this,"HotspotAnimationTrack");this.j(a)}ic.prototype=Object.create(Vb.prototype);ic.prototype.constructor=ic;
function oc(a,b){this.i=a;this.m=b;this.c=null;this.o="";this.j="default";this.u=!0;this.ja=!1;this.f=null;n.call(this,"HotspotStates");a=p.get(this.m);if("undefined"===typeof a)throw"No hotspot match with uid: "+this.m;this.c={options:{},default:a.config}}oc.prototype=Object.create(n.prototype);oc.prototype.constructor=oc;var Bc=["options"];
function Cc(a){if(null===a.c)return[];for(var b=Object.keys(a.c),d=0,g=Bc.length;d<g;d++){var h=b.indexOf(Bc[d]);-1!==h&&b.splice(h,1)}"default"!==a.j&&"undefined"!==typeof a.c[a.j]&&(h=b.indexOf("default"),-1!==h&&b.splice(h,1));return b}e=oc.prototype;e.nn=function(){this.ja=!0;null!==this.f&&this.f.D()};
e.ia=function(a){a=this.c=B.Pa(this.c,a);this.j="string"===typeof a.options["default"]?a.options["default"]:"default";this.u="boolean"===typeof a.options.auto?a.options.auto:!0;this.c["default"]=B.Pa(this.c["default"],a[this.j])};
e.load=function(a){a="string"===typeof a?a:this.j;var b=p.get(this.m);"undefined"!==typeof b&&"object"===typeof this.c[a]&&a!==this.o&&(this.ja=!1,this.o=a,"object"===typeof this.c[a].material&&(a=B.Pa(b.config.material,this.c[a].material),b=p.get(this.m),b.material.onReady.ca(this.nn,this),b.material.load(a)))};e.Fl=function(a){if(null===a||"undefined"===typeof a||2>a.length)a=Cc(this);var b=a.indexOf(this.o),d=0;b<a.length-1&&(d=b+1);this.load(a[d])};
e.destroy=function(){this.i=null;null!==this.f&&(this.f.destroy(),this.f=null);n.prototype.destroy.call(this)};Object.defineProperty(oc.prototype,"state",{get:function(){return this.o},set:function(a){this.load(a)}});Object.defineProperty(oc.prototype,"names",{get:function(){return Cc(this)}});Object.defineProperty(oc.prototype,"ready",{get:function(){return this.ja}});Object.defineProperty(oc.prototype,"auto",{get:function(){return this.u}});
Object.defineProperty(oc.prototype,"onLoadComplete",{get:function(){null===this.f&&(this.f=new q(this));return this.f}});var gc={Rf:"3d"};
function L(a){this.i=a;this.P=null;this.I=this.X=this.Z=this.B=this.W=this.S=this.L=this.N=this.ga=this.F=this.U=this.la=this.J=0;this.j=this.m=this.f=this.c=this.u=this.G=this.C=null;this.O=0;this.o=this.A=this.H=null;n.call(this,"Camera");this.C=new THREE.Matrix4;this.G=new THREE.Matrix4;this.u=new THREE.Quaternion;this.A=new Dc(this.i,Ec.gaze);this.i.renderer.view.onChange.add(this.Wn,this);Fc(this);Gc(this);this.m=this.c.clone();this.m.name="CameraLeft";this.m.layers.enable(1);this.m.add(this.A.object);
this.j=this.c.clone();this.j.name="CameraRight";this.j.layers.enable(2)}L.prototype=Object.create(n.prototype);L.prototype.constructor=L;var Ec={parallax:0,yaw:{min:-Infinity,max:Infinity,default:0},pitch:{min:-Infinity,max:Infinity,default:0},roll:{min:-Infinity,max:Infinity,default:0},fov:{min:0,max:Infinity,default:90},gaze:{delay:2E3,cursor:{innerRadius:.02,outerRadius:.04,color:16777215,opacity:.5},progress:{innerRadius:.02,outerRadius:.04,color:16711680,opacity:.5}}};
function Fc(a){"undefined"!==typeof a.i.renderer&&(a.c=new THREE.PerspectiveCamera(a.B,a.i.renderer.displayResolution.ratio,.01,2E4),a.c.name="CameraMain",a.c.matrixAutoUpdate=!1)}function Gc(a){"undefined"!==typeof a.i.renderer&&(a.f=new THREE.OrthographicCamera(-1E3,1E3,1E3,-1E3,.01,1E4),a.f.name="CameraFlat",a.f.matrixAutoUpdate=!1)}
function Hc(a,b){var d=Math.tan(G.T(a.upDegrees)),g=Math.tan(G.T(a.downDegrees)),h=Math.tan(G.T(a.leftDegrees)),k=Math.tan(G.T(a.rightDegrees));a=2/(h+k);var h=(h-k)*a*.5,k=2/(d+g),d=(d-g)*k*.5,g=new THREE.Matrix4,l=g.elements;l[0]=a;l[1]=0;l[2]=-h;l[3]=0;l[4]=0;l[5]=k;l[6]=d;l[7]=0;l[8]=0;l[9]=0;l[10]=b.far/(b.near-b.far);l[11]=b.far*b.near/(b.near-b.far);l[12]=0;l[13]=0;l[14]=-1;l[15]=0;g.transpose();return g}
function Ic(a){a.C=G.ne(a.J,a.F,a.L,!1);a.G=a.C.clone().transpose();a.u=H.wc(a.J,a.F,a.L)}function Jc(a){a.C=H.ll(a.u);a.G=a.C.clone().transpose();var b=H.Le(a.u);Kc(a,b.yaw,b.pitch,b.roll,null,G.tb)}function Lc(a){null!==a.o&&a.o.D(null,!0)}
function Mc(a,b,d){if("number"!==typeof b||!0===isNaN(b))return!1;d=d===G.Na||d===G.tb?d:G.tb;b=d===G.Na?G.T(b):b;if(null!==a.i.renderer.backgroundRenderer&&null!==a.i.renderer.backgroundRenderer.displayObject&&a.i.renderer.view.type===db.Sa){d=a.i.renderer.backgroundRenderer.displayObject;var g=d.pixelWidth/d.pixelHeight;d.element instanceof HTMLVideoElement&&(g=d.element.videoWidth/d.element.videoHeight);b=G.Za(b,-Math.PI*g,Math.PI*g)}else b=G.Za(b,-Math.PI,Math.PI);d=Nc(a);b=G.$(b,d.min,d.max);
d=a.J!==b;a.J=b;return d}function Nc(a){var b=a.la,d=a.U;a=a.i.renderer.view.current;null!==a&&(b=Math.max(a.yawMin,b),d=Math.min(a.yawMax,d));return{min:b,max:d}}function Oc(a,b,d){if("number"!==typeof b||!0===isNaN(b))return!1;var g=a.F;d=d===G.Na||d===G.tb?d:G.tb;b=d===G.Na?G.T(b):b;b=G.Za(b,-Math.PI,Math.PI);d=Pc(a);b=G.$(b,d.min,d.max);Math.abs(g)>Math.PI/2&&Math.abs(b)===Math.PI/2&&(b=0);g=a.F!==b;a.F=b;return g}
function Pc(a){var b=a.ga,d=a.N;a=a.i.renderer.view.current;null!==a&&(b=Math.max(a.pitchMin,b),d=Math.min(a.pitchMax,d));return{min:b,max:d}}function Qc(a,b,d){if("number"!==typeof b||!0===isNaN(b))return!1;d=d===G.Na||d===G.tb?d:G.tb;b=d===G.Na?G.T(b):b;b=G.Za(b,-Math.PI,Math.PI);d=Rc(a);b=G.$(b,d.min,d.max);d=a.L!==b;a.L=b;return d}function Rc(a){var b=a.S,d=a.W;a=a.i.renderer.view.current;null!==a&&(b=Math.max(a.rollMin,b),d=Math.min(a.rollMax,d));return{min:b,max:d}}
function Sc(a,b,d){if("number"!==typeof b||!0===isNaN(b))return!1;d=d===G.Na||d===G.tb?d:G.tb;b=d===G.Na?G.T(b):b;d=Tc(a);b=G.$(b,d.min,d.max);d=a.B!==b;a.B=b;return d}function Tc(a){var b=a.Z,d=a.X;a=a.i.renderer.view.current;null!==a&&(b=Math.max(a.fovMin,b),d=Math.min(a.fovMax,d));return{min:b,max:d}}function Kc(a,b,d,g,h,k){b=Mc(a,b,k);d=Oc(a,d,k);g=Qc(a,g,k);a=Sc(a,h,k);return!0===b||!0===d||!0===g||!0===a}e=L.prototype;e.Wn=function(){!0===Kc(this,this.J,this.F,this.L,this.B)&&(Ic(this),Lc(this))};
e.load=function(a){a=this.P=B.gb(Ec,a);this.I=a.parallax;this.O=50*this.I;"number"===typeof a.yaw.min&&(this.la=G.T(a.yaw.min));"number"===typeof a.yaw.max&&(this.U=G.T(a.yaw.max));"number"===typeof a.yaw["default"]&&Mc(this,a.yaw["default"],G.Na);"number"===typeof a.pitch.min&&(this.ga=G.T(a.pitch.min));"number"===typeof a.pitch.max&&(this.N=G.T(a.pitch.max));"number"===typeof a.pitch["default"]&&Oc(this,a.pitch["default"],G.Na);"number"===typeof a.roll.min&&(this.S=G.T(a.roll.min));"number"===typeof a.roll.max&&
(this.W=G.T(a.roll.max));"number"===typeof a.roll["default"]&&Qc(this,a.roll["default"],G.Na);"number"===typeof a.fov.min&&(this.Z=G.T(a.fov.min));"number"===typeof a.fov.max&&(this.X=G.T(a.fov.max));"number"===typeof a.fov["default"]&&Sc(this,a.fov["default"],G.Na);Ic(this);Lc(this);this.A.load(a.gaze)};
e.al=function(a,b,d,g,h,k,l){"number"===typeof h&&h?(a=new Uc({easing:{default:l||"LINEAR",start:0},keyframes:[{time:h,data:{yaw:a,pitch:b,roll:d,fov:g}}]}),this.animation.play(a.uid)):(Kc(this,a,b,d,g,G.Na),Ic(this),Lc(this))};
e.update=function(){if(!0===this.i.renderer.display.presentingVR){this.A.update();var a=this.i.renderer.display,b=a.vrFrameData,d=a.Ik();null!==d&&(this.u=d,Jc(this));d=a.vrDisplay.getEyeParameters("left");a=a.vrDisplay.getEyeParameters("right");this.c.matrixWorld.decompose(this.m.position,this.m.quaternion,this.m.scale);this.m.matrixWorld=(new THREE.Matrix4).makeRotationFromQuaternion(this.c.quaternion);this.c.matrixWorld.decompose(this.j.position,this.j.quaternion,this.j.scale);this.j.matrixWorld=
(new THREE.Matrix4).makeRotationFromQuaternion(this.c.quaternion);this.m.matrixWorld.elements[12]=this.c.matrixWorld.elements[12]+d.offset[0];this.m.matrixWorld.elements[13]=this.c.matrixWorld.elements[13]+d.offset[1];this.m.matrixWorld.elements[14]=this.c.matrixWorld.elements[14]+d.offset[2];this.j.matrixWorld.elements[12]=this.c.matrixWorld.elements[12]+a.offset[0];this.j.matrixWorld.elements[13]=this.c.matrixWorld.elements[13]+a.offset[1];this.j.matrixWorld.elements[14]=this.c.matrixWorld.elements[14]+
a.offset[2];null!==b?(this.m.projectionMatrix.elements=b.leftProjectionMatrix,this.j.projectionMatrix.elements=b.rightProjectionMatrix):(this.m.projectionMatrix=Hc({upDegrees:d.fieldOfView.upDegrees,downDegrees:d.fieldOfView.downDegrees,leftDegrees:d.fieldOfView.leftDegrees,rightDegrees:d.fieldOfView.rightDegrees},this.c),this.j.projectionMatrix=Hc({upDegrees:a.fieldOfView.upDegrees,downDegrees:a.fieldOfView.downDegrees,leftDegrees:a.fieldOfView.leftDegrees,rightDegrees:a.fieldOfView.rightDegrees},
this.c));Lc(this);b=0;for(a=this.j.children.length;b<a;b++)this.j.remove(this.j.children[b]);a=0;for(d=this.m.children.length;a<d;a++)b=this.m.children[a].clone(),this.j.add(b)}null!==this.c&&null!==this.i.renderer.view.current&&(b=(new THREE.Matrix4).copy(this.G),this.I&&b.multiply((new THREE.Matrix4).makeTranslation(0,0,-this.O)),this.c.quaternion.setFromRotationMatrix(b),this.c.matrixWorld=b,this.c.matrixWorldInverse.getInverse(b),this.c.fov=G.Ya(this.i.renderer.view.current.we()),this.c.aspect=
this.i.renderer.displayResolution.ratio,this.c.updateProjectionMatrix());null!==this.f&&(b=this.f.right-this.f.left,a=this.f.top-this.f.bottom,this.f.left=this.f.position.x-b/2,this.f.right=this.f.position.x+b/2,this.f.top=this.f.position.y+a/2,this.f.bottom=this.f.position.y-a/2,b=this.i.renderer.view.current,null!==b&&null!==b.fovMax?(b=Math.min(b.fovMax,this.X),this.f.zoom=b/this.B):this.f.zoom=1,this.f.updateProjectionMatrix())};
e.destroy=function(){this.f=this.c=this.u=this.G=this.C=null;this.A.destroy();this.A=null;null!==this.o&&(this.o.destroy(),this.o=null);null!==this.H&&(this.H.destroy(),this.H=null);this.i=null;n.prototype.destroy.call(this)};Object.defineProperty(L.prototype,"config",{get:function(){return this.P},set:function(a){this.load(a)}});Object.defineProperty(L.prototype,"yaw",{get:function(){return G.Ya(this.J)},set:function(a){!0===Mc(this,a,G.Na)&&(Ic(this),Lc(this))}});
Object.defineProperty(L.prototype,"yawMin",{get:function(){return G.Ya(Nc(this).min)}});Object.defineProperty(L.prototype,"yawMax",{get:function(){return G.Ya(Nc(this).max)}});Object.defineProperty(L.prototype,"pitch",{get:function(){return G.Ya(this.F)},set:function(a){Oc(this,a,G.Na)&&(Ic(this),Lc(this))}});Object.defineProperty(L.prototype,"pitchMin",{get:function(){return G.Ya(Pc(this).min)}});Object.defineProperty(L.prototype,"pitchMax",{get:function(){return G.Ya(Pc(this).max)}});
Object.defineProperty(L.prototype,"roll",{get:function(){return G.Ya(this.L)},set:function(a){!0===Qc(this,a,G.Na)&&(Ic(this),Lc(this))}});Object.defineProperty(L.prototype,"rollMin",{get:function(){return G.Ya(Rc(this).min)}});Object.defineProperty(L.prototype,"rollMax",{get:function(){return G.Ya(Rc(this).max)}});Object.defineProperty(L.prototype,"fov",{get:function(){return G.Ya(this.B)},set:function(a){!0===Sc(this,a,G.Na)&&Lc(this)}});Object.defineProperty(L.prototype,"fovMin",{get:function(){return G.Ya(Tc(this).min)}});
Object.defineProperty(L.prototype,"fovMax",{get:function(){return G.Ya(Tc(this).max)}});Object.defineProperty(L.prototype,"quaternion",{get:function(){return this.u},set:function(a){this.u=a;Jc(this);Lc(this)}});Object.defineProperty(L.prototype,"animation",{get:function(){null===this.H&&(this.H=new Vc(this.i,this));return this.H}});Object.defineProperty(L.prototype,"parallax",{get:function(){return this.I},set:function(a){this.I=G.$(a,0,1);this.O=50*this.I;Lc(this)}});
Object.defineProperty(L.prototype,"modelView",{get:function(){return this.C}});Object.defineProperty(L.prototype,"modelViewInverse",{get:function(){return this.G}});Object.defineProperty(L.prototype,"main",{get:function(){null===this.c&&Fc(this);return this.c}});Object.defineProperty(L.prototype,"flat",{get:function(){null===this.f&&Gc(this);return this.f}});Object.defineProperty(L.prototype,"perspectiveCameraRadius",{get:function(){return this.O}});Object.defineProperty(L.prototype,"left",{get:function(){return this.m}});
Object.defineProperty(L.prototype,"right",{get:function(){return this.j}});Object.defineProperty(L.prototype,"gaze",{get:function(){return this.A}});Object.defineProperty(L.prototype,"onCameraChange",{get:function(){null===this.o&&(this.o=new q(this));return this.o}});function Vc(a,b){Sb.call(this,a,b,"CameraAnimation");Wc(this)}Vc.prototype=Object.create(Sb.prototype);Vc.prototype.constructor=Vc;
function Wc(a){ba(a);a.f=[{prop:"quaternion",smooth:!0,Ek:function(){!0===this.Ja.cancelRoll&&(this.ma.quaternion=H.cancelRoll(this.ma.quaternion))},cancelRoll:!0},{prop:"fov",smooth:!1}]}
Vc.prototype.play=function(a,b){"string"===typeof a&&(a=p.get(a));Ub(this);var d=new Ob(this.i,this.ma);d.tween.easing=a.easing;d.instruction=this.f[0];d.instruction.smooth=a.smooth;d.smooth=a.smooth;d.instruction.cancelRoll=a.cancelRoll;d.onComplete.add(this.ac,this);this.c.push(d);var g=new Ob(this.i,this.ma);g.tween.easing=a.easing;g.instruction=this.f[1];g.instruction.smooth=a.smooth;g.onComplete.add(this.ac,this);this.c.push(g);var h=a.keyframes;a=a.offset;var k=d.tween.easing;a=a||0;for(var l,
u,w,E,ya=0,sc=h.length;ya<sc;ya++)u=h[ya].data,l="undefined"!==typeof u.yaw&&null!==u.yaw?u.yaw:Tb(this,h[ya].time+a,h,"yaw",k),w="undefined"!==typeof u.pitch&&null!==u.pitch?u.pitch:Tb(this,h[ya].time+a,h,"pitch",k),E="undefined"!==typeof u.roll&&null!==u.roll?u.roll:Tb(this,h[ya].time+a,h,"roll",k),l=G.T(l),w=G.T(w),E=G.T(E),"undefined"!==typeof l&&null!==l&&"undefined"!==typeof w&&null!==w&&"undefined"!==typeof E&&null!==E&&(l=H.wc(l,w,E),l=new Nb(h[ya].time+a,{quaternion:l}),this.c[0].timeline.rb(l)),
"undefined"!==typeof u.fov&&null!==u.fov&&(u=u.fov,l=new Nb(h[ya].time+a,{fov:u}),this.c[1].timeline.rb(l));if(0<h[0].time||0<a)l=new Nb(0,{quaternion:B.clone(this.ma.quaternion)}),this.c[0].timeline.rb(l),l=new Nb(0,{fov:this.ma.fov}),this.c[1].timeline.rb(l);d.play(b);g.play(b)};
function Dc(a,b){this.i=a;this.f=b;this.c=null;this.A=!1;this.u=this.j=null;this.o=0;n.call(this,"CameraGaze");this.j=this.i.clock.create(!1);this.c=new THREE.Object3D;this.c.name="CameraGaze";this.c.position.z=-2;Xc(this)}Dc.prototype=Object.create(n.prototype);e=Dc.prototype;e.constructor=Dc;function Yc(a,b,d,g,h,k){k=k||2*Math.PI;return new THREE.RingBufferGeometry(a||.02,b||.04,d||32,g||1,h||0,k)}
function Xc(a){var b=new THREE.MeshBasicMaterial({color:a.f.cursor.color,opacity:a.f.cursor.opacity,transparent:!0}),b=new THREE.Mesh(Yc(a.f.cursor.innerRadius,a.f.cursor.outerRadius),b);b.name="cursor";a.c.add(b)}
function Zc(a){var b=new THREE.MeshBasicMaterial({color:a.f.progress.color,opacity:a.f.progress.opacity,transparent:!0,side:THREE.DoubleSide}),b=new THREE.Mesh(Yc(a.f.progress.innerRadius,a.f.progress.outerRadius,32,1,Math.PI/2,a.o/100*G.Qi),b);b.name="progress";b.rotateY(Math.PI);a.c.add(b)}function $c(a,b){for(var d=null,g=0,h=a.c.children.length;g<h;g++)a.c.children[g].name===b&&(d=a.c.children[g]);null!==d&&(a.c.remove(d),d.geometry.dispose(),d.material.dispose())}
e.io=function(){this.stop();this.i.renderer.pickingManager.click()};e.load=function(a){this.f=a;$c(this,"progress");$c(this,"cursor");Xc(this);!0===this.A&&this.o&&Zc(this)};e.start=function(){this.A=!0;this.o=0;$c(this,"progress");Zc(this);null!==this.j&&(this.j.stop(),this.u=this.j.add(2E3,this.io,this),this.j.start())};e.stop=function(){this.A=!1;this.j.stop();this.u=null;this.o=0;var a=this.c.children[1];"undefined"!==typeof a&&null!==a&&(this.c.remove(a),a.geometry.dispose(),a.material.dispose())};
e.update=function(){!0===this.A&&null!==this.u&&(this.o=100*(this.u.delay-this.j.duration)/this.u.delay,$c(this,"progress"),Zc(this))};e.destroy=function(){this.stop();null!==this.c&&("undefined"!==typeof this.c.geometry&&null!==this.c.geometry&&this.c.geometry.dispose(),"undefined"!==typeof this.c.material&&null!==this.c.material&&this.c.material.dispose(),this.c=null);this.m=null};
Object.defineProperty(Dc.prototype,"visible",{get:function(){return this.c.visible},set:function(a){this.c.visible=a}});Object.defineProperty(Dc.prototype,"object",{get:function(){return this.c}});var ad={yi:"base",$a:"pointer",Gd:"keyboard",Fd:"gyroscope"};function pa(a){this.i=a;this.c=[];this.m=!0;this.f=this.j=null;n.call(this,"ControllerManager")}pa.prototype=Object.create(n.prototype);pa.prototype.constructor=pa;
var bd={enabled:!0,instances:[{type:ad.$a,enabled:!0},{type:ad.Gd,enabled:!0},{type:ad.Fd,enabled:!0}]};e=pa.prototype;e.Ee=function(a){null!==this.j&&this.j.D({controller:a})};e.De=function(a){null!==this.f&&this.f.D({controller:a})};e.update=function(){if(null!==this.c)for(var a=0,b=this.c.length;a<b;a++)"function"===typeof this.c[a].update&&this.c[a].update()};
e.ia=function(a){a="undefined"!==typeof a?a:bd;this.m="boolean"===typeof a.enabled?a.enabled:!0;if("undefined"!==typeof a.instances)for(var b,d=0,g=a.instances.length;d<g;d++){b=a.instances[d];switch(b.type){case ad.$a:b=new cd(this.i,b);break;case ad.Gd:b=new dd(this.i,b);break;case ad.Fd:b=new ed(this.i,b);break;default:b=null}null!==b&&this.c.push(b)}};e.ul=function(a){for(var b,d=0,g=this.c.length;d<g;d++)if(b=this.c[d],b.type===a)return b;return null};
e.destroy=function(){for(var a=this.c.length-1;a--;)this.c[a].destroy(),this.c[a]=null;this.c=null;null!==this.j&&(this.j.destroy(),this.j=null);null!==this.f&&(this.f.destroy(),this.f=null);n.prototype.destroy.call(this)};Object.defineProperty(pa.prototype,"all",{get:function(){return this.c}});Object.defineProperty(pa.prototype,"enabled",{get:function(){return this.m},set:function(a){this.m=!!a}});
Object.defineProperty(pa.prototype,"active",{get:function(){for(var a=0,b=this.c.length;a<b;a++)if(!0===this.c[a].active)return!0;return!1}});Object.defineProperty(pa.prototype,"onControlStart",{get:function(){null===this.j&&(this.j=new q(this));return this.j}});Object.defineProperty(pa.prototype,"onControlEnd",{get:function(){null===this.f&&(this.f=new q(this));return this.f}});
function fd(a,b){this.i=a;this.F=ad.yi;this.j=null;this.C=this.c=!1;this.f=this.m=null;n.call(this,b||"ControllerBase");this.mc()}fd.prototype=Object.create(n.prototype);e=fd.prototype;e.constructor=fd;e.mc=function(){this.i.canvas.pointer.enabled=!0;this.j=this.i.renderer.camera};e.enable=function(){!0!==this.c&&(this.c=!0)};e.bb=function(){!1!==this.c&&(this.c=!1)};
e.destroy=function(){this.i=this.j=null;null!==this.m&&(this.m.destroy(),this.m=null);null!==this.f&&(this.f.destroy(),this.f=null);n.prototype.destroy.call(this)};Object.defineProperty(fd.prototype,"enabled",{get:function(){return this.c},set:function(a){!0===!!a?this.enable():this.bb()}});Object.defineProperty(fd.prototype,"type",{get:function(){return this.F}});Object.defineProperty(fd.prototype,"active",{get:function(){return this.C}});
Object.defineProperty(fd.prototype,"onControlStart",{get:function(){null===this.m&&(this.m=new q(this));return this.m}});Object.defineProperty(fd.prototype,"onControlEnd",{get:function(){null===this.f&&(this.f=new q(this));return this.f}});function cd(a,b){this.I=b;this.G=!0;this.H=this.o=this.A=this.u=null;fd.call(this,a,"ControllerPointer")}cd.prototype=Object.create(fd.prototype);cd.prototype.constructor=cd;
var gd={fullscreen:!0,orientation:{hardness:.6,damping:.15,velocityMax:300,invert:{x:!1,y:!1}},zoom:{hardness:5,invert:!1}};e=cd.prototype;
e.mc=function(){fd.prototype.mc.call(this);this.F=ad.$a;this.H=new THREE.Vector2;this.o=new THREE.Vector2;this.u=new THREE.Vector2;this.A=new THREE.Vector2;var a=this.I;this.M=a.uid;ba(this);var b=a.options||{};this.Wa=B.gb(gd.orientation,b.orientation);this.B=B.gb(gd.zoom,b.zoom);this.G="boolean"===typeof b.fullscreen?b.fullscreen:gd.fullscreen;this.c="boolean"===typeof a.enabled?a.enabled:!0;!0===this.c&&this.enable()};
e.sh=function(a){!1!==this.i.controllers.enabled&&(this.i.canvas.pointer.onPanMove.add(this.Te,this),this.C=!0,this.u=new THREE.Vector2(a.data.center.x,a.data.center.y),this.A.copy(this.u),this.o.set(0,0),null!==this.m&&this.m.D(),this.i.controllers.Ee(this))};e.Te=function(a){!1!==this.i.controllers.enabled&&this.A.set(a.data.center.x,a.data.center.y)};
e.rh=function(){this.i.canvas.pointer.onPanMove.remove(this.Te,this);this.C=!1;this.o.set(0,0);this.u.set(0,0);this.A.copy(this.u);null!==this.f&&this.f.D();this.i.controllers.De(this)};e.uh=function(){!1!==this.i.controllers.enabled&&this.i.canvas.pointer.onPinchMove.add(this.th,this)};e.th=function(){};e.Ue=function(){this.i.canvas.pointer.onPinchMove.remove(this.th,this)};
e.vh=function(a){if(!1!==this.i.controllers.enabled){a.data.preventDefault();var b=(this.B.invert?1:-1)/this.B.hardness,d=1;if(a.data.deltaMode)switch(a.data.deltaMode){case 1:d=33.3;break;case 2:d=self.innerHeight;break;default:d=1}a.data.deltaY&&(b*=a.data.deltaY*d/5);this.j.fov=this.j.fov-b}};e.qh=function(){!1!==this.i.controllers.enabled&&!1!==this.G&&(this.i.fullscreen=!this.i.fullscreen)};
e.enable=function(){fd.prototype.enable.call(this);this.i.canvas.pointer.onPanStart.add(this.sh,this);this.i.canvas.pointer.onPanEnd.add(this.rh,this);this.i.canvas.pointer.onPinchStart.add(this.uh,this);this.i.canvas.pointer.onPinchEnd.add(this.Ue,this);this.i.canvas.pointer.onWheel.add(this.vh,this);this.i.canvas.pointer.onDoubleTap.add(this.qh,this)};
e.bb=function(){fd.prototype.bb.call(this);this.i.canvas.pointer.onPanStart.remove(this.sh,this);this.i.canvas.pointer.onPanMove.remove(this.Te,this);this.i.canvas.pointer.onPanEnd.remove(this.rh,this);this.i.canvas.pointer.onPinchStart.remove(this.uh,this);this.i.canvas.pointer.onPinchMove.remove(this.Ue,this);this.i.canvas.pointer.onPinchEnd.remove(this.Ue,this);this.i.canvas.pointer.onWheel.remove(this.vh,this);this.i.canvas.pointer.onDoubleTap.remove(this.qh,this)};
e.update=function(){var a=this.i.renderer.displayResolution,a=1/(this.Wa.hardness*Math.min(a.width,a.height));this.o.subVectors(this.A,this.u);this.o.length()>this.Wa.velocityMax&&this.o.setLength(this.Wa.velocityMax);this.o.multiplyScalar(a);var b=this.Wa.invert,d=!0===b?-1:"object"===typeof b&&!0===b.y?-1:1,g=this.o.x+this.H.x,a=this.o.y+this.H.y;if(g||a)b=(!0===b?-1:"object"===typeof b&&!0===b.x?-1:1)*g,.05<Math.abs(b)&&(this.j.yaw+=b,this.j.flat.position.x+=g),d*=a,.05<Math.abs(d)&&(this.j.pitch-=
d,this.j.flat.position.y-=a),this.H.add(this.o).multiplyScalar(G.$(1-this.Wa.damping,0,1))};function dd(a,b){this.I=b;this.o=this.H=this.A=this.u=this.B=null;fd.call(this,a,"ControllerKeyboard")}dd.prototype=Object.create(fd.prototype);dd.prototype.constructor=dd;var hd={orientation:{hardness:.6,damping:.15,velocityMax:300,invert:!1},zoom:{hardness:5,invert:!1}};e=dd.prototype;
e.mc=function(){fd.prototype.mc.call(this);this.F=ad.Gd;this.o=[];this.H=new THREE.Vector2;this.A=new THREE.Vector2;this.B=new THREE.Vector2;this.u=new THREE.Vector2;var a=this.I;this.M=a.uid;ba(this);var b=a.options||{};this.Wa=B.gb(hd.orientation,b.orientation);this.G=B.gb(hd.zoom,b.zoom);this.c="boolean"===typeof a.enabled?a.enabled:!0;!1!==b["default"]&&(a=new P(this.i,[81,37],this.ee,this.ge,this.fe,[68,39],this,"left"),this.o.push(a),a=new P(this.i,[68,39],this.ee,this.ge,this.fe,[81,37],this,
"right"),this.o.push(a),a=new P(this.i,[90,38],this.ee,this.ge,this.fe,[83,40],this,"up"),this.o.push(a),a=new P(this.i,[83,40],this.ee,this.ge,this.fe,[90,38],this,"down"),this.o.push(a),a=new P(this.i,107,this.pk,this.rk,this.qk,109,this,"plus"),this.o.push(a),a=new P(this.i,109,this.pk,this.rk,this.qk,107,this,"minus"),this.o.push(a));if(!0===Array.isArray(b.bindings))for(var a=0,d=b.bindings.length;a<d;a++){var g=b.bindings[a],h=g.in,k=g.out,l=g.name,g=g.events;!1===B.R(h,"number")&&!1===B.Ga(h,
"number")?this.warn("Can't add custom keyboard binding, keys in are invalid!"):"object"!==typeof g&&null===g?this.warn("Can't add custom keyboard binding, events are invalid!"):(h=new P(this.i,h,g.onDown,g.onUp,g.onHold,k,this,l),this.o.push(h))}!0===this.c&&this.enable()};e.ee=function(a){if(!1!==this.i.controllers.enabled){this.C=!0;switch(a.name){case "left":case "right":this.A.setX(0);break;case "up":case "down":this.A.setY(0)}null!==this.m&&this.m.D();this.i.controllers.Ee(this)}};
e.fe=function(a){if(!1!==this.i.controllers.enabled)switch(a.name){case "left":this.u.setX(this.u.x-5);break;case "right":this.u.setX(this.u.x+5);break;case "up":this.u.setY(this.u.y-5);break;case "down":this.u.setY(this.u.y+5)}};e.ge=function(a){this.C=!1;switch(a.name){case "left":case "right":this.A.setX(0);this.u.setX(0);break;case "up":case "down":this.A.setY(0),this.u.setY(0)}null!==this.f&&this.f.D();this.i.controllers.De(this)};
e.pk=function(a){!1!==this.i.controllers.enabled&&(this.C=!0,id(this,a),null!==this.m&&this.m.D(),this.i.controllers.Ee(this))};e.qk=function(a){id(this,a)};e.rk=function(){this.C=!1;null!==this.f&&this.f.D();this.i.controllers.De(this)};function id(a,b){var d=(a.G.invert?1:-1)/a.G.hardness;switch(b.name){case "minus":d*=10;break;case "plus":d*=-10}a.j.fov=a.j.fov-d}e.enable=function(){fd.prototype.enable.call(this);for(var a,b=0,d=this.o.length;b<d;b++)a=this.o[b],this.i.keyboard.Ug(a)};
e.bb=function(){fd.prototype.bb.call(this);for(var a,b=0,d=this.o.length;b<d;b++)a=this.o[b],this.i.keyboard.He(a)};
e.update=function(){var a=this.i.renderer.displayResolution,a=1/(this.Wa.hardness*Math.min(a.width,a.height));this.A.subVectors(this.u,this.B);this.A.length()>this.Wa.velocityMax&&this.A.setLength(this.Wa.velocityMax);this.A.multiplyScalar(a);var a=this.A.x+this.H.x,b=this.A.y+this.H.y;if(a||b){var d=this.Wa.invert?-1:1;this.j.yaw+=d*a;this.j.pitch-=d*b;this.H.add(this.A).multiplyScalar(G.$(1-this.Wa.damping,0,1))}};
function ed(a,b){this.B=b;this.A=this.H=this.I=this.o=this.u=null;this.Oc=0;this.G=!1;fd.call(this,a,"ControllerGyroscope")}ed.prototype=Object.create(fd.prototype);e=ed.prototype;e.constructor=ed;
e.mc=function(){fd.prototype.mc.call(this);this.F=ad.Fd;this.u=new THREE.Euler;this.o=new THREE.Quaternion;this.I=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));this.H=new THREE.Quaternion;this.A=new THREE.Quaternion;var a=this.B;this.M=a.uid;ba(this);this.c="boolean"===typeof a.enabled?a.enabled:!0;I.onReady.ca(this.Zm,this)};e.Zm=function(){this.i.renderer.display.onDisplayChange.add(this.oh,this);this.i.renderer.view.onChange.add(this.ph,this);!0===this.c&&!0===I.gyroscope&&this.enable()};
e.oh=function(){this.G=!0===this.i.renderer.display.presentingVR?!0:!1};e.ph=function(){this.G=this.i.renderer.view.type!==db.rc?!0:!1};e.dg=function(a){if(!1!==this.i.controllers.enabled){var b={beta:0,alpha:0,gamma:0};"undefined"!==typeof a&&null!==a&&"undefined"!==typeof a.data&&null!==a.data&&(b=a.data);this.u.set(G.T(b.beta),G.T(b.alpha),-G.T(b.gamma),"YXZ");this.o.setFromEuler(this.u);this.o.multiply(this.I);this.o.multiply(this.H);this.A.set(-this.o.y,-this.o.x,-this.o.z,this.o.w)}};
e.Eg=function(){"undefined"!==typeof screen.orientation?this.Oc=G.T(screen.orientation.angle):"undefined"!==typeof window.orientation&&(this.Oc=G.T(window.orientation));this.H.setFromAxisAngle(new THREE.Vector3(0,0,1),-this.Oc)};e.enable=function(){!1!==this.i.controllers.enabled&&!1!==this.B.enabled&&(fd.prototype.enable.call(this),this.i.gyroscope.onDeviceOrientationChange.add(this.dg,this),this.i.gyroscope.onScreenOrientationChange.add(this.Eg,this),this.Eg(),this.dg())};
e.bb=function(){!1!==this.i.controllers.enabled&&!1!==this.B.enabled&&(fd.prototype.bb.call(this),this.i.gyroscope.onDeviceOrientationChange.remove(this.dg,this),this.i.gyroscope.onScreenOrientationChange.remove(this.Eg,this))};e.update=function(){!0===this.c&&!0===I.gyroscope&&!1===this.G&&(this.i.camera.quaternion=this.A)};
e.destroy=function(){this.bb();this.i.renderer.display.onDisplayChange.remove(this.oh,this);this.i.renderer.view.onChange.remove(this.ph,this);this.A=this.H=this.I=this.o=this.u=null;fd.prototype.destroy.call(this)};function v(a){this.i=a;this.J=null;this.j=1;this.N=!1;this.X=this.G=this.Z=1;this.B=!1;this.P=!0;this.c=null;this.L=!1;this.m=!0;this.f=null;this.O="running";this.A=this.u=this.H=this.F=this.C=this.o=this.I=null;n.call(this,"SoundManager")}v.prototype=Object.create(n.prototype);e=v.prototype;
e.constructor=v;
e.boot=function(){this.c=[];if(!0===I.webAudio)try{"function"===typeof window.AudioContext?this.f=new window.AudioContext:this.f=new window.webkitAudioContext}catch(a){this.f=null,this.m=!1}!0===I.audioTag&&null===this.f&&(this.m=!1,this.L=!0);null!==this.f&&(this.o="undefined"===typeof this.f.createGain?this.f.createGainNode():this.f.createGain(),this.I=this.f.createAnalyser(),this.I.connect(this.o),this.o.gain.value=this.j,this.o.connect(this.f.destination),this.f.listener.setOrientation(0,0,-1,
0,1,0));this.i.story.onSceneLoadStart.add(this.ii,this)};e.ii=function(){if("undefined"!==typeof this.i.story.scene.config.audio){var a=B.gb(this.J,this.i.story.scene.config.audio);jd(this,a)}else jd(this,this.J);!1===this.P?null!==this.u&&this.u.D():null!==this.A&&this.A.D()};
function jd(a,b){null!==b&&(a.P="undefined"!==typeof b.enabled?!!b.enabled:!0,a.G="undefined"!==typeof b.volume&&"number"===typeof b.volume.max?G.$(b.volume.max,0,1):1,a.Z=!1===a.N?"undefined"!==typeof b.volume&&"number"===typeof b.volume["default"]?G.$(b.volume["default"],0,a.G):1:G.$(a.j,0,a.G))}e.ia=function(a){this.J=a;jd(this,a);"number"===typeof this.Z&&!1===this.N&&(this.j=G.$(this.Z,0,1));kd(this)};
e.update=function(){for(var a=0,b=this.c.length;a<b;a++)this.c[a].update();if(!0===this.m&&null!==this.i.renderer.camera.main){a=new THREE.Vector3;b=this.i.renderer.camera.main.quaternion;a.set(0,0,1);a.applyQuaternion(b);var d=a.clone();a.set(0,1,0);a.applyQuaternion(b);this.f.listener.setOrientation(d.x,d.y,d.z,a.x,a.y,a.z)}};e.add=function(a){-1===ld(this,a)&&this.c.push(a)};e.remove=function(a){a=ld(this,a);-1<a&&this.c.splice(a,1)};
function ld(a,b){if(null===a.c)return-1;for(var d,g=0,h=a.c.length;g<h;g++)if(d=a.c[g],d===b)return g;return-1}e.suspend=function(){if(null!==this.f&&"undefined"!==typeof this.f.suspend&&!0===this.m&&!1===I.safari&&"running"===this.O){for(var a=!0,b=0,d=this.c.length;b<d;b++)if(!0===this.c[b].playing||!0===this.c[b].paused){a=!1;break}!0===a&&(this.O="suspended",this.f.suspend())}};
e.resume=function(){if(null!==this.f&&"undefined"!==typeof this.f.resume&&!0===this.m&&!1===I.safari&&"suspended"===this.O)for(var a=0,b=this.c.length;a<b;a++)if(!0===this.c[a].playing||!0===this.c[a].paused){this.O="running";this.f.resume();break}};e.fl=function(){for(var a=0,b=this.c.length;a<b;a++)!0===this.c[a].playing&&(this.c[a].pause(),this.c[a].resumed=!0)};e.il=function(){for(var a=0,b=this.c.length;a<b;a++)!0===this.c[a].resumed&&(this.c[a].resume(),this.c[a].resumed=!1)};
e.hb=function(){!0!==this.B&&(this.B=!0,this.X=this.j,this.j=0,!0===this.m&&(this.X=this.o.gain.value),kd(this),null!==this.C&&this.C.D())};e.ji=function(){!1!==this.B&&(this.B=!1,this.j=this.X,kd(this),null!==this.F&&this.F.D())};function kd(a){if(!0===a.m)a.o.gain.value=a.j;else if(!0===a.L)for(var b=0;b<a.c.length;b++)a.c[b].c.data.volume=G.$(a.c[b].C,0,1)*a.j;a.N=!0;null!==a.H&&a.H.D()}
e.destroy=function(){this.i.story.onSceneLoadStart.remove(this.ii,this);this.J=this.i=null;for(var a=this.c.length;a--;)this.c[a].destroy();this.o=this.I=this.f=this.c=null;null!==this.C&&(this.C.destroy(),this.C=null);null!==this.F&&(this.F.destroy(),this.F=null);null!==this.H&&(this.H.destroy(),this.H=null);null!==this.u&&(this.u.destroy(),this.u=null);null!==this.A&&(this.A.destroy(),this.A=null);n.prototype.destroy.call(this)};Object.defineProperty(v.prototype,"context",{get:function(){return this.f}});
Object.defineProperty(v.prototype,"analyser",{get:function(){return this.I}});Object.defineProperty(v.prototype,"inputNode",{get:function(){return this.I}});Object.defineProperty(v.prototype,"masterGain",{get:function(){return this.o}});Object.defineProperty(v.prototype,"useWebAudio",{get:function(){return this.m},set:function(a){"boolean"===typeof a&&(this.m=a,this.L=!a)}});
Object.defineProperty(v.prototype,"useAudioTag",{get:function(){return this.L},set:function(a){"boolean"===typeof a&&(this.L=a,this.m=!a)}});Object.defineProperty(v.prototype,"enabled",{get:function(){return this.P}});Object.defineProperty(v.prototype,"muted",{get:function(){return this.B},set:function(a){"boolean"===typeof a&&(!0===a?this.hb():this.ji())}});
Object.defineProperty(v.prototype,"volume",{get:function(){return!0===this.m?this.o.gain.value:this.j},set:function(a){"number"===typeof a&&(a=G.$(a,0,1),this.j=this.G<a?this.G:a,0<this.j&&(this.B=!1),kd(this))}});Object.defineProperty(v.prototype,"onMute",{get:function(){null===this.C&&(this.C=new q(this));return this.C}});Object.defineProperty(v.prototype,"onUnmute",{get:function(){null===this.F&&(this.F=new q(this));return this.F}});
Object.defineProperty(v.prototype,"onVolumeChange",{get:function(){null===this.H&&(this.H=new q(this));return this.H}});Object.defineProperty(v.prototype,"onDisable",{get:function(){null===this.u&&(this.u=new q(this));return this.u}});Object.defineProperty(v.prototype,"onEnable",{get:function(){null===this.A&&(this.A=new q(this));return this.A}});var Pa={Bm:"stereo",Am:"3d",kf:"ambisonic"};
function N(a,b,d,g){this.i=a;this.na=b;this.j=d;this.ta=this.C=1;this.ka=!1;this.J=!0;this.ha=!1;this.A=this.za=this.G=this.I=this.o=0;this.u=this.O=!1;this.Aa=0;this.Ea=this.B=!1;this.H=this.Ca=this.f=this.m=this.pa=this.c=this.L=null;this.Fa=this.wa=this.Ba=0;this.sa=null;this.ra=g||!1;this.Ha=[0,1,2,3];this.ja=this.fa=!1;this.ya=this.xa=null;this.aa=!1;this.Z=this.U=this.S=this.la=this.F=this.va=this.qa=this.W=this.X=this.P=this.ga=this.N=this.ea=null;n.call(this,"Sound");!0===this.ra&&!1===md(this)&&
(this.ra=!1);this.M=this.na;ba(this);!0===this.i.audio.useWebAudio&&(this.f=this.i.audio.context,this.Ca=this.i.audio.inputNode,this.H="undefined"===typeof this.f.createGain?this.f.createGainNode():this.f.createGain(),this.H.gain.value=this.C*this.i.audio.volume,this.H.connect(this.Ca));if(!0===this.i.audio.useAudioTag||!0===md(this))!0===this.i.cache.has(A.ub,this.na)&&this.li(this.i.cache.get(A.ub,this.na)),this.i.audio.onVolumeChange.add(this.mi,this);this.i.audio.onDisable.add(this.ki,this);""!==
this.j&&(this.i.load.sound(this.na,this.j,this.li,this,md(this)),null!==this.N&&this.N.D());this.i.audio.add(this)}N.prototype=Object.create(n.prototype);e=N.prototype;e.constructor=N;
e.li=function(a){this.L=a;this.ja=!0;null!==this.ga&&this.ga.D();!0===this.i.audio.useWebAudio?(a=this.L)&&!1===this.aa&&(this.xa=this.ej.bind(this),this.ya=this.Wm.bind(this),!0===md(this)?(this.sa=Omnitone.createFOADecoder(this.f,a.data,{channelMap:this.Ha}),this.sa.initialize().then(this.xa,this.ya)):this.f.decodeAudioData(a.data,this.xa,this.ya)):(nd(this),this.ej(null))};e.Wm=function(){null!==this.L&&(this.L.data=null,this.aa=!1)};
function nd(a){null!==a.ea&&a.ea.D();null!==a.P&&a.P.D();null!==a.X&&a.X.D()}e.ej=function(a){if(null!==this.L){a&&(this.L.data=a);this.aa=!0;nd(this);if(!0===this.i.audio.useAudioTag||!0===md(this))this.c=this.i.cache.get(A.ub,this.na),od(this),this.o=0,this.c.data.duration&&(this.o=this.c.data.duration,this.I=Math.ceil(1E3*this.o));!0===this.fa&&this.play(this.A,this.O,!0)}};e.mi=function(){od(this)};
function od(a){null===a.c||!0!==a.i.audio.useAudioTag&&!0!==md(a)||(a.c.data.volume=G.$(a.C,0,1)*a.i.audio.volume)}e.ki=function(){!0===this.u?this.pause():!1===this.paused&&this.stop()};function pd(a){a.A=0;a.fa=!1;a.u=!1;a.B=!1}
function qd(a,b){null===a.m&&(a.m=a.f.createPanner(),a.m.panningModel="HRTF",a.m.distanceModel="inverse",a.m.refDistance=1,a.m.maxDistance=1E4,a.m.rolloffFactor=1,a.m.coneInnerAngle=360,a.m.coneOuterAngle=0,a.m.coneOuterGain=0,a.m.setOrientation(0,0,0),a.m.setPosition(0,0,0));a.m.setPosition(a.Ba,a.wa,a.Fa);!0===b&&(a.c.connect(a.m),a.m.connect(a.H))}function md(a){return!0===a.ra&&!0===a.i.audio.useWebAudio&&"undefined"!==typeof Omnitone}
e.update=function(){if(!0===this.u&&!1===this.B){var a=this.i.clock.time-this.G;if(a>=this.I){if(this.A=this.I,!0===this.i.audio.useWebAudio||!0===this.i.audio.useAudioTag)this.stop(!0),null!==this.Z&&this.Z.D(),!0===this.O&&(this.A=0,this.resume())}else this.A=a}null!==this.sa&&!0===this.u&&this.sa.setRotationMatrixFromCamera(this.i.renderer.camera.modelViewInverse)};
e.play=function(a,b,d){if(!1===this.i.audio.enabled||!1===this.J)this.B=this.u=!1;else{this.O=b||this.O;if(!0===this.u)if(!0===d)this.stop();else return;if(!1===this.ja)this.fa=!0;else{if(!0===this.i.audio.useWebAudio&&!1===md(this))if(!0===this.aa)null===this.pa&&(this.pa=this.L.data),this.c=this.f.createBufferSource(),this.c.buffer=this.pa,!0===this.ha?qd(this,!0):this.c.connect(this.H),this.o=this.c.buffer.duration,this.I=Math.ceil(1E3*this.o),!isNaN(a)&&a<this.I?this.G=this.i.clock.time-a:(a=
0,this.G=this.i.clock.time),b=G.Ie(a/1E3),"undefined"===typeof this.c.start?this.c.noteGrainOn(0,b%this.o,this.o):this.c.start(0,b%this.o,this.o),this.u=!0,this.A=a,this.Aa++,null!==this.F&&this.F.D();else{this.fa=!0;return}else if(!0===this.i.audio.useAudioTag||!0===md(this))this.o?Infinity===this.o&&(this.c.data.loop=!0):(this.o=this.c.data.duration,this.I=Math.ceil(1E3*this.o)),!isNaN(a)&&this.I&&a<this.I?(this.c.data.currentTime=G.Ie(a/1E3),this.G=this.i.clock.time-a):(a=0,this.c.data.currentTime=
a,this.G=this.i.clock.time),this.c.data.play(),this.u=!0,this.A=a,this.Aa++,null!==this.F&&this.F.D();this.i.audio.resume()}}};e.stop=function(a){null!==this.c?(rd(this,!0),this.G=this.za=this.i.clock.time,this.B=this.u=this.fa=!1,null!==this.la&&!0===a&&this.la.D(),this.i.audio.suspend()):!1!==this.ja&&!0===this.aa||pd(this)};
function rd(a,b){if(!0===a.i.audio.useWebAudio&&!1===md(a)){if("undefined"===typeof a.c.stop)a.c.noteOff(0);else try{a.c.stop(0)}catch(d){}a.c.disconnect(0);!0===b&&(a.A=0)}else if(!0===a.i.audio.useAudioTag||!0===md(a))a.c.data.pause(),!0===b&&(a.A=0,a.c.data.currentTime=0)}e.pause=function(){!0===this.u&&null!==this.c?(rd(this,!1),this.B=!0,this.za=this.i.clock.time,this.u=this.fa=!1,null!==this.S&&this.S.D(),this.i.audio.suspend()):!1!==this.ja&&!0===this.aa||pd(this)};
e.resume=function(){if(!1!==this.i.audio.enabled&&!1!==this.J)if(!0===this.B||!1===this.u||!0===this.Ea)if(null===this.c)this.play(this.A,this.O,!0);else{this.G=this.i.clock.time-(this.za-this.G);this.A=this.i.clock.time-this.G;var a=G.Ie(this.A/1E3);if(!0===this.i.audio.useWebAudio&&!1===md(this)){this.c=this.f.createBufferSource();this.c.buffer=this.pa;!0===this.ha?qd(this,!0):this.c.connect(this.H);var b=Math.ceil((this.I-this.A)/1E3);"undefined"===typeof this.c.start?this.c.noteGrainOn(0,a%this.o,
b):this.c.start(0,a%this.o,b)}else if(!0===this.i.audio.useAudioTag||!0===md(this))this.c.data.currentTime=a,this.c.data.play();this.u=!0;this.B=!1;null!==this.U&&this.U.D();this.i.audio.resume()}else if(!1===this.ja||!1===this.aa)pd(this),this.fa=!0};
e.hb=function(){!0!==this.ka&&!1!==this.i.audio.enabled&&!1!==this.J&&(this.ka=!0,this.ta=this.C,this.C=0,!0===this.i.audio.useWebAudio&&!1===md(this)?this.H.gain.value=this.C:!0!==this.i.audio.useAudioTag&&!0!==md(this)||null===this.c||(this.c.data.volume=this.C),null!==this.W&&this.W.D())};
e.ni=function(){!1!==this.ka&&!1!==this.i.audio.enabled&&!1!==this.J&&(this.ka=!1,this.C=this.ta,!0===this.i.audio.useWebAudio&&!1===md(this)?this.H.gain.value=this.ta:!0!==this.i.audio.useAudioTag&&!0!==md(this)||null===this.c||(this.c.data.volume=this.ta),null!==this.qa&&this.qa.D())};
e.destroy=function(){this.stop();!0!==this.i.audio.useAudioTag&&!0!==md(this)||this.i.audio.onVolumeChange.remove(this.mi,this);this.i.audio.onDisable.remove(this.ki,this);this.i.audio.remove(this);this.ya=this.xa=this.m=this.H=this.Ca=this.f=this.pa=this.c=this.L=this.i=null;null!==this.ea&&(this.ea.destroy(),this.ea=null);null!==this.N&&(this.N.destroy(),this.N=null);null!==this.ga&&(this.ga.destroy(),this.ga=null);null!==this.P&&(this.P.destroy(),this.P=null);null!==this.X&&(this.X.destroy(),this.X=
null);null!==this.W&&(this.W.destroy(),this.W=null);null!==this.qa&&(this.qa.destroy(),this.qa=null);null!==this.va&&(this.va.destroy(),this.va=null);null!==this.F&&(this.F.destroy(),this.F=null);null!==this.la&&(this.la.destroy(),this.la=null);null!==this.S&&(this.S.destroy(),this.S=null);null!==this.U&&(this.U.destroy(),this.U=null);null!==this.Z&&(this.Z.destroy(),this.Z=null);n.prototype.destroy.call(this)};
Object.defineProperty(N.prototype,"enabled",{get:function(){return this.J},set:function(a){"boolean"===typeof a&&(this.J=a,!1!==this.J||!0!==this.u&&!0!==this.B||this.stop())}});Object.defineProperty(N.prototype,"currentTime",{get:function(){return this.A},set:function(a){"number"===typeof a&&(this.pause(),this.A=a,!0===this.u&&this.resume())}});Object.defineProperty(N.prototype,"spatialized",{get:function(){return this.ha},set:function(a){"boolean"===typeof a&&(this.ha=a)}});
Object.defineProperty(N.prototype,"ambisonic",{get:function(){return this.ra}});Object.defineProperty(N.prototype,"duration",{get:function(){return this.o}});Object.defineProperty(N.prototype,"muted",{get:function(){return this.ka||this.i.audio.hb},set:function(a){"boolean"===typeof a&&(!0===a?this.hb():this.ni())}});
Object.defineProperty(N.prototype,"volume",{get:function(){return this.C},set:function(a){"number"===typeof a&&!0!==isNaN(a)&&(a=G.$(a,0,1),a!==this.C&&!1!==this.i.audio.enabled&&!1!==this.J&&(this.C=a,0<this.C&&(this.ka=!1),!0===this.i.audio.useWebAudio&&!1===md(this)?this.H.gain.value=a:od(this),null!==this.va&&this.va.D()))}});Object.defineProperty(N.prototype,"decoded",{get:function(){return null===this.L?!1:this.aa}});Object.defineProperty(N.prototype,"playCount",{get:function(){return this.Aa}});
Object.defineProperty(N.prototype,"playing",{get:function(){return this.u}});Object.defineProperty(N.prototype,"ready",{get:function(){return this.ja}});Object.defineProperty(N.prototype,"paused",{get:function(){return this.B}});Object.defineProperty(N.prototype,"resumed",{get:function(){return this.Ea},set:function(a){"boolean"===typeof a&&(this.Ea=a)}});
Object.defineProperty(N.prototype,"loop",{get:function(){return this.O},set:function(a){"boolean"===typeof a&&(this.O=a,!0!==this.i.audio.useAudioTag&&!0!==md(this)||null===this.c||Infinity!==this.o||(this.c.data.loop=this.O))}});Object.defineProperty(N.prototype,"x",{get:function(){return this.Ba},set:function(a){"number"===typeof a&&(this.Ba=a,!0===this.i.audio.useWebAudio&&!1===md(this)&&null!==this.c&&null!==this.m&&!0===this.ha&&qd(this))}});
Object.defineProperty(N.prototype,"y",{get:function(){return this.wa},set:function(a){"number"===typeof a&&(this.wa=a,!0===this.i.audio.useWebAudio&&!1===md(this)&&null!==this.c&&null!==this.m&&!0===this.ha&&qd(this))}});Object.defineProperty(N.prototype,"z",{get:function(){return this.wa},set:function(a){"number"===typeof a&&(this.Fa=a,!0===this.i.audio.useWebAudio&&!1===md(this)&&null!==this.c&&null!==this.m&&!0===this.ha&&qd(this))}});
Object.defineProperty(N.prototype,"onSoundDecode",{get:function(){null===this.ea&&(this.ea=new q(this));return this.ea}});Object.defineProperty(N.prototype,"onLoadStart",{get:function(){null===this.N&&(this.N=new q(this));return this.N}});Object.defineProperty(N.prototype,"onLoadedData",{get:function(){null===this.ga&&(this.ga=new q(this));return this.ga}});Object.defineProperty(N.prototype,"onCanPlay",{get:function(){null===this.P&&(this.P=new q(this));return this.P}});
Object.defineProperty(N.prototype,"onCanPlayThrough",{get:function(){null===this.X&&(this.X=new q(this));return this.X}});Object.defineProperty(N.prototype,"onMute",{get:function(){null===this.W&&(this.W=new q(this));return this.W}});Object.defineProperty(N.prototype,"onUnmute",{get:function(){null===this.qa&&(this.qa=new q(this));return this.qa}});Object.defineProperty(N.prototype,"onVolumeChange",{get:function(){null===this.va&&(this.va=new q(this));return this.va}});
Object.defineProperty(N.prototype,"onPlay",{get:function(){null===this.F&&(this.F=new q(this));return this.F}});Object.defineProperty(N.prototype,"onStop",{get:function(){null===this.la&&(this.la=new q(this));return this.la}});Object.defineProperty(N.prototype,"onPause",{get:function(){null===this.S&&(this.S=new q(this));return this.S}});Object.defineProperty(N.prototype,"onResume",{get:function(){null===this.U&&(this.U=new q(this));return this.U}});
Object.defineProperty(N.prototype,"onEnded",{get:function(){null===this.Z&&(this.Z=new q(this));return this.Z}});
function Q(a,b){this.i=a;this.j=b;this.G=this.c=null;this.f=this.J="";this.I=this.m=1;this.B=this.L=this.H=!0;this.o=this.C=this.u=this.F=this.A=this.V=null;n.call(this,"Playlist");this.M=this.j.uid;ba(this);this.G=new Na(this.i,this.j.name);this.c=[];a=this.j;this.H="undefined"!==typeof a.autoPlay?!!a.autoPlay:!0;this.B="undefined"!==typeof a.loop?!!a.loop:!0;this.m="undefined"!==typeof a.volume&&"number"===typeof a.volume.max?G.$(a.volume.max,0,1):1;this.I="undefined"!==typeof a.volume&&"number"===
typeof a.volume["default"]?G.$(a.volume["default"],0,this.m):G.$(1,0,this.m);a=this.j;"undefined"!==typeof a.tracks&&!0===B.Ga(a.tracks,"string")?this.c=a.tracks:this.warn("A playlist has no track in its configuration, or configuration is not valid!");"string"===typeof a["default"]&&""!==a["default"]?this.J=a["default"]:"number"===typeof a["default"]&&0<=a["default"]&&a["default"]<this.c.length?this.J=this.c[a["default"]].uid:this.warn("A playlist has a default track that is not in its tracks array!");
this.f=this.J;null!==this.V&&this.V.D()}Q.prototype=Object.create(n.prototype);e=Q.prototype;e.constructor=Q;e.ke=function(){0<this.c.length&&this.c.indexOf(this.f)+1===this.c.length&&(!1===this.B||!0===this.track.loop)?this.f=this.c[0]:this.rd()};e.Tl=function(){null!==this.A&&this.A.D()};e.Vl=function(){null!==this.F&&this.F.D()};e.Sl=function(){null!==this.u&&this.u.D()};e.Ul=function(){null!==this.C&&this.C.D()};e.Rl=function(){null!==this.o&&this.o.D()};e.Wl=function(){return!!this.c.length};
e.play=function(a,b){this.L="undefined"!==typeof b?b:!1;var d;if("string"===typeof a&&p.R(a,"PlaylistTrack"))d=a;else if(B.R(a,"PlaylistTrack"))d=a.uid;else if("number"===typeof a&&0<=a&&a<this.c.length)d=this.c[a];else if(""!==this.f)d=this.f;else if("undefined"===typeof a||""===a)d=this.c[0];if("undefined"!==typeof d){this.stop();this.f=d;if(!0===this.L&&!1===this.H)return this.warn("$_Playlist.play(); autoPlay is disabled"),this.track;this.track.play();!1===this.track.onEnded.has(this.ke,this)&&
this.track.onEnded.add(this.ke,this);return this.track}return null};e.stop=function(){null!==this.track&&(this.track.stop(),"undefined"!==typeof this.track.onEnded&&!1===this.track.onEnded.has(this.ke,this)&&this.track.onEnded.remove(this.ke,this))};e.pause=function(){null!==this.track&&this.track.pause()};e.resume=function(){null!==this.track&&this.track.resume()};
e.rd=function(){var a=-1;0<this.c.length&&(a=this.c.indexOf(this.f)+1,a===this.c.length&&(a=0));this.play(a,this.L);!0===this.paused&&this.pause()};e.Ge=function(){var a=-1;0<this.c.length&&(a=this.c.indexOf(this.f)-1,-1===a&&(a=this.c.length-1));this.play(a,this.L);!0===this.paused&&this.pause()};e.destroy=function(){this.stop();this.i=null;this.G.destroy();this.G=null;0<this.c.length&&(this.c.length=0,this.c=null);this.j=null;n.prototype.destroy.call(this)};
Object.defineProperty(Q.prototype,"tracks",{get:function(){return this.c}});Object.defineProperty(Q.prototype,"name",{get:function(){return this.G.value}});Object.defineProperty(Q.prototype,"ready",{get:function(){return null!==this.track?this.track.ready:!1}});Object.defineProperty(Q.prototype,"decoded",{get:function(){return null!==this.track?this.track.decoded:!1}});Object.defineProperty(Q.prototype,"playing",{get:function(){return null!==this.track?this.track.playing:!1}});
Object.defineProperty(Q.prototype,"paused",{get:function(){return null!==this.track?this.track.paused:!1}});Object.defineProperty(Q.prototype,"track",{get:function(){return!0===p.R(this.f,"PlaylistTrack")?p.get(this.f,"PlaylistTrack"):null}});Object.defineProperty(Q.prototype,"loop",{get:function(){return this.B},set:function(a){this.B=!!a}});Object.defineProperty(Q.prototype,"autoPlay",{get:function(){return this.H},set:function(a){this.H=!!a}});
Object.defineProperty(Q.prototype,"volume",{get:function(){return this.I},set:function(a){"number"===typeof a&&(a=G.$(a,0,1),this.I=this.m<a?this.m:a,!0===p.R(this.f,"PlaylistTrack")&&(a=p.get(this.f,"PlaylistTrack"),null!==a&&(a.volume=this.I*this.i.playlists.volume)))}});Object.defineProperty(Q.prototype,"onPlay",{get:function(){null===this.A&&(this.A=new q(this));return this.A}});Object.defineProperty(Q.prototype,"onStop",{get:function(){null===this.F&&(this.F=new q(this));return this.F}});
Object.defineProperty(Q.prototype,"onPause",{get:function(){null===this.u&&(this.u=new q(this));return this.u}});Object.defineProperty(Q.prototype,"onResume",{get:function(){null===this.C&&(this.C=new q(this));return this.C}});Object.defineProperty(Q.prototype,"onEnded",{get:function(){null===this.o&&(this.o=new q(this));return this.o}});Object.defineProperty(Q.prototype,"onReady",{get:function(){null===this.V&&(this.V=new q(this));return this.V}});
function z(a){this.i=a;this.u=this.c=this.I=null;this.f=this.j="";this.L=this.A=1;this.m=!0;this.o=this.J=!1;this.C=this.B=this.F=this.G=this.H=this.V=null;n.call(this,"PlaylistManager")}z.prototype=Object.create(n.prototype);e=z.prototype;e.constructor=z;e.boot=function(){this.c=[];this.u=[];this.i.audio.onEnable.add(this.ij,this);this.i.story.onSceneLoadStart.add(this.Nh,this)};
e.ij=function(){!0===this.m&&0<this.c.length&&!0===this.ready&&!0===this.decoded&&!1===this.o&&(!0===this.paused?this.resume():!1===this.playing&&this.play())};
e.Nh=function(){if("undefined"!==typeof this.i.story.scene.config.playlists){var a=B.gb(this.I,this.i.story.scene.config.playlists);sd(this,a);!1===this.o&&(!1===this.m?td(this):ud(this,this.f)||!0===this.playing&&td(this))}else sd(this,this.I),!1===this.o&&this.f!==this.j&&(!1!==this.m&&!1!==this.ready&&!1!==this.decoded&&!0!==this.playing||td(this),ud(this,this.f))};
function sd(a,b){null!==b&&(a.m="undefined"!==typeof b.enabled?!!b.enabled:!0,"undefined"!==typeof b["default"]&&("string"===typeof b["default"]&&""!==b["default"]?a.f=b["default"]:"number"===typeof b["default"]&&0<=b["default"]&&b["default"]<a.c.length&&(a.f=a.c[b["default"]].uid)),a.A="undefined"!==typeof b.volume&&"number"===typeof b.volume.max?G.$(b.volume.max,0,1):1,a.L="undefined"!==typeof b.volume&&"number"===typeof b.volume["default"]?G.$(b.volume["default"],0,a.A):G.$(1,0,a.A))}
e.ia=function(a){var b;this.I=a;if("undefined"!==typeof a.lists)for(var d=0,g=a.lists.length;d<g;d++)b=new Q(this.i,a.lists[d]),this.add(b);if("undefined"!==typeof a.tracks)for(d=0,g=a.tracks.length;d<g;d++)b=new vd(this.i,a.tracks[d]),this.Oh(b),!0===this.J&&this.warn("Preload is not supported yet.");sd(this,a);"undefined"!==typeof a.lists&&0<a.lists.length&&(""===this.f&&this.warn("The playlist manager has a default playlist that is not in its playlists array!"),this.j=this.f);this.yj()};
e.yj=function(){if("visible"!==document[I.visibilityState])this.i.onResume.ca(this.yj,this);else if(!(0>=this.c.length)){var a;"string"===typeof this.f&&""!==this.f?a=this.f:a=this.c[0].uid;void 0===p.get(a)&&this.warn('PlaylistManager : uid "'+a+'" is not into playlists');!0===p.R(a,"Playlist")?this.play(a,!0):this.warn("Impossible to play the playlist with uid "+a+", it doesn't seem to be a playlist!")}};
function ud(a,b){return null!==b&&!0===p.R(b,"Playlist")?(null!==a.playlist&&a.playlist.uid===b?null!==a.playlist.track&&"undefined"!==typeof a.playlist.track.uid&&""!==a.playlist.track.uid?!0===a.paused?a.resume():!1===a.playing&&a.play(b,!0):(a.stop(),a.play(b,!0)):(a.stop(),a.play(b,!0)),!0):!1}function td(a){!0===a.playing?a.pause():a.stop()}e.Nl=function(){null!==this.H&&this.H.D();null!==this.playlist&&Q.prototype.Tl.call(this.playlist)};
e.Pl=function(){null!==this.G&&this.G.D();null!==this.playlist&&Q.prototype.Vl.call(this.playlist)};e.Ml=function(){null!==this.F&&this.F.D();null!==this.playlist&&Q.prototype.Sl.call(this.playlist)};e.Ol=function(){null!==this.B&&this.B.D();null!==this.playlist&&Q.prototype.Ul.call(this.playlist)};e.Ll=function(){null!==this.C&&this.C.D();null!==this.playlist&&Q.prototype.Rl.call(this.playlist)};e.add=function(a){this.c.push(a)};e.Oh=function(a){this.u.push(a)};e.Io=function(){return!!this.c.length};
e.Ql=function(){return!!this.u.length};e.play=function(a,b){var d;if("string"===typeof a&&p.R(a,"Playlist"))d=a;else if(B.R(a,"Playlist"))d=a.uid;else if("number"===typeof a&&0<=a&&a<this.c.length)d=this.c[a].uid;else if(""!==this.j)d=this.j;else if("undefined"===typeof a||""===a)d=this.c[0].uid;"undefined"!==typeof d&&(!0===this.playing&&this.stop(),this.j=d,!0===this.m&&(this.o=!1,this.playlist.play(null,b)))};e.stop=function(){null!==this.playlist&&this.playlist.stop()};
e.pause=function(){null!==this.playlist&&!0===this.playlist.playing&&(this.o=!0,this.playlist.pause())};e.resume=function(){if(null!==this.playlist&&!0===this.m&&!0===this.playlist.paused){var a=this.o;this.o=!1;!0===a&&this.f!==this.j?ud(this,this.f):this.playlist.resume()}};e.rd=function(){null!==this.playlist&&!0===this.m&&this.playlist.rd()};e.Ge=function(){null!==this.playlist&&!0===this.m&&this.playlist.Ge()};
e.destroy=function(){this.stop();this.i.audio.onEnable.remove(this.ij,this);this.i.story.onSceneLoadStart.remove(this.Nh,this);this.I=this.i=null;for(var a=this.c.length;a--;)this.c[a].destroy();this.c=null;for(a=this.u.length;a--;)this.u[a].destroy();this.u=null;n.prototype.destroy.call(this)};Object.defineProperty(z.prototype,"playlists",{get:function(){return this.c}});Object.defineProperty(z.prototype,"tracks",{get:function(){return this.u}});
Object.defineProperty(z.prototype,"playlist",{get:function(){return!0===p.R(this.j,"Playlist")?p.get(this.j,"Playlist"):null}});Object.defineProperty(z.prototype,"loop",{get:function(){return null!==this.playlist?this.playlist.loop:!0}});Object.defineProperty(z.prototype,"autoPlay",{get:function(){return null!==this.playlist?this.playlist.autoPlay:!0}});Object.defineProperty(z.prototype,"preload",{get:function(){return this.J},set:function(a){this.J=!!a}});
Object.defineProperty(z.prototype,"enabled",{get:function(){return this.m}});Object.defineProperty(z.prototype,"ready",{get:function(){return null!==this.playlist?this.playlist.ready:!1}});Object.defineProperty(z.prototype,"decoded",{get:function(){return null!==this.playlist?this.playlist.decoded:!1}});Object.defineProperty(z.prototype,"playing",{get:function(){return null!==this.playlist?this.playlist.playing:!1}});
Object.defineProperty(z.prototype,"paused",{get:function(){return null!==this.playlist?this.playlist.paused:!1}});Object.defineProperty(z.prototype,"volume",{get:function(){return this.L},set:function(a){if("number"===typeof a&&(a=G.$(a,0,1),this.L=this.A<a?this.A:a,!0===p.R(this.j,"Playlist")&&(a=p.get(this.j,"Playlist"),null!==a))){var b=a.track;null!==b&&(b.volume=a.volume*this.L)}}});Object.defineProperty(z.prototype,"onReady",{get:function(){null===this.V&&(this.V=new q(this));return this.V}});
Object.defineProperty(z.prototype,"onPlay",{get:function(){null===this.H&&(this.H=new q(this));return this.H}});Object.defineProperty(z.prototype,"onStop",{get:function(){null===this.G&&(this.G=new q(this));return this.G}});Object.defineProperty(z.prototype,"onPause",{get:function(){null===this.F&&(this.F=new q(this));return this.F}});Object.defineProperty(z.prototype,"onResume",{get:function(){null===this.B&&(this.B=new q(this));return this.B}});
Object.defineProperty(z.prototype,"onEnded",{get:function(){null===this.C&&(this.C=new q(this));return this.C}});function vd(a,b){this.i=a;this.u=b;this.o=this.m=null;this.j="";this.f=!1;this.c=null;n.call(this,"PlaylistTrack");this.M=this.u.uid;ba(this);a=this.u;da(this);this.M=a.uid;ba(this);this.m=new Na(this.i,a.name);this.o=new Na(this.i,a.author);this.j=a.url;this.f=a.loop||!1}vd.prototype=Object.create(n.prototype);e=vd.prototype;e.constructor=vd;e.Rh=function(){z.prototype.Nl.call(this.i.playlists)};
e.Lj=function(){z.prototype.Pl.call(this.i.playlists)};e.Qh=function(){z.prototype.Ml.call(this.i.playlists)};e.Jj=function(){z.prototype.Ol.call(this.i.playlists)};e.Ph=function(){z.prototype.Ll.call(this.i.playlists)};
e.play=function(){null===this.c&&(this.c=new N(this.i,this.M+"-sound",this.j),this.c.volume=this.i.playlists.volume*this.i.playlists.playlist.volume,!0===this.f&&(this.c.loop=this.f),this.c.onPlay.add(this.Rh,this),this.c.onStop.add(this.Lj,this),this.c.onPause.add(this.Qh,this),this.c.onResume.add(this.Jj,this),this.c.onEnded.add(this.Ph,this));this.c.play()};e.stop=function(){null!==this.c&&this.c.stop(!0)};e.pause=function(){null!==this.c&&this.c.pause()};e.resume=function(){null!==this.c&&this.c.resume()};
e.destroy=function(){this.u=this.i=null;this.m.destroy();this.m=null;this.o.destroy();this.o=null;null!==this.c&&(this.c.onPlay.remove(this.Rh,this),this.c.onStop.remove(this.Lj,this),this.c.onPause.remove(this.Qh,this),this.c.onResume.remove(this.Jj,this),this.c.onEnded.remove(this.Ph,this),this.c.destroy(),this.c=null);n.prototype.destroy.call(this)};Object.defineProperty(vd.prototype,"name",{get:function(){return this.m.value}});Object.defineProperty(vd.prototype,"author",{get:function(){return this.o.value}});
Object.defineProperty(vd.prototype,"currentTime",{get:function(){return null!==this.c?this.c.currentTime:0},set:function(a){null!==this.c&&(this.c.currentTime=a)}});Object.defineProperty(vd.prototype,"volume",{get:function(){return null!==this.c?this.c.volume:!1},set:function(a){if(null===this.c)return!1;this.c.volume=a}});Object.defineProperty(vd.prototype,"ready",{get:function(){return null!==this.c?this.c.ready:!1}});
Object.defineProperty(vd.prototype,"decoded",{get:function(){return null!==this.c?this.c.decoded:!1}});Object.defineProperty(vd.prototype,"playing",{get:function(){return null!==this.c?this.c.playing:!1}});Object.defineProperty(vd.prototype,"paused",{get:function(){return null!==this.c?this.c.paused:!1}});Object.defineProperty(vd.prototype,"loop",{get:function(){return this.f},set:function(a){this.f=!!a}});Object.defineProperty(vd.prototype,"onPlay",{get:function(){if(null!==this.c)return this.c.onPlay}});
Object.defineProperty(vd.prototype,"onStop",{get:function(){if(null!==this.c)return this.c.onStop}});Object.defineProperty(vd.prototype,"onPause",{get:function(){if(null!==this.c)return this.c.onPause}});Object.defineProperty(vd.prototype,"onResume",{get:function(){if(null!==this.c)return this.c.onResume}});Object.defineProperty(vd.prototype,"onEnded",{get:function(){if(null!==this.c)return this.c.onEnded}});
function ta(a){this.i=a;this.j=this.c=null;this.ga=this.Z=this.W=!1;this.J=-1;this.N=this.I=this.m=null;n.call(this,"Director");this.Se()}ta.prototype=Object.create(n.prototype);e=ta.prototype;e.constructor=ta;e.Se=function(){this.m=this.i.clock.create(!1);this.i.story.onSceneLoadComplete.add(this.xh,this);this.i.onReady.add(this.wh,this);this.N=this.vl.bind(this)};e.load=function(a){if(null!==a.tracks&&Array.isArray(a.tracks))for(var b=0,d=a.tracks.length;b<d;b++)new Uc(a.tracks[b])};
e.wh=function(){this.i.controllers.onControlStart.add(this.fd,this);this.i.controllers.onControlEnd.add(this.ed,this)};
e.xh=function(){var a=this.i.story.scene;this.stop();wd(this);this.c=null;this.j=[];"undefined"!==typeof a.config.director&&(a=a.config.director.animation,"undefined"!==typeof a&&null!==a&&!1!==a.enabled&&(this.W="boolean"===typeof a.loop?a.loop:!1,this.Z="boolean"===typeof a.random?a.random:!1,this.ga="boolean"===typeof a.stoppable?a.stoppable:!1,this.J="number"===typeof a.idleTime?a.idleTime:0,null!==a.tracks&&B.Ga(a.tracks,"string")&&(this.j=!0===this.Z?B.td(a.tracks):a.tracks),this.i.camera.animation.onComplete.add(this.Mj,
this),this.i.story.scene.media.type===F.VIDEO&&(this.i.story.scene.media.displayObject.onPause.add(this.he,this),this.i.story.scene.media.displayObject.onWaiting.add(this.qb,this),this.i.story.scene.media.displayObject.onStalled.add(this.qb,this),this.i.story.scene.media.displayObject.onSeeked.add(this.qb,this),this.i.story.scene.media.displayObject.onEnded.add(this.kj,this),this.i.story.scene.media.displayObject.onCurrentTimeChange.add(this.je,this),document.addEventListener(I.visibilityChange,this.N)),
"number"===typeof a.delay&&(this.I=this.m.add(a.delay,this.lg,this),this.m.start())))};e.he=function(){this.stop();this.i.story.scene.media.type===F.VIDEO&&(this.i.story.scene.media.displayObject.onPause.remove(this.he,this),this.i.story.scene.media.displayObject.onPlay.add(this.zg,this));this.i.controllers.onControlStart.remove(this.fd,this);this.i.controllers.onControlEnd.remove(this.ed,this)};
e.zg=function(){null!==this.c&&(this.play(this.c),this.i.story.scene.media.type===F.VIDEO&&this.je());this.i.story.scene.media.type===F.VIDEO&&(this.i.story.scene.media.displayObject.onPause.add(this.he,this),this.i.story.scene.media.displayObject.onPlay.remove(this.zg,this));this.i.controllers.onControlStart.add(this.fd,this);this.i.controllers.onControlEnd.add(this.ed,this)};
e.qb=function(){this.stop();this.i.story.scene.media.type===F.VIDEO&&(this.i.story.scene.media.displayObject.onWaiting.remove(this.qb,this),this.i.story.scene.media.displayObject.onStalled.remove(this.qb,this),this.i.story.scene.media.displayObject.onSeeked.remove(this.qb,this),this.i.story.scene.media.displayObject.onPlaying.add(this.Ag,this));this.i.controllers.onControlStart.remove(this.fd,this);this.i.controllers.onControlEnd.remove(this.ed,this)};
e.Ag=function(){null!==this.c&&(this.play(this.c),this.i.story.scene.media.type===F.VIDEO&&this.je());this.i.story.scene.media.type===F.VIDEO&&(this.i.story.scene.media.displayObject.onPlaying.remove(this.Ag,this),this.i.story.scene.media.displayObject.onWaiting.add(this.qb,this),this.i.story.scene.media.displayObject.onStalled.add(this.qb,this),this.i.story.scene.media.displayObject.onSeeked.add(this.qb,this));this.i.controllers.onControlStart.add(this.fd,this);this.i.controllers.onControlEnd.add(this.ed,
this)};e.kj=function(){this.i.story.scene.media.type===F.VIDEO&&!0===this.i.story.scene.media.displayObject.loop&&this.xh()};e.fd=function(){null!==this.c&&!0===this.ga&&this.stop();this.m.stop(!0)};
e.ed=function(){null!==this.I&&this.m.remove(this.I);null!==this.c&&!0===this.ga&&(null===this.c&&"number"===typeof this.i.story.scene.config.director.animation.delay?(this.I=this.m.add(this.i.story.scene.config.director.animation.delay,this.lg,this),this.m.start()):"number"===typeof this.J&&-1<this.J&&(this.I=this.m.add(this.J,this.lg,this),this.m.start()))};
e.Mj=function(){if(1<this.j.length){var a=this.j.indexOf(this.c)+1;if(a<this.j.length){this.play(a);return}}!0===this.W&&(!0===this.Z&&(this.j=B.td(this.j)),this.play(0))};e.lg=function(){this.play(this.c);this.m.stop(!0)};e.vl=function(){"hidden"!==document[I.visibilityState]&&this.i.story.scene.media.type===F.VIDEO&&this.i.story.scene.media.displayObject.onCurrentTimeChange.D(this.i.story.scene.media.displayObject.currentTime)};
e.je=function(a){this.stop();this.c=null;"number"===typeof a?a*=1E3:"object"===typeof a&&"number"===typeof a.data?a=1E3*a.data:this.i.story.scene.media.type===F.VIDEO?a=this.i.story.scene.media.displayObject.currentTimeMS:a=0;var b=0,d,g;g=p.get(this.j[0]);if(g.duration>a)this.c=g.uid;else for(var h=1,k=this.j.length-1;h<k;h++){d=g;g=p.get(this.j[h]);if(d.duration+b<a&&g.duration+d.duration+b>a){this.c=g.uid;break}b+=d.duration}null===this.c?(a=g.keyframes[g.keyframes.length-1].data,this.i.camera.al(a.yaw,
a.pitch,a.roll,a.fov)):this.i.camera.animation.play(this.c,a)};e.play=function(a){this.stop();this.c=null;this.c="number"===typeof a?this.j[a]:"string"===typeof a?a:this.j[0];this.i.camera.animation.play(this.c)};e.stop=function(){this.i.camera.animation.stop()};
function wd(a){a.i.camera.animation.onComplete.remove(a.Mj,a);a.i.story.scene.media.type===F.VIDEO&&(a.i.story.scene.media.displayObject.onPlay.remove(a.zg,a),a.i.story.scene.media.displayObject.onPause.remove(a.he,a),a.i.story.scene.media.displayObject.onWaiting.remove(a.qb,a),a.i.story.scene.media.displayObject.onStalled.remove(a.qb,a),a.i.story.scene.media.displayObject.onPlaying.remove(a.Ag,a),a.i.story.scene.media.displayObject.onEnded.remove(a.kj,a),a.i.story.scene.media.displayObject.onCurrentTimeChange.remove(a.je,
a),document.removeEventListener(I.visibilityChange,a.N))}e.destroy=function(){wd(this);this.i.onReady.remove(this.wh,this);this.c=this.j=this.i=null;n.prototype.destroy.call(this)};function Uc(a){this.F=this.o=!1;Vb.call(this,"DirectorTrack");this.j(a)}Uc.prototype=Object.create(Vb.prototype);Uc.prototype.constructor=Uc;Uc.prototype.j=function(a){this.o=a.smooth;this.F=a.cancelRoll;Vb.prototype.j.call(this,a)};Object.defineProperty(Uc.prototype,"smooth",{get:function(){return this.o}});
Object.defineProperty(Uc.prototype,"cancelRoll",{get:function(){return this.F}});function Ia(a){this.i=a;this.f=[];this.m=this.j=!1;n.call(this,"ActionEventDispatcher")}Ia.prototype=Object.create(n.prototype);Ia.prototype.constructor=Ia;Ia.prototype.c=function(a){if(!0===B.Ga(a,"string")||B.R(a,"string"))this.f=this.f.concat(a)};
Ia.prototype.D=function(){this.j=!0;for(var a=0,b=this.f.length;a<b;a++){var d=this.i.actions.get(this.f[a]);"undefined"!==typeof d&&null!==d&&d.Gb()}this.j=!1;!0===this.m&&this.destroy()};Ia.prototype.destroy=function(){!0===this.j?this.m=!0:(this.i=null,n.prototype.destroy.call(this))};
function xd(a,b){this.i=a;this.j=b;this.ma="";this.c=this.f=null;n.call(this,"Action");a=this.j;this.M=a.uid;this.ma=a.target;this.f="undefined"!==typeof a.method?a.method:null;this.c="undefined"!==typeof a.property?a.property:null;ba(this)}xd.prototype=Object.create(n.prototype);xd.prototype.constructor=xd;var yd={Nf:"set",xi:"add",Ni:"substract",Hi:"multiply",Di:"divide",Oi:"toggle"};
function zd(a,b){var d=null;if("undefined"===typeof b)d=window;else{var g=b,h=b;"object"===typeof b&&("string"===typeof b.identifier&&(g=b.identifier),"string"===typeof b.accessor&&(h=b.accessor));b=p.get(g);"undefined"!==typeof b&&null!==b&&(B.R(b,"Plugin")?d=b.instance:d=b);h=h.split(".");b=0;"viewer"===h[0].toLowerCase()&&null===d?(d=a.i,b=1):null===d&&(d=window);for(g=h.length;b<g;b++)"object"===typeof d[h[b]]&&(d=d[h[b]])}null===d&&a.warn("The target of the action "+a.M+" is invalid.");return d}
xd.prototype.Gb=function(){var a=zd(this,this.ma);if(null!==a){if(null!==this.c){var b=this.c;if("undefined"!==typeof a[b.name])switch("undefined"===typeof b.operation&&(b.operation=yd.Nf),b.operation){case yd.Nf:a[b.name]=b.value;break;case yd.xi:a[b.name]+=b.value;break;case yd.Ni:a[b.name]-=b.value;break;case yd.Hi:a[b.name]*=b.value;break;case yd.Di:a[b.name]/=b.value;break;case yd.Oi:a[b.name]=!a[b.name]}}if(null!==this.f&&(b=this.f,"function"===typeof a[b.name])){var d="undefined"!==typeof b.args?
b.args:null;Array.isArray(d)||(d=[d]);a[b.name].apply(a,d)}}};xd.prototype.destroy=function(){this.i=null;n.prototype.destroy.call(this)};Object.defineProperty(xd.prototype,"target",{get:function(){return zd(this,this.ma)}});Object.defineProperty(xd.prototype,"count",{get:function(){return 0}});function sa(a){this.i=a;this.c=[];this.V=null;n.call(this,"ActionManager")}sa.prototype=Object.create(n.prototype);sa.prototype.constructor=sa;sa.prototype.get=function(a){return p.get(a,"Action")};
sa.prototype.ia=function(a){var b;if(!0===Array.isArray(a))for(var d=0,g=a.length;d<g;d++)b=new xd(this.i,a[d]),this.c.push(b);else b=new xd(this.i,a),this.c.push(b)};sa.prototype.destroy=function(){if(B.Ga(this.c,"Action"))for(;0<this.c.length;)this.c.pop().destroy()};
function R(a,b,d,g){this.i=a;this.F=b;this.H=d;this.A=this.I=null;this.Z=g;this.c=this.u=this.L=this.J=null;this.P=!1;this.B=this.G=this.C=this.f=this.j=null;this.O=this.X=!0;this.o=this.m=null;n.call(this,"Plugin");this.M=this.H.uid;this.vb=this.H.tags;ba(this);this.B={}}R.prototype=Object.create(n.prototype);e=R.prototype;e.constructor=R;
function Ad(a){a.A=B.gb(a.F.defaultConfig,a.H,a.I);a.J=a.A.options||{};a.mb=a.A.data||{};a.L=a.A.actions||{};Bd(a);var b=a.A.events;a.u={};var d,g;for(g in b)d=new Ia(a.i),d.c(b[g]),a.u[g]=d}function Bd(a){for(var b in a.u)a.u[b].destroy(),a.u[b]=null}e.Xk=function(){!0===this.F.loaded?Cd(this):this.F.onLoadComplete.ca(this.$m,this)};e.$m=function(){Cd(this)};
function Cd(a){var b=a.H;"string"===typeof b.parent&&(a.j=b.parent);a.X="boolean"===typeof b.keep?b.keep:!0;a.O="boolean"===typeof b.reset?b.reset:!0;null===a.G&&!0===B.Ga(b.scenes,"string")&&(a.G=b.scenes);Ad(a);a.c=a.F.Hk(a.i,a);a.c.boot.call(a.c);null!==a.m&&a.m.D()}e.Vo=function(){this.P=!0;null!==this.o&&this.o.D()};e.update=function(){null!==this.c&&"function"===typeof this.c.update&&this.c.update.call(this.c)};
e.hl=function(){Ad(this);null!==this.c&&("function"===typeof this.c.reset?this.c.reset.call(this.c):this.log("There is no reset function on plugin "+this.F.uid))};
e.destroy=function(){!1!==this.nb&&(null!==this.c&&(this.c.viewer=null,this.c.plugin=null,this.c.destroy(),this.c=null),null!==this.C&&(this.C.destroy(),this.C=null),null!==this.f&&(this.f.destroy(),this.f=null),null!==this.m&&(this.m.destroy(),this.m=null),null!==this.o&&(this.o.destroy(),this.o=null),Bd(this),this.B=this.i=this.u=null,n.prototype.destroy.call(this))};Object.defineProperty(R.prototype,"fullUrl",{get:function(){return this.F.fullUrl}});
Object.defineProperty(R.prototype,"options",{get:function(){return this.J}});Object.defineProperty(R.prototype,"actions",{get:function(){return this.L}});Object.defineProperty(R.prototype,"events",{get:function(){return this.u}});Object.defineProperty(R.prototype,"scenes",{get:function(){return this.G}});Object.defineProperty(R.prototype,"persistentData",{get:function(){return this.B},set:function(a){this.B=a}});Object.defineProperty(R.prototype,"instance",{get:function(){return this.c}});
Object.defineProperty(R.prototype,"instanceReady",{get:function(){return this.P}});Object.defineProperty(R.prototype,"container",{get:function(){if(null===this.f){if("string"===typeof this.j&&""!==this.j){this.j=document.getElementById(this.j);if("undefined"===typeof this.j||null===this.j||!1===ha.bh(this.j))throw"$_Plugin.boot : Plugin parent is invalid";this.f=new t(this.i,null,null,this.j)}else this.f=new t(this.i),this.i.pluginContainer.ec(this.f),this.f.Kb(!0);this.f.id=this.M;this.f.index=this.Z}return this.f}});
Object.defineProperty(R.prototype,"create",{get:function(){null===this.C&&(this.C=new Dd(this.i,this));return this.C}});Object.defineProperty(R.prototype,"keep",{get:function(){return this.X}});Object.defineProperty(R.prototype,"reset",{get:function(){return this.O}});Object.defineProperty(R.prototype,"contextualConfig",{get:function(){return this.I},set:function(a){this.I=a}});Object.defineProperty(R.prototype,"instanceConfig",{get:function(){return this.H}});
Object.defineProperty(R.prototype,"config",{get:function(){return this.A}});Object.defineProperty(R.prototype,"onInstanceCreate",{get:function(){null===this.m&&(this.m=new q(this,!0));return this.m}});Object.defineProperty(R.prototype,"onInstanceReady",{get:function(){null===this.o&&(this.o=new q(this,!0));return this.o}});
function Ed(a){n.call(this,"PluginEngine");this.i=a;this.C=null;this.o=this.O=this.j=this.J="";this.I=null;this.u="";this.A=null;this.G="";this.m=this.F=this.B=this.H=this.f=null;this.P=0;this.L=!1;this.c=null}Ed.prototype=Object.create(n.prototype);Ed.prototype.constructor=Ed;var Fd=["boot","destroy"],Gd=["viewer","plugin"];e=Ed.prototype;
e.load=function(a){if("undefined"!==typeof a){a=this.C=a;if("undefined"===typeof a.uid)throw"Can't load a plugin engine, missing id in config";this.M=a.uid;ba(this);this.J="string"===typeof a.prefix?a.prefix:this.i.plugins.prefix;if("undefined"===typeof a.url)throw"Can't load a plugin engine, missing url in config";this.j=a.url;this.o=this.J+this.j;this.O="string"===typeof a.manifest?a.manifest:"manifest.json";this.i.load.json(this.M,this.o+this.O,this.mn,this);return!0}return!1};
e.Hk=function(a,b){for(var d=new this.f,g=0,h=Gd.length;g<h;g++)if("undefined"!==typeof d[Gd[g]])throw"$_PluginEngine instance validation failed, "+Gd[g]+" is reserved";if(null!==this.m)for(g=0,h=this.m.length;g<h;g++)if("function"!==typeof d[this.m[g]])throw"$_PluginEngine instance validation failed, action "+this.m[g]+" is undefined on plugin "+this.G;d.i=a;d.cc=b;return d};
e.mn=function(a){a=this.I=this.i.cache.get(A.JSON,a.key).data;if(this.M!==a.uid)throw"Plugin Engine UID doesn't match with manifest UID";var b=a.viewer,d="0.0.0",g="9.9.9";"undefined"!==typeof b&&("undefined"!==typeof b.min&&(d=b.min),"undefined"!==typeof b.max&&(g=b.max));for(var b=["0","9","3"],d=d.split("."),g=g.split("."),h=0,k=0,l=0,u=1,w=Math.max(b.length,d.length,g.length)-1;0<=w;w--)"undefined"!==typeof b[w]&&(h+=parseInt(b[w],10)*u),"undefined"!==typeof d[w]&&(k+=parseInt(d[w],10)*u),"undefined"!==
typeof g[w]&&(l+=parseInt(g[w],10)*u),u*=10;if(!1===(h<k||h>l?!1:!0))this.warn("Version compatibility check for plugin "+a.uid+" failed!"),this.warn(a.viewer);else if(!1===I.check(a.device))this.warn("Device compatibility check for plugin "+a.uid+" failed!"),this.warn(a.device);else{"undefined"!==typeof a.options&&(this.B=a.options);"undefined"!==typeof a.data&&(this.mb=a.data);"undefined"!==typeof a.actions&&(this.m=a.actions);"undefined"!==typeof a.events&&(this.F=a.events);this.u=a.name;this.A=
a.sources;this.G=a.constructor;b=null;if("undefined"!==typeof a.i18n&&(b=a.i18n,"undefined"!==typeof b.locales))for(d=0,g=b.locales.length;d<g;d++)if(a=b.locales[d],"undefined"!==typeof a.files)for(k=0,l=a.files.length;k<l;k++)h=a.files[k],h.key=this.M+"-"+h.key,h.url=this.o+h.url;this.H=b;a=this.A;b=0;for(d=a.length;b<d;b++)g="http://"===String(a[b]).substring(0,7)||"https://"===String(a[b]).substring(0,8)?a[b]:this.o+a[b],"css"===Ka(g).extension?this.i.load.zk(g,this.Ej,this):this.i.load.jh(g,this.Ej,
this)}};e.Ej=function(){this.P++;if(this.P===this.A.length){var a;a:{a=this.G;if("string"===typeof a&&""!==a){a=a.split(".");for(var b=window,d=0,g=a.length;d<g;d++){if(d===a.length-1&&"function"===typeof b[a[d]]){a=b[a[d]];break a}if("object"===typeof b[a[d]])b=b[a[d]];else break}}a=null}this.f=a;!0===Hd(this)&&(a=this.H,null!==a&&this.i.i18n.ia(a),this.L=!0,null!==this.c&&this.c.D())}};
function Hd(a){if(null===a.f||"function"!==typeof a.f)throw"Plugin engine "+a.M+" can't find it's constructor";for(var b=0,d=Fd.length;b<d;b++)if("function"!==typeof a.f.prototype[Fd[b]])throw"$_PluginEngine engine validation failed, missing required method "+Fd[b]+" on plugin engine "+a.u;Object.defineProperty(a.f.prototype,"viewer",{get:function(){return this.i}});Object.defineProperty(a.f.prototype,"plugin",{get:function(){return this.cc}});return!0}
e.destroy=function(){this.H=this.f=this.A=this.u=this.I=this.C=this.i=null;null!==this.c&&(this.c.destroy(),this.c=null);n.prototype.destroy.call(this)};Object.defineProperty(Ed.prototype,"name",{get:function(){return this.u}});Object.defineProperty(Ed.prototype,"loaded",{get:function(){return this.L}});Object.defineProperty(Ed.prototype,"url",{get:function(){return this.j}});Object.defineProperty(Ed.prototype,"fullUrl",{get:function(){return this.o}});
Object.defineProperty(Ed.prototype,"options",{get:function(){return this.B}});Object.defineProperty(Ed.prototype,"actions",{get:function(){return this.m}});Object.defineProperty(Ed.prototype,"events",{get:function(){return this.F}});Object.defineProperty(Ed.prototype,"defaultConfig",{get:function(){return{data:this.mb,options:this.B,actions:this.m,events:this.F}}});Object.defineProperty(Ed.prototype,"onLoadComplete",{get:function(){null===this.c&&(this.c=new q(this));return this.c}});
function qa(a){n.call(this,"PluginManager");this.i=a;this.m=!0;this.u="";this.f=this.c=this.j=null}qa.prototype=Object.create(n.prototype);e=qa.prototype;e.constructor=qa;
e.Xl=function(){for(var a=this.i.story.sceneUid,b,d=this.c.size;d--;)b=this.c.get(d),(!1===b.keep||null!==b.scenes&&-1===b.scenes.indexOf(a))&&this.remove(b.uid);!0===this.m&&"undefined"!==typeof this.o&&(a=this.o,Id(this,a.engines),Jd(this,a.instances),Kd(this,a.configurations));!0===this.m&&"undefined"!==typeof this.i.story.scene.config.plugins&&(a=this.i.story.scene.config.plugins,Id(this,a.engines),Jd(this,a.instances),Kd(this,a.configurations));for(b=this.c.size;b--;)a=this.c.get(b),!0===a.reset&&
a.hl()};function Id(a,b){if("undefined"!==typeof b)for(var d=0,g=b.length;d<g;d++){var h=a,k=b[d];if("string"===typeof k.uid&&null===Ld(h,k.uid))if(!1===p.Xa(k.uid)){var l=new Ed(h.i);h.j.add(l);l.load(k)}else h.j.add(p.get(k.uid))}}
function Jd(a,b){if("undefined"!==typeof b)for(var d=0,g=b.length;d<g;d++){var h=!1!==b[d].enabled?!0:!1,k=a.re(b[d].uid),l=a.i.story.sceneUid,u=B.Ga(b[d].scenes,"string")?b[d].scenes:[],l=0===u.length||""===l&&0===u.length||-1!==u.indexOf(l);if(!0===h&&null===k&&!0===l){h=a;k=b[d];if("undefined"===typeof k.engine)throw"Can't create plugin instance, engineUid is undefined";l=Ld(h,k.engine);if(null===l)throw"Plugin Engine "+k.engine+" doesn't exist";k=new R(h.i,l,k,"number"===typeof k.index?k.index:
h.c.size);k.onInstanceCreate.ca(h.xn,h);h.c.add(k);k.Xk()}}}function Kd(a,b){if("undefined"!==typeof b)for(var d=0,g=b.length;d<g;d++){var h=!1!==b[d].enabled?!0:!1,k=a.re(b[d].instance),l=null;!0===h&&(l=b[d]);null!==k&&(k.contextualConfig=l)}}function Ld(a,b){for(var d,g=0,h=a.j.size;g<h;g++)if(d=a.j.get(g),d.uid===b)return d;return null}e.xn=function(a){a=a.emitter;null!==this.f&&this.f.D(a)};e.boot=function(){this.j=new Md;this.c=new Md;this.i.story.onSceneLoadStart.add(this.Xl,this)};
e.ia=function(a){this.o=a;this.m="boolean"===typeof a.enabled?a.enabled:!0;this.u="string"===typeof a.prefix?a.prefix:"./plugins/"};e.re=function(a){for(var b,d=0,g=this.c.size;d<g;d++)if(b=this.c.get(d),b.uid===a)return b;return null};e.Fk=function(a){a=this.c.get(a);return"undefined"!==typeof a?a:null};e.get=function(a){var b=null;"string"===typeof a?b=this.re(a):"number"===typeof a&&(b=this.Fk(a));return b};e.remove=function(a){a=this.get(a);a.destroy();this.c.remove(a)};
e.update=function(){for(var a,b=0,d=this.c.size;b<d;b++)a=this.c.get(b),a.update()};e.render=function(){};e.destroy=function(){this.i=null;null!==this.f&&(this.f.destroy(),this.f=null);for(var a=0,b=this.j.size;a<b;a++)this.j.get(a).destroy();this.j=null;a=0;for(b=this.c.size;a<b;a++)this.c.get(a).destroy();this.c=null;n.prototype.destroy.call(this)};Object.defineProperty(qa.prototype,"all",{get:function(){return this.c}});Object.defineProperty(qa.prototype,"enabled",{get:function(){return this.m}});
Object.defineProperty(qa.prototype,"prefix",{get:function(){return this.u}});Object.defineProperty(qa.prototype,"onInstanceCreate",{get:function(){null===this.f&&(this.f=new q(this,!0));return this.f}});function Dd(a,b){this.i=a;this.cc=b;this.ba=[];n.call(this,"PluginObjectFactory")}Dd.prototype=Object.create(n.prototype);e=Dd.prototype;e.constructor=Dd;e.pb=function(a){a:{for(var b=this.ba.length,d;b--;)if(d=this.ba[b],d===a.emitter){a=b;break a}a=-1}this.ba.splice(a,1)};
e.cp=function(a){a=new Na(this.i,a);a.onDestroy.ca(this.pb,this);this.ba.push(a);return a};e.ep=function(a){a=new S(this.i,a);a.onDestroy.ca(this.pb,this);this.ba.push(a);return a};e.sound=function(a,b){a=new N(this.i,a,b);a.onDestroy.ca(this.pb,this);this.ba.push(a);return a};e.wo=function(a){a=new t(this.i,a);a.onDestroy.ca(this.pb,this);this.ba.push(a);return a};e.Zl=function(a){a=new T(this.i,a);a.onDestroy.ca(this.pb,this);this.ba.push(a);return a};
e.image=function(a,b){var d=a;"string"===typeof a&&(d={key:null,url:a});d.key=this.cc.uid+"-"+d.key;!1!==b&&(d.url=this.cc.fullUrl+d.url);a=new Ua(this.i,d);a.onDestroy.ca(this.pb,this);this.ba.push(a);return a};e.sprite=function(a,b){a.key=this.cc.uid+"-"+a.key;!1!==b&&(a.url=this.cc.fullUrl+a.url,a.frames=this.cc.fullUrl+a.frames);a=new Ac(this.i,a);a.onDestroy.ca(this.pb,this);this.ba.push(a);return a};e.Yl=function(a){a=new Nd(this.i,a);a.onDestroy.ca(this.pb,this);this.ba.push(a);return a};
e.am=function(a,b,d,g,h){var k;"undefined"!==typeof d&&d.toLowerCase()===Va.mf?k=new J(this.i,a,b,g):k=new K(this.i,a,b,g,h);k.onDestroy.ca(this.pb,this);this.ba.push(k);return k};e.canvas=function(){var a=new ia(this.i);a.onDestroy.ca(this.pb,this);this.ba.push(a);return a};e.$l=function(a){a=new Pb(this.i,a);a.onDestroy.ca(this.pb,this);this.i.tween.add(a);this.ba.push(a);return a};e.Ak=function(){for(var a=this.ba.length;a--;)this.ba[a].destroy()};
e.destroy=function(){this.Ak();this.ba=this.cc=this.i=null;n.prototype.destroy.call(this)};
var I=function(a){a=a();a.prototype=Object.create(n.prototype);a.prototype.constructor=a;a.prototype.Sm=function(){if(/Playstation Vita/.test(this.da))this.fb="playstationvita",this.Kg=!0;else if(/Xbox/.test(this.da))this.fb="xbox",this.Sg=!0;else if(/Kindle/.test(this.da)||/\bKF[A-Z][A-Z]+/.test(this.da)||/Silk.*Mobile Safari/.test(this.da))this.fb="kindle",this.og=!0;else if(/Windows Phone/i.test(this.da)||/IEMobile/i.test(this.da))this.fb="windowsphone",this.le=!0,/Windows Phone (\d+)/.test(this.da)&&
(this.bc=parseInt(RegExp.$1,10));else if(/Android/.test(this.da))this.fb="android",this.Ti=!0,/Android ([\.\_\d]+)/.test(this.da)&&(this.bc=parseInt(RegExp.$1,10));else if(/CrOS/.test(this.da))this.fb="chromeos",this.Xf=!0;else if(/iP[ao]d|iPhone/i.test(this.da))this.fb="ios",this.Nc=!0,/OS (\d+)/.test(navigator.appVersion)&&(this.bc=parseInt(RegExp.$1,10));else if(/(Linux|X11)/.test(this.da))this.fb="linux",this.pg=!0;else if(/Mac OS X/.test(this.da))this.fb="macosx",this.sg=!0,/Mac OS X (10[\.\_\d]+)/.test(this.da)&&
(this.bc=parseInt(RegExp.$1,10));else if(/Windows/.test(this.da)||/WPDesktop/i.test(this.da))/WPDesktop/i.test(this.da)?(this.fb="windowsphone",this.le=!0):(this.fb="windows",this.Rg=!0),/(Windows 10.0|Windows NT 10.0)/.test(this.da)?this.bc=10:/(Windows 8.1|Windows NT 6.3)/.test(this.da)||/(Windows 8|Windows NT 6.2)/.test(this.da)?this.bc=8:/(Windows 7|Windows NT 6.1)/.test(this.da)&&(this.bc=7)};a.prototype.Jm=function(){this.gd="undefined"!==typeof document.documentMode;this.Vd=!1===this.gd&&!0===
!!window.StyleMedia;this.gg="undefined"!==typeof window.InstallTrigger;this.be=!0===!!window.opr||0<=this.da.indexOf(" OPR/")||0<=this.da.indexOf("Opera");this.Cg=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);this.Wf=!1===this.gd&&!1===this.Vd&&!1===this.be&&(!0===!!window.chrome||0<=this.da.indexOf("CriOS"));if(this.Vd)this.Eb="edge",/Edge\/(\d+)/.test(this.da)&&(this.eb=this.hj=parseInt(RegExp.$1,10));else if(this.Wf)this.Eb="chrome",/CriOS\/(\d+)/.test(this.da)?this.eb=this.Yf=parseInt(RegExp.$1,
10):/Chrome\/(\d+)/.test(this.da)&&(this.eb=this.Yf=parseInt(RegExp.$1,10));else if(this.gg)this.Eb="firefox",/Firefox\D+(\d+)/.test(this.da)&&(this.eb=this.qj=parseInt(RegExp.$1,10));else if(this.og)/Silk/.test(this.da)&&(this.Eb="silk",this.Hg=!0);else if(this.gd)this.Eb="internetexplorer",/MSIE (\d+\.\d+);/.test(this.da)?this.eb=this.mg=parseInt(RegExp.$1,10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(this.da)&&(this.eb=this.mg=parseInt(RegExp.$3,10));else if(this.be)this.Eb="opera",/OPR\/(\d+)/.test(this.da)?
this.eb=this.ce=parseInt(RegExp.$1,10):0<=this.da.indexOf("Opera/")?/Version\/(\d+)/.test(this.da)&&(this.eb=this.ce=parseInt(RegExp.$1,10)):/Opera (\d+)/.test(this.da)&&(this.eb=this.ce=parseInt(RegExp.$1,10));else if(this.Cg)this.Eb="safari",/version\/(\d+(\.\d+)?)/i.test(this.da)&&(this.eb=this.bk=parseInt(RegExp.$1,10));else{var a=this.da.match(/Android.*AppleWebKit\/([\d.]+)/);a&&537>a[1]&&(this.Eb="androidstock",this.zj=!0,this.eb=this.Ui=parseFloat(this.da.slice(this.da.indexOf("Android")+
8)))}navigator.j&&(this.mk=!0);this.Sj="CSS1Compat"===document.compatMode?!1:!0};a.prototype.Lm=function(){this.uc=window.devicePixelRatio||1;this.wj=!0===this.Nc&&-1!==this.da.toLowerCase().indexOf("iphone");this.xj=!0===this.Nc&&-1!==this.da.toLowerCase().indexOf("ipod");this.kg=!0===this.Nc&&-1!==this.da.toLowerCase().indexOf("ipad");this.Xj=2<=this.uc&&!0===this.Nc;this.Rg&&!this.le||this.sg||this.pg&&!this.Hg||this.Xf?this.Sd=!0:/Mobi/i.test(this.da)&&!1===this.kg?this.Yd=!0:this.Ig=!0;if(/TV/i.test(this.da)||
!0===this.Kg||!0===this.Sg||this.Sd&&/Windows NT/i.test(this.da)&&/Touch/i.test(this.da))this.Nj=!0,this.Sd=this.Ig=this.Yd=!1};a.prototype.Um=function(){var a=document.createElement("video");try{"function"===typeof a.canPlayType&&(a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(this.yg=!0),a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(this.vg=this.ig=!0),a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(this.Qg=!0),a.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,
"")&&(this.Lg=!0),a.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(this.jg=!0))}catch(d){}};a.prototype.Hm=function(){this.Wi="undefined"!==typeof window.Audio;this.nk="undefined"!==typeof window.AudioContext||"undefined"!==typeof window.webkitAudioContext;var a=document.createElement("audio");try{if("function"===typeof a.canPlayType){a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.xg=!0);a.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(this.tg=
!0);if(a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||a.canPlayType("audio/opus;").replace(/^no$/,""))this.de=!0;a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(this.Mg=!0);a.canPlayType("audio/aac;").replace(/^no$/,"")&&(this.Tf=!0);if(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;").replace(/^no$/,""))this.rg=!0;if(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;").replace(/^no$/,""))this.ug=!0;
a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(this.Og=this.Pg=!0)}}catch(d){}};a.prototype.Mm=function(){this.kk="undefined"!==typeof navigator.vibrate||"undefined"!==typeof navigator.o||"undefined"!==typeof navigator.c||"undefined"!==typeof navigator.f;this.Uf="function"===typeof navigator.getBattery};a.prototype.Om=function(){this.Da="undefined"!==typeof window.CanvasRenderingContext2D;if(!0===this.Da){this.Yi="function"===typeof document.createElement("canvas").getContext("2d").fillText;
var a=document.createElement("canvas").getContext("2d");a.rect(0,0,10,10);a.rect(2,2,6,6);this.Zi=!1===a.isPointInPath(5,5,"evenodd")}try{this.qg="object"===typeof window.localStorage&&"function"===typeof window.localStorage.getItem}catch(g){this.qg=!1}this.Gj="function"===typeof window.MediaSource;this.jj="function"===typeof window.HTMLMediaElement&&"function"===typeof window.M&&"function"===typeof window.f&&"function"===typeof navigator.M;this.Vi="object"===typeof window.applicationCache;this.Si=
"function"===typeof window.addEventListener;try{var d=document.createElement("canvas");d.f=!1;this.Ng="function"===typeof d.getContext&&"undefined"!==typeof window.WebGLRenderingContext&&!(!d.getContext("webgl")&&!d.getContext("experimental-webgl"))}catch(g){this.Ng=!1}this.dc="function"===typeof navigator.getVRDisplays?!0:!1;this.Ri="object"===typeof window.JSON&&"function"===typeof window.JSON.parse&&"function"===typeof window.JSON.stringify;this.vj="object"===typeof navigator.geolocation;this.$b=
"object"===typeof window.history&&"function"===typeof window.history.pushState;this.dk="function"===typeof document.createElementNS&&"function"===typeof document.createElementNS("http://www.w3.org/2000/svg","svg").c;this.$i="undefined"!==typeof document.documentElement.contextMenu&&"function"===typeof window.HTMLMenuItemElement};a.prototype.Nm=function(){this.Aj=/^https/i.test(window.location.protocol);try{this.ng=window.self!==window.top}catch(b){this.ng=!0}};a.prototype.Rm=function(){this.gk="undefined"!==
typeof window.ontouchstart||"undefined"!==typeof window.c&&document instanceof window.c||"number"===typeof navigator.maxTouchPoints&&0<navigator.maxTouchPoints||"number"===typeof navigator.msMaxTouchPoints&&0<navigator.msMaxTouchPoints;if("undefined"!==typeof window.j||"undefined"!==typeof window.m)this.hk=!(!MouseEvent.f||!MouseEvent.c);this.uj="function"===typeof navigator.getGamepads||"function"===typeof navigator.webkitGetGamepads};a.prototype.Pm=function(){for(var a="requestFullscreen requestFullScreen webkitRequestFullscreen webkitRequestFullScreen mozRequestFullScreen mozRequestFullscreen msRequestFullscreen msRequestFullScreen".split(" "),
d="cancelFullscreen cancelFullScreen exitFullscreen exitFullScreen webkitCancelFullscreen webkitCancelFullScreen webkitExitFullscreen webkitExitFullScreen mozCancelFullscreen mozCancelFullScreen mozExitFullscreen mozExitFullScreen msCancelFullscreen msCancelFullScreen msExitFullscreen msExitFullScreen".split(" "),g=document.createElement("div"),h=0,k=a.length;h<k;h++)if(g[a[h]]){this.Wj=a[h];break}a=0;for(g=d.length;a<g;a++)if(document[d[a]]){this.nj=d[a];break}"function"===typeof window.Element&&
Element.ALLOW_KEYBOARD_INPUT&&(this.tj=!0);d=["fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement"];a=0;for(g=d.length;a<g;a++)if("undefined"!==typeof document[d[a]]){this.rj=d[a];break}d=["fullscreenEnabled","mozFullScreenEnabled","webkitFullscreenEnabled","msFullscreenEnabled"];a=0;for(g=d.length;a<g;a++)if("undefined"!==typeof document[d[a]]){this.sj=d[a];break}};a.prototype.Im=function(){this.Jg="visibilityState"in document?"visibilityState":"webkitVisibilityState"in
document?"webkitVisibilityState":"mozVisibilityState"in document?"mozVisibilityState":null;this.lk=this.Jg.slice(0,-5)+"change";for(var a=["orientation","mozOrientation","msOrientation"],d=0,g=a.length;d<g;d++)if("string"===typeof screen[a[d]]){this.Wa=a[d];break}this.Oc="object"===typeof screen.orientation&&"string"===typeof screen.orientation.type&&"function"===typeof screen.orientation.lock;for(var a=["lockOrientation","mozLockOrientation","msLockOrientation"],d=["unlockOrientation","mozUnlockOrientation",
"msUnlockOrientation"],g=0,h=a.length;g<h;g++)if("function"===typeof screen[a[g]]){this.Fj=a[g];this.ik=d[g];break}this.oj="undefined"!==typeof window.File&&"undefined"!==typeof window.FileReader&&"undefined"!==typeof window.FileList&&"undefined"!==typeof window.Blob;this.pj="undefined"!==typeof window.requestFileSystem||"undefined"!==typeof window.webkitRequestFileSystem;this.Rj="undefined"!==typeof document.f||"undefined"!==typeof document.c||"undefined"!==typeof document.M};a.prototype.Km=function(){var a=
document.createElement("a").style;a.cssText="pointer-events:auto";this.cj="auto"===a.pointerEvents;a.cssText="background-color:rgba(150,255,150,.5)";this.dj=-1<(""+a.backgroundColor).indexOf("rgba");this.bj="undefined"!==typeof a.animationName||"undefined"!==typeof a.webkitAnimationName||"undefined"!==typeof a.m||"undefined"!==typeof a.o;var a=document.createElement("p"),d,g={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};
document.body.insertBefore(a,null);for(var h in g)"undefined"!==typeof a.style[h]&&(a.style[h]="translate3d(1px,1px,1px)",d=window.getComputedStyle(a).getPropertyValue(g[h]));document.body.removeChild(a);this.aj="undefined"!==typeof d&&0<d.length&&"none"!==d};a.prototype.Ym=function(a){null!==a.rotationRate&&"undefined"!==typeof a.rotationRate.alpha&&"undefined"!==typeof a.rotationRate.beta&&"undefined"!==typeof a.rotationRate.gamma&&(this.bg=!0);"undefined"!==typeof a.acceleration&&"undefined"!==
typeof a.acceleration.x&&"undefined"!==typeof a.acceleration.y&&"undefined"!==typeof a.acceleration.z&&(this.ag=!0);this.Tj();"function"!==typeof this.Mc&&this.Vf()};a.prototype.Td=function(a){"undefined"!==typeof a.alpha&&null!==a.alpha&&"undefined"!==typeof a.beta&&null!==a.beta&&"undefined"!==typeof a.gamma&&null!==a.gamma&&(this.eg=!0);this.Uj();"function"!==typeof this.Lc&&this.Vf()};a.prototype.Tj=function(){window.removeEventListener("devicemotion",this.Lc,!1);this.Lc=null};a.prototype.Uj=
function(){window.removeEventListener("deviceorientation",this.Mc,!1);this.Mc=null};a.prototype.Qm=function(){this.$f="undefined"!==typeof window.DeviceMotionEvent;this.cg="undefined"!==typeof window.DeviceOrientationEvent;window.addEventListener("deviceorientation",this.Mc,!1);window.addEventListener("devicemotion",this.Lc,!1)};a.prototype.Tm=function(){var a=document.createElement("div");a.style.width="1in";a.style.height="1in";document.body.appendChild(a);this.gj=a.offsetWidth;document.body.removeChild(a);
this.Yd?(this.Fg=Math.floor(Math.min(window.screen.width,window.screen.height)*this.uc),this.Dg=Math.floor(Math.max(window.screen.width,window.screen.height)*this.uc)):(this.Fg=Math.floor(Math.max(window.screen.width,window.screen.height)*this.uc),this.Dg=Math.floor(Math.min(window.screen.width,window.screen.height)*this.uc))};a.prototype.Gm=function(){this.da=navigator.userAgent;this.Bj=navigator.languages&&navigator.languages[0]||navigator.language||navigator.m||"";this.Sm();this.Jm();this.Lm();
this.Hm();this.Um();this.Mm();this.Om();this.Nm();this.Im();this.Pm();this.Rm();this.Km();this.Lc=this.Ym.bind(this);this.Mc=this.Td.bind(this);this.Qm();this.Tm();!1===this.$f&&!1===this.cg&&this.Vf()};a.prototype.Vf=function(){"function"===typeof this.Lc&&this.Tj();"function"===typeof this.Mc&&this.Uj();this.sc=!0===this.bg&&!0===this.ag&&!0===this.eg;this.ja=!0;this.V.D();Object.freeze(I)};a.prototype.so=function(a){return"mp3"===a&&!0===this.tg||"ogg"===a&&(!0===this.xg||!0===this.de)||"m4a"===
a&&!0===this.rg||"mp4"===a&&!0===this.ug||"opus"===a&&!0===this.de||"wav"===a&&!0===this.Mg||"aac"===a&&!0===this.Tf||"webm"===a&&!0===this.Pg||"weba"===a&&!0===this.Og?!0:!1};a.prototype.uo=function(a){if("webm"!==a||!0!==this.Qg&&!0!==this.Lg)if("mp4"!==a||!0!==this.vg&&!0!==this.ig){if(("ogg"===a||"ogv"===a)&&!0===this.yg||"mpeg"===a&&!0===this.jg)return!0}else return!0;else return!0;return!1};a.prototype.Qo=function(){return navigator.getBattery().then(function(a){return this.Uf&&!a.charging&&
.2>=a.level}.bind(this),function(){return!1})};a.prototype.check=function(a){if("undefined"===typeof a)return!0;for(var b in a)if("undefined"===typeof this[b])console.warn("Unable to check plugin device compatibility for: "+b);else if(this[b]!==a[b])return!1;return!0};Object.defineProperty(a.prototype,"ready",{get:function(){return this.ja}});Object.defineProperty(a.prototype,"ua",{get:function(){return this.da}});Object.defineProperty(a.prototype,"language",{get:function(){return this.Bj}});Object.defineProperty(a.prototype,
"os",{get:function(){return this.fb}});Object.defineProperty(a.prototype,"osVersion",{get:function(){return this.bc}});Object.defineProperty(a.prototype,"vita",{get:function(){return this.Kg}});Object.defineProperty(a.prototype,"xbox",{get:function(){return this.Sg}});Object.defineProperty(a.prototype,"kindle",{get:function(){return this.og}});Object.defineProperty(a.prototype,"android",{get:function(){return this.Ti}});Object.defineProperty(a.prototype,"chromeOS",{get:function(){return this.Xf}});
Object.defineProperty(a.prototype,"iOS",{get:function(){return this.Nc}});Object.defineProperty(a.prototype,"linux",{get:function(){return this.pg}});Object.defineProperty(a.prototype,"macOS",{get:function(){return this.sg}});Object.defineProperty(a.prototype,"windows",{get:function(){return this.Rg}});Object.defineProperty(a.prototype,"windowsPhone",{get:function(){return this.le}});Object.defineProperty(a.prototype,"firefox",{get:function(){return this.gg}});Object.defineProperty(a.prototype,"firefoxVersion",
{get:function(){return this.qj}});Object.defineProperty(a.prototype,"chrome",{get:function(){return this.Wf}});Object.defineProperty(a.prototype,"chromeVersion",{get:function(){return this.Yf}});Object.defineProperty(a.prototype,"ie",{get:function(){return this.gd}});Object.defineProperty(a.prototype,"ieVersion",{get:function(){return this.mg}});Object.defineProperty(a.prototype,"opera",{get:function(){return this.be}});Object.defineProperty(a.prototype,"operaVersion",{get:function(){return this.ce}});
Object.defineProperty(a.prototype,"edge",{get:function(){return this.Vd}});Object.defineProperty(a.prototype,"edgeVersion",{get:function(){return this.hj}});Object.defineProperty(a.prototype,"safari",{get:function(){return this.Cg}});Object.defineProperty(a.prototype,"safariVersion",{get:function(){return this.bk}});Object.defineProperty(a.prototype,"silk",{get:function(){return this.Hg}});Object.defineProperty(a.prototype,"browser",{get:function(){return this.Eb}});Object.defineProperty(a.prototype,
"browserVersion",{get:function(){return this.eb}});Object.defineProperty(a.prototype,"webApp",{get:function(){return this.mk}});Object.defineProperty(a.prototype,"isAndroidStockBrowser",{get:function(){return this.zj}});Object.defineProperty(a.prototype,"androidStockBrowserVersion",{get:function(){return this.Ui}});Object.defineProperty(a.prototype,"quirksMode",{get:function(){return this.Sj}});Object.defineProperty(a.prototype,"fullscreenEnabled",{get:function(){return this.sj}});Object.defineProperty(a.prototype,
"requestFullscreen",{get:function(){return this.Wj}});Object.defineProperty(a.prototype,"exitFullscreen",{get:function(){return this.nj}});Object.defineProperty(a.prototype,"fullscreenElement",{get:function(){return this.rj}});Object.defineProperty(a.prototype,"fullscreenKeyboard",{get:function(){return this.tj}});Object.defineProperty(a.prototype,"iPhone",{get:function(){return this.wj}});Object.defineProperty(a.prototype,"retina",{get:function(){return this.Xj}});Object.defineProperty(a.prototype,
"iPod",{get:function(){return this.xj}});Object.defineProperty(a.prototype,"iPad",{get:function(){return this.kg}});Object.defineProperty(a.prototype,"pixelRatio",{get:function(){return this.uc}});Object.defineProperty(a.prototype,"vibrate",{get:function(){return this.kk}});Object.defineProperty(a.prototype,"battery",{get:function(){return this.Uf}});Object.defineProperty(a.prototype,"desktop",{get:function(){return this.Sd}});Object.defineProperty(a.prototype,"tablet",{get:function(){return this.Ig}});
Object.defineProperty(a.prototype,"mobile",{get:function(){return this.Yd}});Object.defineProperty(a.prototype,"other",{get:function(){return this.Nj}});Object.defineProperty(a.prototype,"touch",{get:function(){return this.gk}});Object.defineProperty(a.prototype,"gamepad",{get:function(){return this.uj}});Object.defineProperty(a.prototype,"touchForce",{get:function(){return this.hk}});Object.defineProperty(a.prototype,"audioTag",{get:function(){return this.Wi}});Object.defineProperty(a.prototype,
"webAudio",{get:function(){return this.nk}});Object.defineProperty(a.prototype,"ogg",{get:function(){return this.xg}});Object.defineProperty(a.prototype,"mp3",{get:function(){return this.tg}});Object.defineProperty(a.prototype,"opus",{get:function(){return this.de}});Object.defineProperty(a.prototype,"wav",{get:function(){return this.Mg}});Object.defineProperty(a.prototype,"m4a",{get:function(){return this.rg}});Object.defineProperty(a.prototype,"mp4",{get:function(){return this.ug}});Object.defineProperty(a.prototype,
"aac",{get:function(){return this.Tf}});Object.defineProperty(a.prototype,"webm",{get:function(){return this.Pg}});Object.defineProperty(a.prototype,"weba",{get:function(){return this.Og}});Object.defineProperty(a.prototype,"oggVideo",{get:function(){return this.yg}});Object.defineProperty(a.prototype,"h264Video",{get:function(){return this.ig}});Object.defineProperty(a.prototype,"mp4Video",{get:function(){return this.vg}});Object.defineProperty(a.prototype,"webmVideo",{get:function(){return this.Qg}});
Object.defineProperty(a.prototype,"vp9Video",{get:function(){return this.Lg}});Object.defineProperty(a.prototype,"hlsVideo",{get:function(){return this.jg}});Object.defineProperty(a.prototype,"canvas",{get:function(){return this.Da}});Object.defineProperty(a.prototype,"canvasWinding",{get:function(){return this.Zi}});Object.defineProperty(a.prototype,"canvasText",{get:function(){return this.Yi}});Object.defineProperty(a.prototype,"addEventListener",{get:function(){return this.Si}});Object.defineProperty(a.prototype,
"raf",{get:function(){return this.Fb}});Object.defineProperty(a.prototype,"webGL",{get:function(){return this.Ng}});Object.defineProperty(a.prototype,"webVR",{get:function(){return this.dc}});Object.defineProperty(a.prototype,"file",{get:function(){return this.oj}});Object.defineProperty(a.prototype,"fileSystem",{get:function(){return this.pj}});Object.defineProperty(a.prototype,"localStorage",{get:function(){return this.qg}});Object.defineProperty(a.prototype,"applicationCache",{get:function(){return this.Vi}});
Object.defineProperty(a.prototype,"geolocation",{get:function(){return this.vj}});Object.defineProperty(a.prototype,"pointerLock",{get:function(){return this.Rj}});Object.defineProperty(a.prototype,"contextMenu",{get:function(){return this.$i}});Object.defineProperty(a.prototype,"mediaSource",{get:function(){return this.Gj}});Object.defineProperty(a.prototype,"encryptedMedia",{get:function(){return this.jj}});Object.defineProperty(a.prototype,"JSON",{get:function(){return this.Ri}});Object.defineProperty(a.prototype,
"history",{get:function(){return this.$b}});Object.defineProperty(a.prototype,"svg",{get:function(){return this.dk}});Object.defineProperty(a.prototype,"isSecure",{get:function(){return this.Aj}});Object.defineProperty(a.prototype,"isIframe",{get:function(){return this.ng}});Object.defineProperty(a.prototype,"visibilityState",{get:function(){return this.Jg}});Object.defineProperty(a.prototype,"visibilityChange",{get:function(){return this.lk}});Object.defineProperty(a.prototype,"css3D",{get:function(){return this.aj}});
Object.defineProperty(a.prototype,"cssRgba",{get:function(){return this.dj}});Object.defineProperty(a.prototype,"cssPointerEvents",{get:function(){return this.cj}});Object.defineProperty(a.prototype,"cssAnimation",{get:function(){return this.bj}});Object.defineProperty(a.prototype,"gyroscope",{get:function(){return this.sc}});Object.defineProperty(a.prototype,"deviceMotion",{get:function(){return this.$f}});Object.defineProperty(a.prototype,"deviceOrientation",{get:function(){return this.cg}});Object.defineProperty(a.prototype,
"deviceMotionAcceleration",{get:function(){return this.ag}});Object.defineProperty(a.prototype,"deviceMotionRotationRate",{get:function(){return this.bg}});Object.defineProperty(a.prototype,"deviceOrientationMagnetometer",{get:function(){return this.eg}});Object.defineProperty(a.prototype,"dpi",{get:function(){return this.gj}});Object.defineProperty(a.prototype,"screenWidth",{get:function(){return this.Fg}});Object.defineProperty(a.prototype,"screenHeight",{get:function(){return this.Dg}});Object.defineProperty(a.prototype,
"screenOrientation",{get:function(){return this.Oc}});Object.defineProperty(a.prototype,"orientation",{get:function(){return this.Wa}});Object.defineProperty(a.prototype,"lockOrientation",{get:function(){return this.Fj}});Object.defineProperty(a.prototype,"unlockOrientation",{get:function(){return this.ik}});Object.defineProperty(a.prototype,"onReady",{get:function(){return this.V}});return new a}(function(){return function(){this.ja=!1;this.fb=this.Bj=this.da="";this.bc=0;this.gg=this.le=this.Rg=
this.sg=this.pg=this.Nc=this.Xf=this.Ti=this.og=this.Sg=this.Kg=!1;this.qj=0;this.Wf=!1;this.Yf=0;this.gd=!1;this.mg=0;this.be=!1;this.ce=0;this.Vd=!1;this.hj=0;this.Cg=!1;this.bk=0;this.Hg=!1;this.Eb="";this.eb=0;this.zj=this.mk=!1;this.Ui=0;this.Sj=!1;this.rj=this.nj=this.Wj=this.sj="";this.kg=this.xj=this.Xj=this.wj=this.tj=!1;this.uc=1;this.ng=this.Aj=this.dk=this.$b=this.Ri=this.jj=this.Gj=this.$i=this.Rj=this.vj=this.Vi=this.qg=this.pj=this.oj=this.dc=this.Ng=this.Fb=this.Si=this.Yi=this.Zi=
this.Da=this.jg=this.Lg=this.Qg=this.vg=this.ig=this.yg=this.Og=this.Pg=this.Tf=this.ug=this.rg=this.Mg=this.de=this.tg=this.xg=this.nk=this.Wi=this.hk=this.uj=this.gk=this.Nj=this.Yd=this.Ig=this.Sd=this.Uf=this.kk=!1;this.lk=this.Jg="";this.eg=this.bg=this.ag=this.cg=this.$f=this.sc=this.bj=this.cj=this.dj=this.aj=!1;this.Mc=this.Lc=null;this.Dg=this.Fg=this.gj=0;this.Oc=!1;this.ik=this.Fj=this.Wa="";this.V=new q(this,!0);n.call(this,"Device");this.Gm()}});function ja(a){this.i=a;this.c=null}
ja.prototype.constructor=ja;ja.prototype.boot=function(){this.c=this.f.bind(this);document.addEventListener(I.visibilityChange,this.c,!1);this.f()};ja.prototype.f=function(){var a=document[I.visibilityState];"string"===typeof a&&"visible"===a?this.i.resume(!0):this.i.pause(!0)};ja.prototype.destroy=function(){document.removeEventListener(I.visibilityChange,this.c,!1);this.i=this.c=null};function ma(a){this.i=a;this.m=!1;this.c=null;this.j=!1;this.f=null}e=ma.prototype;e.constructor=ma;
e.boot=function(){for(var a=["ms","moz","webkit","o"],b=0;b<a.length&&!window.requestAnimationFrame;b++)window.requestAnimationFrame=window[a[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[b]+"CancelAnimationFrame"];this.f=window};
e.start=function(a){this.f="undefined"!==typeof a&&(a===window||a instanceof VRDisplay)?a:window;this.j=!0;"undefined"===typeof this.f.requestAnimationFrame||"timeout"===this.i.config.update?(this.m=!0,this.c=function(){!0===this.j&&(this.i.update(0),this.M=window.setTimeout(this.c.bind(this),1E3/30))},this.M=window.setTimeout(this.c.bind(this),0)):(this.m=!1,this.c=function(a){!0===this.j&&(this.i.update(Math.floor(a)),this.M=this.f.requestAnimationFrame(this.c.bind(this)))},this.M=this.f.requestAnimationFrame(this.c.bind(this)))};
e.stop=function(){this.m?clearTimeout(this.M):(this.f.cancelAnimationFrame(this.M),this.M=null);this.j=!1};e.destroy=function(){this.stop();this.f=this.c=this.i=null};Object.defineProperty(ma.prototype,"running",{get:function(){return this.j}});function oa(a){this.i=a;this.c=!1;n.call(this,"History")}oa.prototype=Object.create(n.prototype);oa.prototype.constructor=oa;var Od={enabled:!0};e=oa.prototype;
e.Gh=function(){var a=this.i.story.scene,b={viewer:{uid:this.i.uid},scene:{uid:a.uid},locale:this.i.i18n.locale},d=window.history.state;null===d?window.history.replaceState(b,a.name,Pd(a)):d.scene.uid!==b.scene.uid&&window.history.pushState(b,a.name,Pd(a))};
e.Fh=function(){var a=window.history.state,b;null===a?b=!1:(b="undefined"!==typeof a.scene&&"string"===typeof a.scene.uid,b=!0===("undefined"!==typeof a.viewer&&"string"===typeof a.viewer.uid)&&!0===b);b&&(b=p.get(a.scene.uid),a.locale=this.i.i18n.locale,window.history.replaceState(a,b.name,Pd(b)))};function Pd(a){for(var b=/(?:#|&)(\w+)=(\w+)/g,d=window.location.hash,g=b.exec(d),h="";null!==g;)"uid"!==g[1]&&(h+="&"+g[1]+"="+g[2]),g=b.exec(d);return"#"+a.slug+"&uid="+a.uid+h}
e.Ij=function(a){if(null!==a.state){var b=p.get(a.state.viewer.uid);b.history.log("_onPopStateHandler");b.story.scene=a.state.scene.uid}};e.ia=function(a){this.f=B.Pa(Od,a);this.c="boolean"===typeof this.f.enabled?this.f.enabled:!0;!0===this.c&&(this.i.story.onSceneLoadStart.add(this.Gh,this),this.i.i18n.onLocaleChangeComplete.add(this.Fh,this),window.addEventListener("popstate",this.Ij,!1))};
e.destroy=function(){this.i.story.onSceneLoadStart.remove(this.Gh,this);this.i.i18n.onLocaleChangeComplete.remove(this.Fh,this);window.removeEventListener("popstate",this.Ij,!1);this.i=null;n.prototype.destroy.call(this)};Object.defineProperty(oa.prototype,"enabled",{get:function(){return this.c}});function na(a){this.i=a;this.c=null;this.f=-1;this.o="";this.u=!0;this.j=this.m=null;n.call(this,"LocaleManager");this.c=new Md}na.prototype=Object.create(n.prototype);e=na.prototype;e.constructor=na;
e.ia=function(a){this.u="boolean"===typeof a.enabled?a.enabled:!0;"undefined"!==typeof a.auto&&!0===a.auto&&""!==I.language?this.o=I.language:"string"===typeof a["default"]&&(this.o=a["default"]);if(!1===this.u)this.warn("$_LocaleManager: locale management is deactivated");else if("undefined"!==typeof a.locales){for(var b=!1,d=0,g=a.locales.length;d<g;d++){var h;var k=a.locales[d],l=Qd(this,k.uid);-1===l?(h=new Rd(this.i),h.f.add(this.kn,this),l=this.c.add(h)-1):h=this.c.get(l);h.ia(k);l===this.f||
this.o.toLowerCase()===k.uid.toLowerCase()?(h.eh(),-1===this.f&&Sd(this,l),h=!0):h=!1;!0===h&&(b=!0)}!1===b&&(-1===Qd(this,this.o)&&(this.o=a.locales[0].uid),Sd(this,Qd(this,a.locales[0].uid)))}};function Qd(a,b){for(var d,g=0,h=a.c.size;g<h;g++)if(d=a.c.get(g),d.uid.toLowerCase()===b.toLowerCase())return g;return-1}
function Sd(a,b){if(0>b||b>=a.c.size)throw"The locale you are trying to set doesn't exist";a.f===b?a.warn("$_LocaleManager: You're trying to set a locale that is already the actual locale"):(a.f=b,null!==a.m&&a.m.D(),a.c.get(a.f).eh())}e.kn=function(){null!==this.j&&this.j.D()};
e.fc=function(a,b){if(-1===this.f)return this.warn("$_LocaleManager: You trying to get a value with no locale selected!"),a;var d=this.c.get(this.f).fc(a,b),g=Qd(this,this.o);this.f!==g&&-1!==g&&d===a&&(d=this.c.get(g).fc(a,b));return d};e.Ab=function(a,b){if(-1===this.f)return!1;var d=this.c.get(this.f).Ab(a,b),g=Qd(this,this.o);this.f!==g&&-1!==g&&!1===d&&(d=this.c.get(g).Ab(a,b));return d};
e.destroy=function(){this.i=null;if(null!==this.c){for(var a=0,b=this.c.size;a<b;a++)this.c.get(a).destroy();this.c=null}null!==this.m&&(this.m.destroy(),this.m=null);null!==this.j&&(this.j.destroy(),this.j=null);n.prototype.destroy.call(this)};Object.defineProperty(na.prototype,"locale",{get:function(){return-1!==this.f?this.c.get(this.f).uid:""},set:function(a){var b;"number"===typeof a&&a<this.c.size?b=a:"string"===typeof a&&(b=Qd(this,a));Sd(this,b)}});
Object.defineProperty(na.prototype,"localeIndex",{get:function(){return this.f},set:function(a){"number"===typeof a&&a<this.c.size&&Sd(this,a)}});Object.defineProperty(na.prototype,"localeObject",{get:function(){return-1!==this.f?this.c.get(this.f):null}});Object.defineProperty(na.prototype,"locales",{get:function(){for(var a=[],b=0,d=this.c.size;b<d;b++)a.push(this.c.get(b).uid);return a}});
Object.defineProperty(na.prototype,"onLocaleChangeRequest",{get:function(){null===this.m&&(this.m=new q(this));return this.m}});Object.defineProperty(na.prototype,"onLocaleChangeComplete",{get:function(){null===this.j&&(this.j=new q(this));return this.j}});function Na(a,b,d,g){this.i=a;this.c=b;this.m=d;this.j=g;this.f=null;n.call(this,"LocaleString")}Na.prototype=Object.create(n.prototype);Na.prototype.constructor=Na;Na.prototype.destroy=function(){this.i=null;n.prototype.destroy.call(this)};
Object.defineProperty(Na.prototype,"key",{get:function(){return this.c},set:function(a){this.c=a}});Object.defineProperty(Na.prototype,"jsonKey",{get:function(){return this.m},set:function(a){this.m=a}});Object.defineProperty(Na.prototype,"value",{get:function(){if(""===this.i.i18n.locale)return"undefined"!==typeof this.j?this.j:this.c;this.f=this.i.i18n.fc(this.c,this.m);this.f===this.c&&"undefined"!==typeof this.j&&(this.f=this.j);return this.f}});
Object.defineProperty(Na.prototype,"loaded",{get:function(){var a=this.i.i18n.fc(this.c,this.m);return"undefined"!==typeof a&&a!==this.c}});function Rd(a){this.i=a;this.m="";this.f=this.j=this.c=null;n.call(this,"Locale");this.c=new Md;this.j=new q(this);this.f=new q(this)}Rd.prototype=Object.create(n.prototype);e=Rd.prototype;e.constructor=Rd;
e.ia=function(a){"string"===typeof a.uid&&(this.M=a.uid);""===this.m&&"string"===typeof a.name&&(this.m=a.name);if("undefined"!==typeof a.files)for(var b,d=0,g=a.files.length;d<g;d++)b=a.files[d],null===Td(this,b.key)&&(b.Jb=!1,b.loaded=!1,this.c.add(b))};e.eh=function(){if(!0===Ud(this))return this.f.D(),!0;for(var a,b=0,d=this.c.size;b<d;b++)a=this.c.get(b),!1===a.Jb&&!1===a.loaded&&!1===a.Jb&&!1===a.loaded&&(a.Jb=!0,this.i.load.json(a.key,a.url,this.hn,this))};
function Td(a,b){for(var d,g=0,h=a.c.size;g<h;g++)if(d=a.c.get(g),d.key===b)return d;return null}e.hn=function(a){a=Td(this,a.key);a.Jb=!1;a.loaded=!0;this.j.D();!0===Ud(this)&&this.f.D()};function Ud(a){for(var b,d=0,g=a.c.size;d<g;d++)if(b=a.c.get(d),!1===b.loaded)return!1;return!0}
e.fc=function(a,b){for(var d,g=0,h=this.c.size;g<h;g++)if(d=this.c.get(g),!0===this.i.cache.has(A.JSON,d.key)&&("undefined"===typeof b||b===d.key)&&(d=this.i.cache.get(A.JSON,d.key),"undefined"!==typeof d.data[a]))return d.data[a];"undefined"!==typeof b&&(this.warn("$_Locale: value not found into the specified JSON file, try to find it in all files."),this.fc(a));return a};
e.Ab=function(a,b){for(var d,g=0,h=this.c.size;g<h;g++)if(d=this.c.get(g),!0===this.i.cache.has(A.JSON,d.key)&&("undefined"===typeof b||b===d.key)&&(d=this.i.cache.get(A.JSON,d.key),"undefined"!==typeof d.data[a]))return!0;"undefined"!==typeof b&&(this.warn("$_Locale: key not found into the specified JSON file, try to find it in all files."),this.Ab(a));return!1};
e.Kh=function(a,b){for(var d,g=0,h=this.c.size;g<h;g++)if(d=this.c.get(g),!0===this.i.cache.has(A.JSON,d.key)&&("undefined"===typeof b||b===d.key)){d=this.i.cache.get(A.JSON,d.key);for(var k in d.data)if(d.data[k]===a)return k}"undefined"!==typeof b&&(this.warn("$_Locale: value not found into the specified JSON file, try to find it in all files."),this.Kh(a))};e.destroy=function(){this.c=this.i=null;this.j.destroy();this.j=null;this.f.destroy();this.f=null;n.prototype.destroy.call(this)};
Object.defineProperty(Rd.prototype,"name",{get:function(){return this.m}});function va(a){this.i=a;this.j=!0;this.o=this.m=this.f=this.c=null;n.call(this,"Keyboard");this.c=[];this.f=[];this.m=this.en.bind(this);this.o=this.fn.bind(this);window.addEventListener("keydown",this.m,!1);window.addEventListener("keyup",this.o,!1)}va.prototype=Object.create(n.prototype);e=va.prototype;e.constructor=va;
e.en=function(a){if(!1!==this.j){var b;b=a.keyCode;-1===this.f.indexOf(b)?(this.f.push(b),b=!0):b=!1;!0===b&&Vd(this,a)}};
e.fn=function(a){if(!1!==this.j){var b;b=this.f.indexOf(a.keyCode);-1!==b?(this.f.splice(b,1),b=!0):b=!1;if(!0===b)a:if(b=a.keyCode,!0!==this.dh(b)){b=this.Yg(b);for(var d,g=0,h=b.length;g<h;g++){d=b[g];for(var k=0,l=this.f.length;k<l;k++)if(d.xe(this.f[k]))break a;d.ml(a);k=0;for(l=this.f.length;k<l;k++)if(d.$g(this.f[k])){var u=new KeyboardEvent("keydown",{qp:this.f[k],ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,altKey:a.altKey});Vd(this,u)}}}}};
function Wd(a,b){if(null===a.c||!a.c.length)return-1;if("object"===typeof b&&"KeyBinding"===b.type)return a.c.indexOf(b);if("number"===typeof b)for(var d=0,g=a.c.length;d<g;d++)if(!0===a.c[d].xe(b))return d;return-1}function Vd(a,b){var d=b.keyCode;if(!0!==a.dh(d)){a=a.Yg(d);for(var g=0,h=a.length;g<h;g++)d=a[g],!1===d.pressed&&d.Ih(b)}}e.update=function(){for(var a,b=0,d=this.c.length;b<d;b++)if(a=this.c[b],!0===a.pressed){if(!0===a.hasToWaitToHold&&!1===a.downComplete)break;a.Wk()}};
e.Po=function(a){return-1!==this.f.indexOf(a)};e.dh=function(a){for(var b,d=0,g=this.c.length;d<g;d++)if(b=this.c[d],!0===b.pressed&&!0===b.$g(a))return!0;return!1};e.Ug=function(a){if("object"!==typeof a&&"KeyBinding"!==a.type)return!1;if(-1===Wd(this,a))return this.c.push(a),!0;this.warn("Trying to add a duplicate key binding on keyboard!");return!1};e.He=function(a){a=Wd(this,a);return-1!==a?(this.c[a].destroy(),this.c.splice(a,1),!0):!1};e.Fo=function(a){return-1!==Wd(this,a)};
e.Yg=function(a){for(var b=[],d=0,g=this.c.length;d<g;d++)!0===this.c[d].xe(a)&&b.push(this.c[d]);return b};e.destroy=function(){this.i=null;window.removeEventListener("keydown",this.m,!1);window.removeEventListener("keyup",this.o,!1);for(var a=this.c.length;a--;)this.He(this.c[a]);this.o=this.m=this.c=null;n.prototype.destroy.call(this)};Object.defineProperty(va.prototype,"enabled",{get:function(){return this.j},set:function(a){this.j=!!a}});
function P(a,b,d,g,h,k,l,u){this.i=a;this.F=b||[];this.o=d||null;this.C=g||null;this.u=h||null;this.A=k||null;this.f=l||this;this.L=u||"";this.fg=this.H=this.I=!1;this.G=this.B=this.Ud=0;this.m=this.j=this.c=null;n.call(this,"KeyBinding");if(!0===B.R(this.o,"string")||B.Ga(this.o,"string"))this.c=new Ia(this.i),this.c.c(this.o);if(!0===B.R(this.u,"string")||B.Ga(this.u,"string"))this.j=new Ia(this.i),this.j.c(this.u);if(!0===B.R(this.C,"string")||B.Ga(this.C,"string"))this.m=new Ia(this.i),this.m.c(this.C)}
P.prototype=Object.create(n.prototype);e=P.prototype;e.constructor=P;e.xe=function(a){return"number"===typeof this.F&&this.F===a?!0:"function"===typeof this.F.indexOf?-1!==this.F.indexOf(a):!1};e.$g=function(a){if(null!==this.A){if("number"===typeof this.A&&this.A===a)return!0;if("function"===typeof this.A.indexOf)return-1!==this.A.indexOf(a)}return!1};e.Ih=function(a){this.Ud++;this.H=!0;"function"===typeof this.o?this.o.call(this.f,this,a):null!==this.c&&this.c.D()};
e.jp=function(){this.I=!0;var a=this.Ud;return function(){a===this.Ud&&(this.fg=!0)}.bind(this)};e.ml=function(a){this.G++;this.fg=this.H=!1;"function"===typeof this.C?this.C.call(this.f,this,a):null!==this.m&&this.m.D()};e.Wk=function(){this.B++;"function"===typeof this.u?this.u.call(this.f,this):null!==this.j&&this.j.D()};
e.destroy=function(){this.f=this.A=this.u=this.C=this.o=this.F=null;null!==this.c&&(this.c.destroy(),this.c=null);null!==this.j&&(this.j.destroy(),this.j=null);null!==this.m&&(this.m.destroy(),this.m=null);n.prototype.destroy.call(this)};Object.defineProperty(P.prototype,"name",{get:function(){return this.L}});Object.defineProperty(P.prototype,"pressed",{get:function(){return this.H}});Object.defineProperty(P.prototype,"downCount",{get:function(){return this.Ud}});
Object.defineProperty(P.prototype,"upCount",{get:function(){return this.G}});Object.defineProperty(P.prototype,"holdCount",{get:function(){return this.B}});Object.defineProperty(P.prototype,"hasToWaitToHold",{get:function(){return this.I}});Object.defineProperty(P.prototype,"downComplete",{get:function(){return this.fg}});
function Xd(a){this.f=this.K=a;this.J=!1;this.c=null;this.j="";this.F=this.L=null;this.I=this.B=this.H=!1;this.m=null;this.P=200;this.G=this.O=1;this.X=Yd.LINEAR;this.C=this.u=this.A=this.o=null;n.call(this,"Drag");this.G=this.K.alpha}Xd.prototype=Object.create(n.prototype);e=Xd.prototype;e.constructor=Xd;
function Zd(a,b){null!==a.f&&(null!==a.f&&(a.f.pointer.onPanStart.remove(a.Dh,a),a.f.pointer.onPanMove.remove(a.Ch,a),a.f.pointer.onPanEnd.remove(a.Bh,a)),a.f=null);a.f=b;a.f.pointer.enabled=!0;a.f.pointer.onPanStart.add(a.Dh,a);a.f.pointer.onPanMove.add(a.Ch,a);a.f.pointer.onPanEnd.add(a.Bh,a)}
e.Dh=function(a){var b=a.data;a=a.data.srcEvent;"undefined"!==typeof a.touches&&"object"===typeof a.touches[0]&&(a=a.touches[0]);if(b=!0!==this.I&&b.target===this.f.dom){if(null===this.c)b=!0;else var b=this.K.globalOffset,d=this.c.globalOffset,g=b.left+this.K.pixelWidth>d.left+this.c.innerWidth,h=b.top<d.top,k=b.top+this.K.pixelHeight>d.top+this.c.innerHeight,b=!0===b.left<d.left||!0===g||!0===h||!0===k?!1:!0;b=!1!==b}b&&(this.H=!0,this.L={x:this.K.x,y:this.K.y},this.K.top=null,this.K.right=null,
this.K.bottom=null,this.K.left=null,this.F={x:a.pageX,y:a.pageY},this.O=this.K.alpha,this.K.alpha=this.G,null!==this.o&&this.o.D())};e.Bh=function(){!0===this.H&&(this.H=!1,null!==this.u&&this.u.D(),!0===this.B&&null!==this.m?(this.I=!0,this.m.jf({x:this.L.x,y:this.L.y},this.P,this.X).start()):this.K.alpha=this.O,this.F=this.L=null)};
e.Ch=function(a){if(!0===this.H){a=a.data.srcEvent;"undefined"!==typeof a.touches&&"object"===typeof a.touches[0]&&(a=a.touches[0]);var b={x:a.pageX,y:a.pageY};a=b.x-this.F.x;var d=b.y-this.F.y;this.F=b;if(null!==this.c){var b=this.K.globalOffset,g=this.K.parent.globalOffset,h=this.c.globalOffset;if(""===this.j||"x"===this.j)this.K.x=b.left+a<h.left?Math.abs(g.left-h.left):b.left+a+this.K.pixelWidth>h.left+this.c.innerWidth?Math.abs(g.left-h.left)+this.c.innerWidth-this.K.pixelWidth:this.K.x+a;if(""===
this.j||"y"===this.j)this.K.y=b.top+d<h.top?Math.abs(g.top-h.top):b.top+d+this.K.pixelHeight>h.top+this.c.innerHeight?Math.abs(g.top-h.top)+this.c.innerHeight-this.K.pixelHeight:this.K.y+d}else{if(""===this.j||"x"===this.j)this.K.x+=a;if(""===this.j||"y"===this.j)this.K.y+=d}null!==this.A&&this.A.D()}};e.Yj=function(){this.I=!1;this.K.alpha=this.O;null!==this.C&&this.C.D()};e.enable=function(){this.J=!0;Zd(this,this.f)};e.Eh=function(){this.J=!1};
e.destroy=function(){this.revert=!1;null!==this.o&&(this.o.destroy(),this.o=null);null!==this.A&&(this.A.destroy(),this.A=null);null!==this.u&&(this.u.destroy(),this.u=null);null!==this.C&&(this.C.destroy(),this.C=null);this.F=this.c=this.K=this.f=null;n.prototype.destroy.call(this)};Object.defineProperty(Xd.prototype,"enabled",{get:function(){return this.J},set:function(a){!0===!!a?this.enable():this.Eh()}});Object.defineProperty(Xd.prototype,"dragging",{get:function(){return this.H}});
Object.defineProperty(Xd.prototype,"handle",{get:function(){return this.f},set:function(a){Zd(this,a)}});Object.defineProperty(Xd.prototype,"constrain",{get:function(){return this.c},set:function(a){this.c=a}});Object.defineProperty(Xd.prototype,"progress",{get:function(){if(null!==this.c){var a=this.K.globalOffset,b=this.c.globalOffset;return{x:(a.left-b.left)/(this.c.innerWidth-this.K.pixelWidth),y:(a.top-b.top)/(this.c.innerHeight-this.K.pixelHeight)}}}});
Object.defineProperty(Xd.prototype,"axis",{get:function(){return this.j},set:function(a){"x"===a||"y"===a?this.j=a:this.j=""}});Object.defineProperty(Xd.prototype,"alpha",{get:function(){return this.G},set:function(a){"number"===typeof a&&(this.G=a)}});Object.defineProperty(Xd.prototype,"reverting",{get:function(){return this.I}});
Object.defineProperty(Xd.prototype,"revert",{get:function(){return this.B},set:function(a){this.B=!!a;!0===this.B&&null===this.m?(this.m=new Pb(this.K.viewer,this.K),this.m.onComplete.add(this.Yj,this),this.K.viewer.tween.add(this.m)):!1===this.B&&null!==this.m&&(this.K.viewer.tween.remove(this.m),this.m.onComplete.remove(this.Yj,this),this.m.destroy(),this.m=null)}});Object.defineProperty(Xd.prototype,"revertDuration",{get:function(){return this.P},set:function(a){"number"===typeof a&&(this.P=a)}});
Object.defineProperty(Xd.prototype,"revertEasing",{get:function(){return this.X},set:function(a){"function"===typeof a&&(this.X=a)}});Object.defineProperty(Xd.prototype,"onStart",{get:function(){null===this.o&&(this.o=new q(this.K));return this.o}});Object.defineProperty(Xd.prototype,"onDrag",{get:function(){null===this.A&&(this.A=new q(this.K));return this.A}});Object.defineProperty(Xd.prototype,"onStop",{get:function(){null===this.u&&(this.u=new q(this.K));return this.u}});
Object.defineProperty(Xd.prototype,"onRevert",{get:function(){null===this.C&&(this.C=new q(this.K));return this.C}});function U(a){this.K=a;this.c=!1;this.ha=$d.DEFAULT;this.ab=null;this.vd=[];this.ga=this.f=this.j=this.m=this.A=this.u=this.Z=this.O=this.P=this.X=this.B=this.G=this.I=this.C=this.F=this.H=this.L=this.J=this.o=this.N=this.W=this.S=this.fa=this.ea=this.qa=this.la=this.aa=this.va=this.U=null;n.call(this,"Pointer");this.ab=new Hammer.Manager(this.K.dom);this.ab.set({enable:!1})}
U.prototype=Object.create(n.prototype);e=U.prototype;e.constructor=U;function ae(a,b,d,g){for(var h,k=0,l=a.vd.length;k<l;k++)if(h=a.vd[k],h.event===b&&h.ro===d&&h.type===g)return k;return-1}function be(a,b,d,g){if(-1===ae(a,b,d,g))if(a.vd.push({event:b,ro:d,type:g}),g===V.Ta)a.K.dom.addEventListener(b,Hammer.bindFn(d,a));else if(g===V.oa)a.ab.on(b,Hammer.bindFn(d,a))}
function ce(a,b,d){return function(){var g=ae(this,a,b,d);-1!==g&&(this.vd.splice(g,1),d===V.Ta?this.K.dom.removeEventListener(a,b):d===V.oa&&this.ab.off(a))}}e.fk=function(a){null!==this.N&&!0===this.c&&this.N.D(a)};e.Sh=function(a){null!==this.o&&!0===this.c&&this.o.D(a)};e.$h=function(a){null!==this.J&&!0===this.c&&this.J.D(a)};e.Zh=function(a){null!==this.L&&!0===this.c&&this.L.D(a)};e.Vh=function(a){null!==this.H&&!0===this.c&&this.H.D(a)};e.Uh=function(a){null!==this.F&&!0===this.c&&this.F.D(a)};
e.Th=function(a){null!==this.C&&!0===this.c&&this.C.D(a)};e.Yh=function(a){null!==this.I&&!0===this.c&&this.I.D(a)};e.Xh=function(a){null!==this.G&&!0===this.c&&this.G.D(a)};e.Wh=function(a){null!==this.B&&!0===this.c&&this.B.D(a)};e.ak=function(a){null!==this.X&&!0===this.c&&this.X.D(a)};e.$j=function(a){null!==this.P&&!0===this.c&&this.P.D(a)};e.Zj=function(a){null!==this.O&&!0===this.c&&this.O.D(a)};e.ek=function(a){null!==this.Z&&!0===this.c&&this.Z.D(a)};
e.lj=function(a){null!==this.u&&!0===this.c&&this.u.D(a)};e.Cj=function(a){null!==this.A&&!0===this.c&&this.A.D(a)};e.Pj=function(a){null!==this.m&&!0===this.c&&this.m.D(a)};e.Oj=function(a){null!==this.j&&!0===this.c&&this.j.D(a)};e.Hj=function(a){null!==this.f&&!0===this.c&&this.f.D(a)};e.ai=function(a){null!==this.ga&&!0===this.c&&this.ga.D(a)};
e.enable=function(){!0===I.cssPointerEvents&&(this.K.dom.style.pointerEvents="auto");this.ab.set({enable:!0});null===this.U&&(this.U=new Hammer.Tap,this.ab.add(this.U));null===this.va&&(this.va=(new Hammer.Tap({event:U.events.Ed,taps:2})).recognizeWith(this.U),this.ab.add(this.va));null===this.aa&&(this.aa=(new Hammer.Press).recognizeWith(this.U),this.ab.add(this.aa));null===this.la&&(this.la=new Hammer.Pan,this.ab.add(this.la));null===this.qa&&(this.qa=new Hammer.Pinch,this.ab.add(this.qa));null===
this.ea&&(this.ea=(new Hammer.Rotate).recognizeWith(this.qa),this.ab.add(this.ea));null===this.fa&&(this.fa=(new Hammer.Swipe).recognizeWith(this.la),this.ab.add(this.fa));this.c=!0;null!==this.S&&this.S.D()};e.ef=function(){!0===I.cssPointerEvents&&(this.K.dom.style.pointerEvents="none");this.c=!1;this.ab.set({enable:!1});null!==this.W&&this.W.D()};
e.destroy=function(){this.ef();this.fa=this.ea=this.qa=this.la=this.aa=this.va=this.U=null;null!==this.S&&(this.S.destroy(),this.S=null);null!==this.W&&(this.W.destroy(),this.W=null);null!==this.N&&(this.N.destroy(),this.N=null);null!==this.o&&(this.o.destroy(),this.o=null);null!==this.J&&(this.J.destroy(),this.J=null);null!==this.L&&(this.L.destroy(),this.L=null);null!==this.H&&(this.H.destroy(),this.H=null);null!==this.F&&(this.F.destroy(),this.F=null);null!==this.C&&(this.C.destroy(),this.C=null);
null!==this.I&&(this.I.destroy(),this.I=null);null!==this.G&&(this.G.destroy(),this.G=null);null!==this.B&&(this.B.destroy(),this.B=null);null!==this.X&&(this.X.destroy(),this.X=null);null!==this.P&&(this.P.destroy(),this.P=null);null!==this.O&&(this.O.destroy(),this.O=null);null!==this.Z&&(this.Z.destroy(),this.Z=null);null!==this.u&&(this.u.destroy(),this.u=null);null!==this.A&&(this.A.destroy(),this.A=null);null!==this.m&&(this.m.destroy(),this.m=null);null!==this.j&&(this.j.destroy(),this.j=null);
null!==this.f&&(this.f.destroy(),this.f=null);null!==this.ga&&(this.ga.destroy(),this.ga=null);this.K=null;n.prototype.destroy.call(this)};Object.defineProperty(U.prototype,"enabled",{get:function(){return this.c},set:function(a){!0===!!a?this.enable():this.ef()}});Object.defineProperty(U.prototype,"cursor",{get:function(){return this.ha},set:function(a){this.K.dom.style.cursor=a;if(a!==this.K.dom.style.cursor||""===this.K.dom.style.cursor)this.K.dom.style.cursor="-webkit-"+a;this.ha=a}});
Object.defineProperty(U.prototype,"onEnable",{get:function(){null===this.S&&(this.S=new q(this));return this.S}});Object.defineProperty(U.prototype,"onDisable",{get:function(){null===this.W&&(this.W=new q(this));return this.W}});Object.defineProperty(U.prototype,"onTap",{get:function(){null===this.N&&(this.N=new q(this.K),this.N.onDestroy.ca(ce(U.events.Qf,this.fk,V.oa),this),be(this,U.events.Qf,this.fk,V.oa));return this.N}});Object.defineProperty(U.prototype,"onClick",{get:function(){return this.onTap}});
Object.defineProperty(U.prototype,"onDoubleTap",{get:function(){null===this.o&&(this.o=new q(this.K),this.o.onDestroy.ca(ce(U.events.Ed,this.Sh,V.oa),this),be(this,U.events.Ed,this.Sh,V.oa));return this.o}});Object.defineProperty(U.prototype,"onDoubleClick",{get:function(){return this.onDoubleTap}});Object.defineProperty(U.prototype,"onPressStart",{get:function(){null===this.J&&(this.J=new q(this.K),this.J.onDestroy.ca(ce(U.events.Jf,this.$h,V.oa),this),be(this,U.events.Jf,this.$h,V.oa));return this.J}});
Object.defineProperty(U.prototype,"onDown",{get:function(){return this.onPressStart}});Object.defineProperty(U.prototype,"onPressEnd",{get:function(){null===this.L&&(this.L=new q(this.K),this.L.onDestroy.ca(ce(U.events.If,this.Zh,V.oa),this),be(this,U.events.If,this.Zh,V.oa));return this.L}});Object.defineProperty(U.prototype,"onUp",{get:function(){return this.onPressEnd}});
Object.defineProperty(U.prototype,"onPanStart",{get:function(){null===this.H&&(this.H=new q(this.K),this.H.onDestroy.ca(ce(U.events.Df,this.Vh,V.oa),this),be(this,U.events.Df,this.Vh,V.oa));return this.H}});Object.defineProperty(U.prototype,"onPanMove",{get:function(){null===this.F&&(this.F=new q(this.K),this.F.onDestroy.ca(ce(U.events.Cf,this.Uh,V.oa),this),be(this,U.events.Cf,this.Uh,V.oa));return this.F}});
Object.defineProperty(U.prototype,"onPanEnd",{get:function(){null===this.C&&(this.C=new q(this.K),this.C.onDestroy.ca(ce(U.events.Bf,this.Th,V.oa),this),be(this,U.events.Bf,this.Th,V.oa));return this.C}});Object.defineProperty(U.prototype,"onPinchStart",{get:function(){null===this.I&&(this.I=new q(this.K),this.I.onDestroy.ca(ce(U.events.Hf,this.Yh,V.oa),this),be(this,U.events.Hf,this.Yh,V.oa));return this.I}});
Object.defineProperty(U.prototype,"onPinchMove",{get:function(){null===this.G&&(this.G=new q(this.K),this.G.onDestroy.ca(ce(U.events.Gf,this.Xh,V.oa),this),be(this,U.events.Gf,this.Xh,V.oa));return this.G}});Object.defineProperty(U.prototype,"onPinchEnd",{get:function(){null===this.B&&(this.B=new q(this.K),this.B.onDestroy.ca(ce(U.events.Ff,this.Wh,V.oa),this),be(this,U.events.Ff,this.Wh,V.oa));return this.B}});
Object.defineProperty(U.prototype,"onRotateStart",{get:function(){null===this.X&&(this.X=new q(this.K),this.X.onDestroy.ca(ce(U.events.Mf,this.ak,V.oa),this),be(this,U.events.Mf,this.ak,V.oa));return this.X}});Object.defineProperty(U.prototype,"onRotateMove",{get:function(){null===this.P&&(this.P=new q(this.K),this.P.onDestroy.ca(ce(U.events.Lf,this.$j,V.oa),this),be(this,U.events.Lf,this.$j,V.oa));return this.P}});
Object.defineProperty(U.prototype,"onRotateEnd",{get:function(){null===this.O&&(this.O=new q(this.K),this.O.onDestroy.ca(ce(U.events.Kf,this.Zj,V.oa),this),be(this,U.events.Kf,this.Zj,V.oa));return this.O}});Object.defineProperty(U.prototype,"onSwipe",{get:function(){null===this.Z&&(this.Z=new q(this.K),this.Z.onDestroy.ca(ce(U.events.Pf,this.ek,V.oa),this),be(this,U.events.Pf,this.ek,V.oa));return this.Z}});
Object.defineProperty(U.prototype,"onEnter",{get:function(){null===this.u&&(this.u=new q(this.K),this.u.onDestroy.ca(ce(U.events.pf,this.lj,V.Ta),this),be(this,U.events.pf,this.lj,V.Ta));return this.u}});Object.defineProperty(U.prototype,"onLeave",{get:function(){null===this.A&&(this.A=new q(this.K),this.A.onDestroy.ca(ce(U.events.zf,this.Cj,V.Ta),this),be(this,U.events.zf,this.Cj,V.Ta));return this.A}});
Object.defineProperty(U.prototype,"onOver",{get:function(){null===this.m&&(this.m=new q(this.K),this.m.onDestroy.ca(ce(U.events.Gc,this.Pj,V.Ta),this),be(this,U.events.Gc,this.Pj,V.Ta));return this.m}});Object.defineProperty(U.prototype,"onOut",{get:function(){null===this.j&&(this.j=new q(this.K),this.j.onDestroy.ca(ce(U.events.Xb,this.Oj,V.Ta),this),be(this,U.events.Xb,this.Oj,V.Ta));return this.j}});
Object.defineProperty(U.prototype,"onMove",{get:function(){null===this.f&&(this.f=new q(this.K),this.f.onDestroy.ca(ce(U.events.Af,this.Hj,V.Ta),this),be(this,U.events.Af,this.Hj,V.Ta));return this.f}});Object.defineProperty(U.prototype,"onWheel",{get:function(){null===this.ga&&(this.ga=new q(this.K),this.ga.onDestroy.ca(ce(U.events.Sf,this.ai,V.Ta),this),be(this,U.events.Sf,this.ai,V.Ta));return this.ga}});var V={Ta:0,oa:1};U.events={};U.events.Qf="tap";U.events.Ed="doubletap";U.events.Jf="press";
U.events.If="pressup";U.events.Df="panstart";U.events.Cf="panmove";U.events.Bf="panend";U.events.Hf="pinchstart";U.events.Gf="pinchmove";U.events.Ff="pinchend";U.events.Mf="rotatestart";U.events.Lf="rotatemove";U.events.Kf="rotateend";U.events.Pf="swipe";U.events.pf="mouseenter";U.events.zf="mouseleave";U.events.Gc="mouseover";U.events.Xb="mouseout";U.events.Af="mousemove";U.events.Sf="wheel";var $d={DEFAULT:"default",$a:"pointer",um:"grab",vm:"grabbing"};
function wa(a){this.i=a;this.j=!0;this.f=this.c=null;n.call(this,"Gyroscope");!1!==I.deviceOrientation&&(window.addEventListener("deviceorientation",this.Td.bind(this),!1),window.addEventListener("orientationchange",this.m.bind(this),!1))}wa.prototype=Object.create(n.prototype);wa.prototype.constructor=wa;wa.prototype.Td=function(a){null!==this.c&&!0===this.j&&this.c.D(a)};wa.prototype.m=function(){null!==this.f&&!0===this.j&&this.f.D()};
wa.prototype.destroy=function(){this.i=null;window.removeEventListener("deviceorientation",this.Td.bind(this),!1);window.removeEventListener("orientationchange",this.m.bind(this),!1);n.prototype.destroy.call(this)};Object.defineProperty(wa.prototype,"enabled",{get:function(){return this.j},set:function(a){this.j=!!a}});Object.defineProperty(wa.prototype,"onDeviceOrientationChange",{get:function(){null===this.c&&(this.c=new q(this));return this.c}});
Object.defineProperty(wa.prototype,"onScreenOrientationChange",{get:function(){null===this.f&&(this.f=new q(this));return this.f}});function ga(a){this.i=a;this.ba=[];this.f=[];this.j=this.c=null;n.call(this,"DisplayList");this.c=this.an.bind(this);document.addEventListener("fullscreenchange",this.c,!1);document.addEventListener("mozfullscreenchange",this.c,!1);document.addEventListener("webkitfullscreenchange",this.c,!1);document.addEventListener("MSFullscreenChange",this.c,!1)}ga.prototype=Object.create(n.prototype);
e=ga.prototype;e.constructor=ga;
e.an=function(){if(null!==document[I.fullscreenElement])for(var a,b=this.ba.length;b--;){if(a=this.ba[b],a.dom===document[I.fullscreenElement]){b=a=this.j=a;b.X={x:b.F,y:b.H,width:b.u,unitWidth:b.C,height:b.o,unitHeight:b.A,top:b.Wb,right:b.va,bottom:b.kc,left:b.la};b.F=0;b.H=0;b.u=screen.width;b.C="px";b.c.style.width=b.u+"px";b.o=screen.height;b.A="px";b.c.style.height=b.o+"px";b.Wb=null;b.va=null;b.kc=null;b.la=null;b.c.style.top="0";b.c.style.left="0";b.ua({property:"both"});null!==a.Tb&&a.Tb.D();
break}}else a=this.j,a.F=a.X.x,a.c.style.left=a.F+"px",a.H=a.X.y,a.c.style.top=a.H+"px",a.u=a.X.width,a.C=a.X.unitWidth,a.c.style.width=a.pixelWidth+"px",a.o=a.X.height,a.A=a.X.unitHeight,a.c.style.height=a.pixelHeight+"px",a.Wb=a.X.top,a.va=a.X.right,a.kc=a.X.bottom,a.la=a.X.left,a.ua({property:"both"}),a.X=null,null!==a.Ub&&a.Ub.D(),this.j=null};e.register=function(a,b){this.ba.push(a);!0===b&&this.f.push(a)};
e.unregister=function(a){this.ba.splice(this.ba.indexOf(a),1);a=this.f.indexOf(a);-1!==a&&this.f.splice(a,1)};e.update=function(){for(var a=0,b=this.f.length;a<b;a++)this.f[a].update()};
e.destroy=function(){for(var a=this.ba.length;a--;)this.ba[a].destroy();this.ba=[];this.f=[];document.removeEventListener("fullscreenchange",this.c,!1);document.removeEventListener("mozfullscreenchange",this.c,!1);document.removeEventListener("webkitfullscreenchange",this.c,!1);document.removeEventListener("MSFullscreenChange",this.c,!1);this.j=this.c=null};var de="DisplayObject DisplayObjectContainer Image TextField Button VideoDash VideoHTML5 Canvas Sprite Iframe".split(" ");
function T(a,b,d){this.i=a;this.c=b||null;this.m=null;this.qe=0;this.lf="";this.H=this.F=0;this.lc=!1;this.u=0;this.C="px";this.Qe=1;this.o=0;this.A="px";this.Pe=1;this.Kc=this.Ic=!1;this.la=this.kc=this.va=this.Wb=null;this.oe=1;this.ye=0;this.Hc=this.Jc=null;this.Zc="";this.ad="solid";this.O=0;this.$c="rgb(0, 0, 0)";this.Be=0;this.P=!1;this.Re="";this.mb=null;this.ja=!1;this.Z=!0;this.qa=null;this.ga=!1;this.Ub=this.Tb=this.cd=this.kd=this.Pb=this.Qb=this.L=this.Sb=this.Vb=this.V=this.X=null;n.call(this,
d||"DisplayObject");this.Ia()}T.prototype=Object.create(n.prototype);e=T.prototype;e.constructor=T;
e.Ia=function(){!0!==this.ja&&(ba(this),"undefined"===typeof this.c||null===this.c?this.c=document.createElement("div"):(this.u=ha.Qk(this.c),this.C=ha.Ok(this.c),this.o=ha.Pk(this.c),this.A=ha.Nk(this.c)),this.c.style.width=this.u+""+this.C,this.c.style.height=this.o+""+this.A,this.c.style.display="block",this.c.style.position="relative",this.c.style.margin="0px",this.c.style.padding="0px",this.c.style.top=this.H+"px",this.c.style.left=this.F+"px",this.c.style.overflow="hidden",this.c.style.boxSizing=
"border-box",!0===I.cssPointerEvents&&(this.c.style.pointerEvents="none"),this.c.style.M="none",this.c.style.webkitUserSelect="none",this.c.style.c="none",this.c.style.f="none",this.c.style.j="none",this.c.style.borderStyle=this.ad,this.c.style.borderWidth=this.O+"px",this.c.style.borderColor=this.$c,this.c.style.background=this.Zc,this.qa=[],"DisplayObject"===this.Va&&(this.i.display.register(this),ee(this),fe(this)))};function ee(a){!0!==a.ja&&(a.ja=!0,null!==a.V&&a.V.D())}
e.Zd=function(){null!==this.Pb&&this.Pb.D()};e.tc=function(){!1!==this.pd()&&null!==this.kd&&!0===this.visible&&this.kd.D()};e.$d=function(){null!==this.cd&&!1===this.visible&&this.cd.D()};e.wg=function(){null!==this.Sb&&this.Sb.D()};e.ua=function(a){ge(this);null!==this.Vb&&this.Vb.D(a)};function ge(a){null!==a.m&&a.u&&a.o&&(!0===a.Ic?a.horizontalCenter=!0:(a.left=a.la,a.right=a.va),!0===a.Kc?a.verticalCenter=!0:(a.top=a.Wb,a.bottom=a.kc))}
function he(a,b){var d=-1!==b.toLowerCase().indexOf("height")||"both"===b;!0===(-1!==b.toLowerCase().indexOf("width")||"both"===b)&&"%"===a.C&&(a.c.style.width=a.pixelWidth+"px",a.c.width=a.pixelWidth,a.ua({property:"width"}));!0===d&&"%"===a.A&&(a.c.style.height=a.pixelHeight+"px",a.c.height=a.pixelHeight,a.ua({property:"height"}))}function ie(a,b,d){a.qa.push({prop:b,value:d})}
function fe(a){a.Z=!1;if(null!==a.qa&&0!==a.qa.length){a.ga=!0;for(var b=0,d=a.qa.length;b<d;b++)a[a.qa[b].prop]=a.qa[b].value;a.ga=!1;a.qa=[]}}e.Ah=function(){this.c.style.display="block";this.tc()};e.Vk=function(){this.c.style.display="none";this.$d()};e.gp=function(){this.visible=!this.visible};
e.Kb=function(a){!0===a&&(this.P=!0,!0===this.Z&&ie(this,"maximized",!0));null!==this.m&&(this.lc=!1,a=this.pixelWidth,this.u=this.m.innerWidth,this.C="px",this.c.style.width=this.m.innerWidth+"px",this.c.width=this.m.innerWidth,a!==this.pixelWidth&&this.ua({property:"width"}),a=this.pixelHeight,this.o=this.m.innerHeight,this.A="px",this.c.style.height=this.m.innerHeight+"px",this.c.height=this.m.innerHeight,a!==this.pixelHeight&&this.ua({property:"height"}))};e.pd=function(){return ha.has(this.c)};
e.zh=function(a,b){null!==a&&"undefined"!==typeof a&&(this.width=a);null!==b&&"undefined"!==typeof b&&(this.height=b)};e.Ck=function(){if(!0===document[I.fullscreenEnabled]&&!1===this.od())this.c[I.requestFullscreen]()};e.Dk=function(){if(!0===document[I.fullscreenEnabled]&&!0===this.od())document[I.exitFullscreen]()};e.od=function(){return document[I.fullscreenElement]===this.c};
e.destroy=function(){!1!==this.nb&&(this.i.display.unregister(this),null!==this.m&&(this.m.removeChild(this,!1),this.m=null),null!==this.Jc&&(this.Jc.destroy(),this.Jc=null),null!==this.Hc&&(this.Hc.destroy(),this.Hc=null),null!==this.Vb&&(this.Vb.destroy(),this.Vb=null),null!==this.Sb&&(this.Sb.destroy(),this.Sb=null),null!==this.V&&(this.V.destroy(),this.V=null),null!==this.Qb&&(this.Qb.destroy(),this.Qb=null),null!==this.Pb&&(this.Pb.destroy(),this.Pb=null),null!==this.Tb&&(this.Tb.destroy(),this.Tb=
null),null!==this.Ub&&(this.Ub.destroy(),this.Ub=null),this.i=this.mb=this.c=null,n.prototype.destroy.call(this))};Object.defineProperty(T.prototype,"viewer",{get:function(){return this.i}});Object.defineProperty(T.prototype,"dom",{get:function(){return this.c}});Object.defineProperty(T.prototype,"id",{get:function(){return this.lf},set:function(a){this.lf=a;this.c.id=this.lf}});Object.defineProperty(T.prototype,"ready",{get:function(){return this.ja}});
Object.defineProperty(T.prototype,"parent",{get:function(){return this.m},set:function(a){"object"===typeof a&&!1!==Array.isArray(a.children)&&a!==this.m&&(this.m=a,this.c.style.position="absolute",!0===this.P&&this.Kb(this.P),he(this,"both"),ge(this),null!==this.Qb&&this.Qb.D(),!0===this.m.pd()&&(this.Zd(),this.tc()))}});Object.defineProperty(T.prototype,"visible",{get:function(){return"block"===this.c.style.display},set:function(a){"boolean"===typeof a&&(!0===a?this.Ah():this.Vk())}});
Object.defineProperty(T.prototype,"x",{get:function(){return this.F},set:function(a){if("number"===typeof a){var b=this.F;this.F=a;this.c.style.left=this.F+"px";null!==this.L&&b!==this.F&&this.L.D({property:"x"})}}});Object.defineProperty(T.prototype,"y",{get:function(){return this.H},set:function(a){if("number"===typeof a){var b=this.H;this.H=a;this.c.style.top=this.H+"px";null!==this.L&&b!==this.H&&this.L.D({property:"y"})}}});
Object.defineProperty(T.prototype,"keepRatio",{get:function(){return this.lc},set:function(a){"boolean"===typeof a&&a!==this.lc&&(this.lc=a)}});
Object.defineProperty(T.prototype,"width",{get:function(){return this.u},set:function(a){var b=this.u,d=this.C;if("string"===typeof a){var g=B.gh(a);if(null===g.value||null===g.Sc)throw"$_DisplayObject.width value "+a+" is incorrect";this.C=g.Sc;this.u=g.value}else if("number"===typeof a)this.u=a;else return;!0===this.Z?ie(this,"width",this.u):(this.P=!1,this.c.style.width=this.pixelWidth+"px",this.c.width=this.pixelWidth,b===this.u&&d===this.C&&!0!==this.ga||this.ua({property:"width"}))}});
Object.defineProperty(T.prototype,"pixelWidth",{get:function(){if("px"===this.C)return this.u;if("%"===this.C)return null!==this.m?this.m.innerWidth*this.u/100:0},set:function(a){if("number"===typeof a){var b=this.u,d=this.C;this.u=a;this.C="px";!0===this.Z?ie(this,"pixelWidth",a):(this.P=!1,this.c.style.width=this.pixelWidth+"px",this.c.width=this.pixelWidth,b===this.u&&"px"===d&&!0!==this.ga||this.ua({property:"pixelWidth"}))}}});
Object.defineProperty(T.prototype,"percentWidth",{get:function(){if("%"===this.C)return this.u;if("px"===this.C)return null!==this.m?this.u/this.m.innerWidth*100:0},set:function(a){if("number"===typeof a){var b=this.u,d=this.C;this.u=a;this.C="%";!0===this.Z?ie(this,"percentWidth",a):(this.P=!1,this.c.style.width=this.pixelWidth+"px",this.c.width=this.pixelWidth,b===this.u&&"%"===d&&!0!==this.ga||this.ua({property:"percentWidth"}))}}});
Object.defineProperty(T.prototype,"unitWidth",{get:function(){return this.C},set:function(a){if("string"===typeof a&&("px"===a||"%"===a)){var b=this.C;this.C=a;!0===this.Z?ie(this,"unitWidth",a):(this.P=!1,this.c.style.width=this.pixelWidth+"px",this.c.width=this.pixelWidth,b===this.C&&!0!==this.ga||this.ua({property:"unitWidth"}))}}});Object.defineProperty(T.prototype,"innerWidth",{get:function(){return this.pixelWidth-2*this.O}});
Object.defineProperty(T.prototype,"height",{get:function(){return this.o},set:function(a){var b=this.o,d=this.A;if("string"===typeof a){var g=B.gh(a);if(null===g.value||null===g.Sc)throw"$_DisplayObject.height value "+a+" is incorrect";this.A=g.Sc;this.o=g.value}else if("number"===typeof a)this.o=a;else return;!0===this.Z?ie(this,"height",this.o):(this.P=!1,this.c.style.height=this.pixelHeight+"px",this.c.height=this.pixelHeight,b===this.o&&d===this.A&&!0!==this.ga||this.ua({property:"height"}))}});
Object.defineProperty(T.prototype,"pixelHeight",{get:function(){if("px"===this.A)return this.o;if("%"===this.A)return null!==this.m?this.m.innerHeight*this.o/100:0},set:function(a){if("number"===typeof a){var b=this.o,d=this.A;this.o=a;this.A="px";!0===this.Z?ie(this,"pixelHeight",a):(this.P=!1,this.c.style.height=this.pixelHeight+"px",this.c.height=this.pixelHeight,b===this.o&&"px"===d&&!0!==this.ga||this.ua({property:"pixelHeight"}))}}});
Object.defineProperty(T.prototype,"percentHeight",{get:function(){if("%"===this.A)return this.o;if("px"===this.A)return null!==this.m?this.o/this.m.innerHeight*100:0},set:function(a){if("number"===typeof a){var b=this.o,d=this.A;this.o=a;this.A="%";!0===this.Z?ie(this,"percentHeight",a):(this.P=!1,this.c.style.height=this.pixelHeight+"px",this.c.height=this.pixelHeight,b===this.o&&"%"===d&&!0!==this.ga||this.ua({property:"percentHeight"}))}}});
Object.defineProperty(T.prototype,"unitHeight",{get:function(){return this.A},set:function(a){if("string"===typeof a){var b=this.A;this.A=a;!0===this.Z?ie(this,"unitHeight",a):(this.P=!1,this.c.style.height=this.pixelHeight+"px",this.c.height=this.pixelHeight,b===this.A&&!0!==this.ga||this.ua({property:"unitHeight"}))}}});Object.defineProperty(T.prototype,"innerHeight",{get:function(){return this.pixelHeight-2*this.O}});
Object.defineProperty(T.prototype,"maximized",{get:function(){return this.P},set:function(a){"boolean"===typeof a&&(this.P=a,!0===this.P&&this.Kb(!0))}});Object.defineProperty(T.prototype,"horizontalCenter",{get:function(){return this.Ic},set:function(a){"boolean"===typeof a&&(this.Ic=a,!0===this.Ic&&(this.va=this.la=null),null!==this.m&&(a=this.F,this.F=(this.m.innerWidth-this.pixelWidth)/2,this.c.style.left=this.F+"px",null!==this.L&&a!==this.F&&this.L.D({property:"x"})))}});
Object.defineProperty(T.prototype,"verticalCenter",{get:function(){return this.Kc},set:function(a){"boolean"===typeof a&&(this.Kc=a,!0===this.Kc&&(this.kc=this.Wb=null),null!==this.m&&(a=this.H,this.H=(this.m.innerHeight-this.pixelHeight)/2,this.c.style.top=this.H+"px",null!==this.L&&a!==this.H&&this.L.D({property:"y"})))}});
Object.defineProperty(T.prototype,"top",{get:function(){return this.Wb},set:function(a){if("number"===typeof a||null===a)if(this.Wb=a,this.Kc=!1,null!==this.m&&null!==this.Wb){var b=this.H;this.H=a;this.c.style.top=this.H+"px";null!==this.L&&b!==this.H&&this.L.D({property:"y"})}}});
Object.defineProperty(T.prototype,"right",{get:function(){return this.va},set:function(a){if("number"===typeof a||null===a)if(this.va=a,this.Ic=!1,null!==this.m&&null!==this.va){var b=this.F;this.F=this.m.innerWidth-this.pixelWidth-a;this.c.style.left=this.F+"px";null!==this.L&&b!==this.F&&this.L.D({property:"x"})}}});
Object.defineProperty(T.prototype,"bottom",{get:function(){return this.kc},set:function(a){if("number"===typeof a||null===a)if(this.kc=a,this.Kc=!1,null!==this.m&&null!==this.kc){var b=this.H;this.H=this.m.innerHeight-this.pixelHeight-a;this.c.style.top=this.H+"px";null!==this.L&&b!==this.H&&this.L.D({property:"y"})}}});
Object.defineProperty(T.prototype,"left",{get:function(){return this.la},set:function(a){if("number"===typeof a||null===a)if(this.la=a,this.Ic=!1,null!==this.m&&null!==this.la){var b=this.F;this.F=a;this.c.style.left=this.F+"px";null!==this.L&&b!==this.F&&this.L.D({property:"x"})}}});Object.defineProperty(T.prototype,"alpha",{get:function(){return this.oe},set:function(a){"number"===typeof a&&a!==this.oe&&(this.oe=a,this.c.style.opacity=this.oe)}});
Object.defineProperty(T.prototype,"rotation",{get:function(){return this.ye},set:function(a){"number"===typeof a&&a!==this.ye&&(this.ye=a,this.c.style.transform="rotate("+this.ye+"deg)")}});Object.defineProperty(T.prototype,"background",{get:function(){return this.Zc},set:function(a){"string"===typeof a&&a!==this.Zc&&(this.Zc=a,this.c.style.background=this.Zc)}});
Object.defineProperty(T.prototype,"borderStyle",{get:function(){return this.ad},set:function(a){-1!=="none dotted dashed solid double groove ridge inset outset".split(" ").indexOf(a)&&a!==this.ad&&(this.ad=a,!0===this.Z?ie(this,"borderStyle",a):this.c.style.borderStyle=this.ad)}});
Object.defineProperty(T.prototype,"borderWidth",{get:function(){return this.O},set:function(a){if("number"===typeof a){var b=this.O;this.O=a;!0===this.Z?ie(this,"borderWidth",a):(this.c.style.borderWidth=this.O+"px",b===this.O&&!0!==this.ga||this.wg())}}});Object.defineProperty(T.prototype,"borderColor",{get:function(){return this.$c},set:function(a){"string"===typeof a&&a!==this.$c&&(this.$c=a,this.c.style.borderColor=this.$c)}});
Object.defineProperty(T.prototype,"borderRadius",{get:function(){return this.Be},set:function(a){"number"!==typeof a&&"string"!==typeof a||a===this.Be||("string"===typeof a&&(a=parseInt(a,10)),isNaN(a)||(this.Be=a,this.c.style.borderRadius=this.Be+"px"))}});Object.defineProperty(T.prototype,"globalOffset",{get:function(){var a=this.c,b=0,d=0;do b+=a.offsetTop||0,d+=a.offsetLeft||0,a=a.offsetParent;while(a);return{top:b,left:d}}});
Object.defineProperty(T.prototype,"tooltip",{get:function(){return this.Re},set:function(a){"string"===typeof a&&a!==this.Re&&(this.Re=a,this.c.title=this.Re)}});Object.defineProperty(T.prototype,"index",{get:function(){return this.qe},set:function(a){"number"===typeof a&&a!==this.qe&&(this.qe=a,this.c.style.zIndex=this.qe)}});Object.defineProperty(T.prototype,"fullscreen",{set:function(a){"boolean"===typeof a&&(!0===a?this.Ck():this.Dk())}});
Object.defineProperty(T.prototype,"pointer",{get:function(){null===this.Jc&&(this.Jc=new U(this));return this.Jc}});Object.defineProperty(T.prototype,"drag",{get:function(){null===this.Hc&&(this.Hc=new Xd(this));return this.Hc}});Object.defineProperty(T.prototype,"onResize",{get:function(){null===this.Vb&&(this.Vb=new q(this));return this.Vb}});Object.defineProperty(T.prototype,"onBorderResize",{get:function(){null===this.Sb&&(this.Sb=new q(this));return this.Sb}});
Object.defineProperty(T.prototype,"onMove",{get:function(){null===this.L&&(this.L=new q(this));return this.L}});Object.defineProperty(T.prototype,"onReady",{get:function(){null===this.V&&(this.V=new q(this,!0));return this.V}});Object.defineProperty(T.prototype,"onAddedToParent",{get:function(){null===this.Qb&&(this.Qb=new q(this));return this.Qb}});Object.defineProperty(T.prototype,"onAddedToDom",{get:function(){null===this.Pb&&(this.Pb=new q(this));return this.Pb}});
Object.defineProperty(T.prototype,"onShow",{get:function(){null===this.kd&&(this.kd=new q(this));return this.kd}});Object.defineProperty(T.prototype,"onHide",{get:function(){null===this.cd&&(this.cd=new q(this));return this.cd}});Object.defineProperty(T.prototype,"onFullscreenEnter",{get:function(){null===this.Tb&&(this.Tb=new q(this));return this.Tb}});Object.defineProperty(T.prototype,"onFullscreenExit",{get:function(){null===this.Ub&&(this.Ub=new q(this));return this.Ub}});
function t(a,b,d,g){this.f=[];this.N="undefined"!==typeof g?g:null;this.B=null;this.hg=!1;this.fa="hidden";T.call(this,a,b,d||"DisplayObjectContainer")}t.prototype=Object.create(T.prototype);e=t.prototype;e.constructor=t;
e.Ia=function(){T.prototype.Ia.call(this);if("DisplayObjectContainer"===this.Va){var a=null!==this.N;!0===a&&(this.B={originalWidth:this.N.clientWidth,originalHeight:this.N.clientHeight,currentWidth:this.N.clientWidth,currentHeight:this.N.clientHeight,scaleWidth:1,scaleHeight:1,frameCount:0,frameInterval:10},this.u=this.B.currentWidth,this.c.style.width=this.pixelWidth+"px",this.o=this.B.currentHeight,this.c.style.height=this.pixelHeight+"px",this.c.style.position="absolute",this.N.appendChild(this.c));
this.i.display.register(this,a);ee(this);fe(this)}};e.ua=function(a){for(var b=0,d=this.f.length;b<d;b++){var g=this.f[b],h=a;!0===g.P&&g.Kb(g.P);he(g,h.property);ge(g)}T.prototype.ua.call(this,a)};e.Zd=function(){T.prototype.Zd.call(this);for(var a=0,b=this.f.length;a<b;a++)this.f[a].Zd()};e.tc=function(){T.prototype.tc.call(this);for(var a=0,b=this.f.length;a<b;a++)this.f[a].tc()};e.$d=function(){T.prototype.$d.call(this);for(var a=0,b=this.f.length;a<b;a++)this.f[a].$d()};
function je(a,b){if(null===a.f)return-1;for(var d=0,g=a.f.length;d<g;d++)if(a.f[d]===b)return d;return-1}
e.update=function(){this.B.frameCount++;if(!(this.B.frameCount<this.B.frameInterval)){this.B.frameCount=0;var a=this.N.clientWidth,b=this.N.clientHeight,d=!1;a!==this.B.currentWidth&&(this.B.currentWidth=a,this.B.scaleWidth=this.B.currentWidth/this.B.originalWidth,d=!0);b!==this.B.currentHeight&&(this.B.currentHeight=b,this.B.scaleHeight=this.B.currentHeight/this.B.scaleHeight,d=!0);!0===d&&this.zh(this.B.currentWidth,this.B.currentHeight)}};
e.ec=function(a){if(a===this)throw"You can't add a $_DisplayObjectContainer to itself!";var b=a;a instanceof Element&&(b=new T(a));this.c.appendChild(b.dom);b.parent=this;a=this.f.push(b)-1;null===b.index&&(b.index=a)};e.oo=function(a,b){var d=a;a instanceof Element&&(d=new T(a));this.c.appendChild(d.dom);d.parent=this;this.f.splice(b,0,d);d.index=b;b=0;for(d=this.f.length;b<d;b++)a=this.f[b],a.index=b};
e.Bk=function(){var a=this.f;if(0<a.length){this.hg=!0;for(var b=0,d=a.length;b<d;b++)if(!0===a[b].pd()&&!0===a[b].visible){var g=Math.max(a[b].width+a[b].x,a[b].width+a[b].left,a[b].width+a[b].right),h=Math.max(a[b].height+a[b].y,a[b].height+a[b].top,a[b].height+a[b].bottom);g>this.pixelWidth&&(this.width=g);h>this.pixelHeight&&(this.height=h)}}null!==this.parent&&!0===B.R(this.parent,"DisplayObjectContainer")&&!0===this.parent.hg&&this.parent.Bk()};
e.removeChild=function(a,b){a=je(this,a);-1!==a&&this.hh(a,b)};e.hh=function(a,b){if(0<=a&&a<this.f.length){var d=this.f[a];this.f.splice(a,1);this.c.removeChild(d.dom);"undefined"!==typeof b&&!0!==b||d.destroy();!0!==this.hg||this.f.length||(this.height=this.width=0)}};e.yh=function(a){for(var b=this.f.length;b--;)this.hh(b,a)};e.wl=function(a){return-1!==je(this,a)};e.destroy=function(){this.yh(!1);this.B=this.N=this.f=null;T.prototype.destroy.call(this)};
Object.defineProperty(t.prototype,"children",{get:function(){return this.f}});Object.defineProperty(t.prototype,"overflow",{get:function(){return this.fa},set:function(a){-1!==["hidden","visible","scroll"].indexOf(a)&&(this.fa=a,this.c.style.overflow=a)}});function ke(a,b){this.f=null;this.U=b||null;this.j="";this.N=!1;this.B="";this.S=this.J=null;this.W=!1;this.G=this.I=null;T.call(this,a,null,"Iframe")}ke.prototype=Object.create(T.prototype);e=ke.prototype;e.constructor=ke;
e.Ia=function(){T.prototype.Ia.call(this);this.S=this.gn.bind(this);this.f=document.createElement("iframe");this.f.style.width="100%";this.f.style.height="100%";this.f.style.border=0;this.f.style.overflow="hidden";this.f.addEventListener("load",this.S,null!==this&&!!this);this.f.setAttribute("allowFullScreen","");this.c.appendChild(this.f);null!==this.U&&this.load(this.U);this.i.display.register(this);ee(this);fe(this)};e.Ze=function(){!0===this.i.i18n.Ab(this.B)&&le(this,this.J.value)};
function le(a,b){a.W=!1;null!==a.I&&a.I.D();a.j=b;a.f.src=a.j}e.gn=function(){""!==this.j&&(this.W=!0,null!==this.G&&this.G.D())};function me(a){!1===a.i.i18n.onLocaleChangeComplete.has(a.Ze,a)&&a.i.i18n.onLocaleChangeComplete.add(a.Ze,a)}
e.load=function(a){"object"===typeof a&&null!==a?(this.N=a.i18n||!1,!0===this.N?(this.j="",this.B=a.url):this.j=a.url):(this.N=!1,this.j="","string"===typeof a&&(this.j=a));var b;!0===this.N&&"string"===typeof this.B&&""!==this.B?(this.J=new Na(this.i,this.B),me(this),b=this.J.value):"string"===typeof this.j&&""!==this.j&&(b=this.j);"undefined"!==typeof b&&le(this,b)};
e.destroy=function(){!1!==this.nb&&(null!==this.J&&(this.J.destroy(),this.J=null,this.i.i18n.onLocaleChangeComplete.remove(this.Ze,this)),null!==this.I&&(this.I.destroy(),this.I=null),null!==this.G&&(this.G.destroy(),this.G=null),this.S=this.f=null,T.prototype.destroy.call(this))};
Object.defineProperty(ke.prototype,"i18nUrl",{get:function(){return this.B},set:function(a){if("string"===typeof a){this.N=!0;this.B=a;var b;""!==this.B&&(this.J=new Na(this.i,this.B),me(this),b=this.J.value);"undefined"!==typeof b&&le(this,b)}}});Object.defineProperty(ke.prototype,"url",{get:function(){return this.j},set:function(a){"string"===typeof a&&(this.N=!1,le(this,a))}});Object.defineProperty(ke.prototype,"loaded",{get:function(){return this.W}});
Object.defineProperty(ke.prototype,"onLoadStart",{get:function(){null===this.I&&(this.I=new q(this));return this.I}});Object.defineProperty(ke.prototype,"onLoadComplete",{get:function(){null===this.G&&(this.G=new q(this));return this.G}});
function S(a,b){this.fa=b;this.G="";this.j=!1;this.I=null;this.U="";this.ea="rgb(0, 0, 0)";this.W=this.S=!0;this.Aa=0;this.N=this.Ba=!1;this.aa=null;this.Oa=!1;this.za=this.xa=this.ya=this.wa=this.ta=this.sa=this.ra=this.Ma=this.Ha=this.La=this.Ka=this.Fa=this.Ea="";this.ka=this.na=this.pa=this.f=this.Ca=null;this.ha=!1;this.B=this.J=null;T.call(this,a,null,"TextField")}S.prototype=Object.create(T.prototype);e=S.prototype;e.constructor=S;
e.Ia=function(){T.prototype.Ia.call(this);this.pa=this.Vm.bind(this);this.na=this.Fm.bind(this);this.ka=this.Em.bind(this);this.Ca=document.createElement("span");this.c.appendChild(this.Ca);"undefined"!==typeof this.fa&&null!==this.fa&&this.load(this.fa);this.i.display.register(this);ee(this);fe(this)};
e.ua=function(a){var b=a.property;-1!==b.toLowerCase().indexOf("width")&&"autoWidth"!==b&&(this.S=!1);-1!==b.toLowerCase().indexOf("height")&&"autoHeight"!==b&&(this.W=!1);T.prototype.ua.call(this,a)};e.tc=function(){ne(this);T.prototype.tc.call(this)};function oe(a,b){b!==a.U&&(a.U=String(b),a.Ca.innerHTML=b,ne(a),ge(a),null!==a.J&&a.J.D());if(!1===a.j||!0===a.j&&!0===a.I.loaded)a.ha=!0,null!==a.B&&a.B.D()}
function ne(a){if(!1!==a.pd()){if(!0===a.S){var b=a.pixelWidth;a.c.style.width="";var d=a.c.offsetWidth;0<d&&(d+=1);a.u=d;a.C="px";a.c.style.width=a.u+"px";b!==a.u&&a.ua({property:"autoWidth"})}!0===a.W&&(b=a.pixelHeight,a.c.style.height="",d=a.c.offsetHeight,0<d&&(d+=1),a.o=d,a.A="px",a.c.style.height=a.o+"px",b!==a.o&&a.ua({property:"autoHeight"}))}}function pe(a){null===a.I&&(a.I=new Na(a.i,a.G));oe(a,a.I.value)}
function qe(a){!1===a.i.i18n.onLocaleChangeComplete.has(a.gf,a)&&a.i.i18n.onLocaleChangeComplete.add(a.gf,a)}e.gf=function(){!0===this.i.i18n.Ab(this.G)&&(this.value=this.I.value)};
e.Vm=function(){!0===this.N&&null===this.f&&(this.f=document.createElement("textarea"),this.f.style.position="absolute",this.f.style.top="0px",this.f.style.left="0px",this.f.style.width="100%",this.f.style.height="100%",this.f.style.resize="none",this.f.style.margin="0px",this.f.style.padding="0px",this.f.style.overflowX="hidden",this.f.style.overflowY="auto",this.f.style.boxSizing="border-box",this.f.value=this.U,this.f.addEventListener("input",this.na,!1),this.f.addEventListener("blur",this.ka,
!1),this.c.appendChild(this.f),this.f.focus())};e.Fm=function(){oe(this,this.f.value)};e.Em=function(){this.Zf()};e.Zf=function(){null!==this.f&&(this.f.removeEventListener("input",this.na,!1),this.f.removeEventListener("blur",this.ka,!1),this.c.removeChild(this.f),this.f=null)};
e.load=function(a){this.ha=!1;"object"===typeof a&&null!==a?(a.color&&(this.color=a.color),a.font&&(this.font=a.font),a.fontFamily&&(this.fontFamily=a.fontFamily),a.fontWeight&&(this.fontWeight=a.fontWeight),a.fontSize&&(this.fontSize=a.fontSize),a.fontStyle&&(this.fontStyle=a.fontStyle),a.fontVariant&&(this.fontVariant=a.fontVariant),a.textAlign&&(this.textAlign=a.textAlign),a.textShadow&&(this.textShadow=a.textShadow),a.textDecoration&&(this.textDecoration=a.textDecoration),a.textOverflow&&(this.textOverflow=
a.textOverflow),a.textTransform&&(this.textTransform=a.textTransform),a.whiteSpace&&(this.whiteSpace=a.whiteSpace),a.wordWrap&&(this.wordWrap=a.wordWrap),a.lineHeight&&(this.lineHeight=a.lineHeight),a.autoWidth&&(this.autoWidth=a.autoWidth),a.autoHeight&&(this.autoHeight=a.autoHeight),a.padding&&(this.padding=a.padding),a.selectable&&(this.selectable=a.selectable),a.editable&&(this.editable=a.editable),this.j=a.i18n||!1,!0===this.j?this.G=a.value:this.value=a.value):"string"===typeof a&&(this.j=!1,
this.value=a);!0===this.j&&"string"===typeof this.G&&""!==this.G&&(pe(this),qe(this))};e.destroy=function(){!1!==this.nb&&(null!==this.I&&(this.I.destroy(),this.I=null,this.i.i18n.onLocaleChangeComplete.remove(this.gf,this)),this.Zf(),null!==this.B&&(this.B.destroy(),this.B=null),null!==this.J&&(this.J.destroy(),this.J=null),T.prototype.destroy.call(this))};
Object.defineProperty(S.prototype,"i18nValue",{get:function(){return this.G},set:function(a){"string"===typeof a&&(""===this.G&&qe(this),this.j=!0,this.G=a,pe(this))}});Object.defineProperty(S.prototype,"i18n",{get:function(){return this.j}});Object.defineProperty(S.prototype,"value",{get:function(){return this.U},set:function(a){if("string"===typeof a||"number"===typeof a)this.j=!1,oe(this,a)}});
Object.defineProperty(S.prototype,"color",{get:function(){return this.ea},set:function(a){"string"===typeof a&&(this.ea=a,this.c.style.color=this.ea)}});Object.defineProperty(S.prototype,"font",{get:function(){return this.ra},set:function(a){"string"!==typeof a||2>a.split(" ").toString().length||(this.ra=a.replace(/"/g,'"'),this.c.style.font=this.ra)}});
Object.defineProperty(S.prototype,"fontFamily",{get:function(){return this.sa},set:function(a){"string"===typeof a&&(this.sa=a.replace(/"/g,'"'),this.c.style.fontFamily=this.sa,ne(this))}});Object.defineProperty(S.prototype,"fontSize",{get:function(){return this.ta},set:function(a){if("number"===typeof a||"string"===typeof a)"number"===typeof a&&(a+="px"),this.ta=a,this.c.style.fontSize=this.ta}});
Object.defineProperty(S.prototype,"fontStyle",{get:function(){return this.wa},set:function(a){"string"===typeof a&&(this.wa=a,this.c.style.fontStyle=this.wa)}});Object.defineProperty(S.prototype,"fontWeight",{get:function(){return this.ya},set:function(a){if("string"===typeof a||"number"===typeof a)this.ya=a.toString(),this.c.style.fontWeight=this.ya}});
Object.defineProperty(S.prototype,"fontVariant",{get:function(){return this.xa},set:function(a){"string"===typeof a&&(this.xa=a,this.c.style.fontVariant=this.xa)}});Object.defineProperty(S.prototype,"lineHeight",{get:function(){return this.za},set:function(a){if("number"===typeof a||"string"===typeof a)"number"===typeof a&&(a+="px"),this.za=a,this.c.style.lineHeight=this.za}});
Object.defineProperty(S.prototype,"textAlign",{get:function(){return this.Ea},set:function(a){"string"===typeof a&&(this.Ea=a,this.c.style.textAlign=this.Ea)}});Object.defineProperty(S.prototype,"textShadow",{get:function(){return this.Ka},set:function(a){"string"===typeof a&&(this.Ka=a,this.c.style.textShadow=this.Ka)}});Object.defineProperty(S.prototype,"textDecoration",{get:function(){return this.Fa},set:function(a){"string"===typeof a&&(this.Fa=a,this.c.style.textDecoration=this.Fa)}});
Object.defineProperty(S.prototype,"textTransform",{get:function(){return this.La},set:function(a){"string"===typeof a&&(this.La=a,this.c.style.textTransform=this.La)}});Object.defineProperty(S.prototype,"autoWidth",{get:function(){return this.S},set:function(a){"boolean"===typeof a&&(this.S=a,ne(this))}});Object.defineProperty(S.prototype,"autoHeight",{get:function(){return this.W},set:function(a){"boolean"===typeof a&&(this.W=a,ne(this))}});
Object.defineProperty(S.prototype,"padding",{get:function(){return this.Aa},set:function(a){if("number"===typeof a||"string"===typeof a)this.Aa=a="string"===typeof a?a.split(" ",4).toString().replace(/,/g," "):a+"px",this.c.style.padding=this.Aa}});
Object.defineProperty(S.prototype,"selectable",{get:function(){return this.Ba},set:function(a){"boolean"===typeof a&&(this.Ba=a,!1===this.Ba?(!1===this.N&&!0===this.Qa&&(this.Qa=this.pointer.enabled=!1),this.c.style.M="none",this.c.style.webkitUserSelect="none",this.c.style.c="none",this.c.style.f="none",this.c.style.j="none"):(!1===this.pointer.enabled&&(this.Qa=this.pointer.enabled=!0),this.c.style.M="text",this.c.style.webkitUserSelect="text",this.c.style.c="text",this.c.style.f="text",this.c.style.j=
"inherit"))}});Object.defineProperty(S.prototype,"wordWrap",{get:function(){return this.Oa},set:function(a){"boolean"===typeof a&&(this.Oa=a,this.c.style.wordWrap=!1===this.Oa?"normal":"break-word")}});Object.defineProperty(S.prototype,"whiteSpace",{get:function(){return this.Ma},set:function(a){"string"===typeof a&&(this.Ma=a,this.c.style.whiteSpace=this.Ma)}});
Object.defineProperty(S.prototype,"textOverflow",{get:function(){return this.Ha},set:function(a){"string"===typeof a&&(this.Ha=a,this.c.style.textOverflow=this.Ha)}});
Object.defineProperty(S.prototype,"editable",{get:function(){return this.N},set:function(a){a=!!a;this.N!==a&&(this.N=a,!1===this.N?(this.c.removeEventListener("click",this.pa,null!==this&&!!this),this.i.keyboard.He(this.aa),this.aa=null,this.pointer.enabled=!0,this.c.style.cursor="text"):(this.c.addEventListener("click",this.pa,null!==this&&!!this),this.aa=new P(this.i,[13,27],this.Zf,null,null,null,this),this.i.keyboard.Ug(this.aa),this.c.style.cursor="default"))}});
Object.defineProperty(S.prototype,"loaded",{get:function(){return this.ha}});Object.defineProperty(S.prototype,"onLoadComplete",{get:function(){null===this.B&&(this.B=new q(this));return this.B}});Object.defineProperty(S.prototype,"onValueChange",{get:function(){null===this.J&&(this.J=new q(this));return this.J}});function Nd(a,b){this.ha=b||null;this.G={};this.aa=this.I=this.W="";this.j=this.J=null;this.S=this.U=!1;this.ea=0;t.call(this,a,null,"Button")}Nd.prototype=Object.create(t.prototype);
Nd.prototype.constructor=Nd;Nd.states={Xb:"out",Gc:"over",tm:"down"};e=Nd.prototype;
e.Ia=function(){t.prototype.Ia.call(this);this.I=Nd.states.Xb;this.J=new Ua(this.i);this.J.onLoadComplete.add(this.Wd,this);this.J.onResize.add(this.Xd,this);this.ec(this.J);this.j=new S(this.i);this.j.onLoadComplete.add(this.Wd,this);this.j.onResize.add(this.Xd,this);this.j.autoWidth=!0;this.j.autoHeight=!0;this.ec(this.j);this.pointer.enabled=!0;this.pointer.cursor=$d.$a;this.pointer.onEnter.add(this.qn,this);this.pointer.onLeave.add(this.rn,this);this.pointer.onPressStart.add(this.tl,this);this.pointer.onPressEnd.add(this.sl,
this);this.i.display.register(this);ee(this);fe(this);this.i.i18n.onLocaleChangeComplete.add(this.nh,this);this.load(this.ha)};e.qn=function(){re(this,Nd.states.Gc)};e.rn=function(){re(this,Nd.states.Xb)};e.tl=function(){re(this,Nd.states.tm)};e.sl=function(){re(this,Nd.states.Gc)};e.nh=function(){re(this,this.I)};e.Wd=function(){this.ea++;2===this.ea&&(se(this),te(this))};e.Xd=function(){se(this);te(this)};function ue(a,b){a.W=b;re(a,a.I)}
function re(a,b){a.I=b;b=a.G[a.W];a.ea=0;var d=b.Rk(a.I);a.background=b.Ra("background",a.I);a.borderStyle=b.Ra("borderStyle",a.I);a.borderColor=b.Ra("borderColor",a.I);a.borderRadius=b.Ra("borderRadius",a.I);a.borderWidth=b.Ra("borderWidth",a.I);a.U=b.Ra("autoWidth",a.I);a.S=b.Ra("autoHeight",a.I);var g=b.Ra("label",a.I);"undefined"!==typeof g&&a.j.load(g);!0===d&&a.J.load(b.Ra("image",a.I))}
function se(a){var b=a.G[a.W],d=b.Ra("align",a.I),g=b.Ra("padding",a.I),h=b.Ra("spacing",a.I);"label"===b.Ra("first",a.I)?(b=a.j,a=a.J):(b=a.J,a=a.j);switch(d){case "left":b.left=g;b.verticalCenter=!0;a.left=b.left+h+b.pixelWidth;a.verticalCenter=!0;break;case "right":b.right=g;b.verticalCenter=!0;a.right=b.right+h+b.pixelWidth;a.verticalCenter=!0;break;case "top":b.top=g;b.horizontalCenter=!0;a.top=b.top+b.pixelHeight+h;a.horizontalCenter=!0;break;case "bottom":b.bottom=g;b.horizontalCenter=!0;a.bottom=
b.bottom+h+b.pixelHeight;a.horizontalCenter=!0;break;default:b.horizontalCenter=!0,b.verticalCenter=!0,a.horizontalCenter=!0,a.verticalCenter=!0}}
function te(a){if(!1!==a.U||!1!==a.S){var b=a.G[a.W].Ra("padding",a.I);if(!0===a.U){var d=a.pixelWidth;a.u=Math.max(a.j.x+a.j.pixelWidth,a.J.x+a.J.pixelWidth)-Math.min(a.j.x,a.J.x)+2*b+2*a.O;a.C="px";a.c.style.width=a.u+"px";d!==a.pixelWidth&&a.ua({property:"autoWidth"})}!0===a.S&&(d=a.pixelHeight,a.o=Math.max(a.j.y+a.j.pixelHeight,a.J.y+a.J.pixelHeight)-Math.min(a.j.y,a.J.y)+2*b+2*a.O,a.A="px",a.c.style.height=a.o+"px",d!==a.pixelHeight&&a.ua({property:"autoHeight"}))}}
e.load=function(a){if("undefined"!==typeof a&&null!==a){if(!0===B.Ga(a.skins,"ButtonSkin"))for(var b=0,d=a.skins.length;b<d;b++)this.vc(a.skins[b]);else if("object"===typeof a.skins&&0<a.skins.length)for(var d=0,g=a.skins.length;d<g;d++)b=new ve(a.skins[d].name,a.skins[d].states),this.vc(b);B.R(a.skin,"ButtonSkin")?this.vc(a.skin):"object"===typeof a.skin&&(b=new ve(a.skin.name,a.skin.states),this.vc(b));!0===B.R(a["default"],"string")&&!0===this.Sk(a["default"])&&(this.aa=a["default"])}a=this.G||
{};Object.keys(a).length||(b=new ve("default"),this.vc(b));""===this.aa&&(this.aa=this.G[Object.keys(a)[0]].name);ue(this,this.aa)};e.vc=function(a,b){if(!1===B.R(a,"ButtonSkin"))throw"$_Button: Invalid button skin!";a.kh(Nd.states.Xb);this.G[a.name]=a;!0===b&&ue(this,a.name)};e.jl=function(a){"string"===typeof a&&!0===B.R(this.G[a],"ButtonSkin")?ue(this,a):!0===B.R(a,"ButtonSkin")&&(this.G[a.name]===a?ue(this,a.name):"undefined"!==typeof this.G[a.name]&&null!==this.G[a.name]||this.vc(a,!0))};
e.Sk=function(a){return"undefined"!==typeof this.G[a]};e.hp=function(){this.G[this.W].kh(Nd.states.Xb);ue(this,this.W)};
e.destroy=function(){this.i.i18n.onLocaleChangeComplete.remove(this.nh,this);if("undefined"!==typeof this.G&&0<this.G.length)for(var a in this.G)this.G.hasOwnProperty(a)&&this.G[a].destroy();this.G={};null!==this.J&&(this.J.onLoadComplete.remove(this.Wd,this),this.J.onResize.remove(this.Xd,this),this.removeChild(this.J,!0),this.J=null);null!==this.j&&(this.j.onLoadComplete.remove(this.Wd,this),this.j.onResize.remove(this.Xd,this),this.removeChild(this.j,!0),this.j=null);t.prototype.destroy.call(this)};
Object.defineProperty(Nd.prototype,"skins",{get:function(){return this.G}});Object.defineProperty(Nd.prototype,"skin",{get:function(){return this.G[this.W]},set:function(a){this.jl(a)}});Object.defineProperty(Nd.prototype,"autoWidth",{get:function(){return this.U},set:function(a){"boolean"===typeof a&&(this.U=a,te(this))}});Object.defineProperty(Nd.prototype,"autoHeight",{get:function(){return this.S},set:function(a){"boolean"===typeof a&&(this.S=a,te(this))}});
function ve(a,b){this.j=a||"";this.f=B.Pa(we,{});this.c=B.Pa(b||{},{out:{},over:{},down:{}});n.call(this,"ButtonSkin")}ve.prototype=Object.create(n.prototype);ve.prototype.constructor=ve;
var xe={key:"",url:"",i18n:!1,keepRatio:!0,maximized:!1,alpha:1},ye={value:"",i18n:!1,color:"",fontFamily:"",fontWeight:""},ze={name:"",background:"",borderStyle:"solid",borderColor:"",borderRadius:0,borderWidth:0,autoWidth:!0,autoHeight:!0,align:"center",padding:0,spacing:0,first:"image",image:xe,label:ye},Ae={key:"",url:"",i18n:!1,keepRatio:!0,maximized:!1,alpha:1},Be={value:"Button",i18n:!1,color:"",fontFamily:"",fontWeight:""},we={name:"default",background:"#eee",borderStyle:"solid",borderColor:"#555",
borderRadius:5,borderWidth:2,autoWidth:!0,autoHeight:!0,align:"left",padding:5,spacing:0,first:"image",image:Ae,label:Be};ve.prototype.kh=function(a){"undefined"!==typeof this.c[a]&&(this.f=this.c[a])};ve.prototype.Ra=function(a,b){b=B.ve(this.c,b+"."+a,B.ve(this.f,a,B.ve(ze,a)));"object"===typeof b&&(b=B.Pa(this.f[a],b));return b};ve.prototype.Rk=function(a){a=this.Ra("image",a);return"undefined"!==typeof a&&"string"===typeof a.url&&""!==a.url};
ve.prototype.m=function(a){a=this.Ra("label",a);return"undefined"!==typeof a&&"string"===typeof a.value&&""!==a.value};Object.defineProperty(ve.prototype,"name",{get:function(){return this.j}});Object.defineProperty(ve.prototype,"default",{get:function(){return this.f},set:function(a){this.f=a}});Object.defineProperty(ve.prototype,"out",{get:function(){return this.c.out},set:function(a){this.c.out=a}});
Object.defineProperty(ve.prototype,"over",{get:function(){return this.c.over},set:function(a){this.c.over=a}});Object.defineProperty(ve.prototype,"down",{get:function(){return this.c.down},set:function(a){this.c.down=a}});function ia(a){T.call(this,a,document.createElement("canvas"),"Canvas")}ia.prototype=Object.create(T.prototype);ia.prototype.constructor=ia;ia.prototype.Ia=function(){T.prototype.Ia.call(this);this.i.display.register(this);ee(this);fe(this)};
Object.defineProperty(ia.prototype,"context2D",{get:function(){return this.c.getContext("2d")}});Object.defineProperty(ia.prototype,"context3D",{get:function(){return this.c.getContext("webgl")}});Object.defineProperty(ia.prototype,"element",{get:function(){return this.c}});
function Ua(a,b,d){this.sa=b||null;this.ha=this.J="";this.aa=!1;this.ea=this.ta="";this.j=this.S=null;this.fa=!1;this.U=this.f=null;this.na="";this.N=this.ka=!1;this.pa=this.ra=!0;this.G="";this.I=this.W=this.Da=null;T.call(this,a,null,d||"Image")}Ua.prototype=Object.create(T.prototype);Ua.prototype.constructor=Ua;var zc={CSS:"css",Rb:"canvas"},Ce=zc.Rb;e=Ua.prototype;e.Ia=function(){T.prototype.Ia.call(this);this.lc=!0;null!==this.sa&&this.load(this.sa);this.i.display.register(this);ee(this)};
e.ua=function(a){var b=a.property;-1!==b.toLowerCase().indexOf("width")&&"autoWidth"!==b&&(this.ra=!1);-1!==b.toLowerCase().indexOf("height")&&"autoHeight"!==b&&(this.pa=!1);null!==this.j&&(this.G===zc.CSS?(De(this),Ee(this)):this.G===zc.Rb&&null!==this.f&&Fe(this,this.f),!0===this.lc&&(-1!==b.toLowerCase().indexOf("width")?(b=this.pixelWidth/this.f.w,b!==this.Qe&&(this.Qe=b,!0===this.lc&&(this.Pe=b,this.height=this.f.h*this.Pe))):-1!==b.toLowerCase().indexOf("height")&&(b=this.pixelHeight/this.f.h,
b!==this.Pe&&(this.Pe=b,!0===this.lc&&(this.Qe=b,this.width=this.f.w*this.Qe)))),T.prototype.ua.call(this,a))};e.wg=function(){this.G===zc.CSS?this.c.style.backgroundPosition=-this.O+"px "+-this.O+"px":this.G===zc.Rb&&(this.Da.style.top=-this.O+"px",this.Da.style.left=-this.O+"px");T.prototype.wg.call(this)};e.$e=function(){var a=this.J+"_"+this.i.i18n.locale;if(a!==this.ta&&(this.ta=a,!0===this.i.i18n.Ab(this.ea))){var b=this.S.value;this.N=!1;this.i.load.image(a,b,this.Dj,this)}};
function Ge(a,b){if(b===zc.CSS||b===zc.Rb)a.G=b;a.G===zc.CSS?a.c.style.backgroundRepeat="no-repeat":a.G===zc.Rb&&null===a.Da&&(a.Da=document.createElement("canvas"),a.Da.style.position="absolute",a.Da.style.top="0px",a.Da.style.left="0px",a.c.appendChild(a.Da))}function He(a,b){a.f=b;!0===a.ra&&(a.u=a.f.w,a.C="px",a.c.style.width=a.pixelWidth+"px");!0===a.pa&&(a.o=a.f.h,a.A="px",a.c.style.height=a.pixelHeight+"px");a.G===zc.CSS?(De(a),Ee(a)):a.G===zc.Rb&&Fe(a,a.f)}
function Fe(a,b){if(null!==a.j&&!1!==a.fa){a.Da.width=a.innerWidth;a.Da.height=a.innerHeight;var d=a.Da.getContext("2d");d.clearRect(0,0,a.innerWidth,a.innerHeight);d.drawImage(a.j,b.x,b.y,b.w,b.h,0,0,a.innerWidth,a.innerHeight)}}function De(a){a.c.style.backgroundSize=a.pixelWidth/a.f.w*a.j.naturalWidth+"px "+a.pixelHeight/a.f.h*a.j.naturalHeight+"px"}function Ee(a){a.c.style.backgroundPosition=a.pixelWidth/a.f.w*(-a.f.x-a.O)+"px "+a.pixelHeight/a.f.h*(-a.f.y-a.O)+"px"}
e.Dj=function(a){!1!==this.nb&&(this.j=a.data,this.G===zc.CSS&&(this.c.style.backgroundImage="url('"+a.url+"')"),this.fa=!0,Ie(this))};e.jn=function(a){"undefined"!==typeof a.data.frames?this.U=a.data.frames:this.warn("No frames found in file!");this.ka=!0;Ie(this)};function Ie(a){if(!0!==a.N&&!0===a.fa&&!0===a.ka){a.N=!0;var b;null!==a.f?b=a.f:null!==a.U?b=a.U[0].frame:b={x:0,y:0,w:a.j.naturalWidth,h:a.j.naturalHeight};He(a,b);ge(a);fe(a);null!==a.I&&a.I.D()}}
e.af=function(a){"object"===typeof a&&null!==a?(Ge(this,"string"===typeof a.renderMode?a.renderMode:Ce),this.J=a.key||"",this.aa=a.i18n||!1,!0===this.aa?(this.ha="",this.ea=a.url):this.ha=a.url,this.f=a.frame||null,"string"===typeof a.frames?this.na=a.frames:"object"===typeof a.frames&&null!==a.frames&&(this.U=a.frames),this.alpha=a.alpha,this.keepRatio=a.keepRatio,this.maximized=a.maximized,this.width=a.width,this.height=a.height):(Ge(this,Ce),this.ha=this.J="",this.aa=!1,"string"===typeof a&&(this.ha=
a))};
e.load=function(a){this.ka=this.fa=this.N=!1;this.af(a);a=this.J;var b=this.ha;if(!0===this.aa&&"string"===typeof this.ea){this.S=new Na(this.i,this.ea);!1===this.i.i18n.onLocaleChangeComplete.has(this.$e,this)&&this.i.i18n.onLocaleChangeComplete.add(this.$e,this);var d=this.i.i18n.locale;""!==d&&(a=this.J+"_"+d);!0===this.i.i18n.Ab(this.ea)&&(b=this.S.value)}""!==b?(this.N=!1,this.i.load.image(a,b,this.Dj,this)):this.fa=!0;"string"===typeof this.na&&""!==this.na?(a=this.na,this.N=!1,this.i.load.json(this.J+"-frames",
a,this.jn,this)):this.ka=!0};e.Ne=function(){this.c.style.backgroundImage="";this.j=null};
e.destroy=function(a){if(!1!==this.nb){null!==this.S&&(this.S.destroy(),this.S=null,this.i.i18n.onLocaleChangeComplete.remove(this.$e,this));null!==this.W&&(this.W.destroy(),this.W=null);null!==this.I&&(this.I.destroy(),this.I=null);this.j=null;if("undefined"===typeof a||!0===a)if(!0===this.aa){a=this.i.i18n.locales;for(var b,d=0,g=a.length;d<g;d++)b=this.J+"_"+a[d],this.i.cache.remove(A.IMAGE,b)}else this.i.cache.remove(A.IMAGE,this.J);T.prototype.destroy.call(this)}};
Object.defineProperty(Ua.prototype,"loaded",{get:function(){return this.N}});Object.defineProperty(Ua.prototype,"element",{get:function(){return this.j}});Object.defineProperty(Ua.prototype,"canvas",{get:function(){return this.Da}});Object.defineProperty(Ua.prototype,"frame",{get:function(){return this.f},set:function(a){He(this,a)}});Object.defineProperty(Ua.prototype,"frames",{get:function(){return this.U}});Object.defineProperty(Ua.prototype,"originalWidth",{get:function(){if(null!==this.j)return this.j.naturalWidth}});
Object.defineProperty(Ua.prototype,"originalHeight",{get:function(){if(null!==this.j)return this.j.naturalHeight}});Object.defineProperty(Ua.prototype,"onLoadStart",{get:function(){null===this.W&&(this.W=new q(this));return this.W}});Object.defineProperty(Ua.prototype,"onLoadComplete",{get:function(){null===this.I&&(this.I=new q(this));return this.I}});function Ac(a,b){this.B=null;Ua.call(this,a,b,"Sprite")}Ac.prototype=Object.create(Ua.prototype);e=Ac.prototype;e.constructor=Ac;
e.Ia=function(){this.B=new Je(this);Ua.prototype.Ia.call(this);this.i.display.register(this,!0)};e.af=function(a){Ua.prototype.af.call(this,a);"number"===typeof a.frameRate&&(this.B.frameRate=a.frameRate);!0===Array.isArray(a.animations)&&this.B.ia(a.animations);var b="number"===typeof a.frame&&!1===isNaN(a.frame)?a.frame:0;this.B.play("string"===typeof a.animation?a.animation:"default","boolean"===typeof a.loop?a.loop:!0,b);!0!==a.paused&&"number"!==typeof a.paused||this.B.pause(b)};
e.play=function(a,b,d){this.B.play(a,b,d)};e.pause=function(a){this.B.pause(a)};e.resume=function(a){this.B.resume(a)};e.stop=function(){this.B.stop()};e.update=function(){this.B.update()};e.destroy=function(){!1!==this.nb&&(this.B.destroy(),this.B=null,Ua.prototype.destroy.call(this))};Object.defineProperty(Ac.prototype,"animations",{get:function(){return this.B}});Object.defineProperty(Ac.prototype,"animation",{get:function(){return this.B.current}});
function Je(a){this.f=a;this.j={};this.o="default";this.m=30;this.c=[];n.call(this,"SpriteAnimationManager");this.add("default");!1===this.f.loaded&&this.f.onLoadComplete.ca(this.eo,this)}Je.prototype=Object.create(n.prototype);e=Je.prototype;e.constructor=Je;e.eo=function(){for(var a,b,d=0,g=this.c.length;d<g;d++)a=this.c[d].method,b=this.c[d].args,Je.prototype[a].apply(this,b);this.c=[]};
e.ia=function(a){if(!0===Array.isArray(a))for(var b,d=0,g=a.length;d<g;d++)b=a[d],this.add(b.name,b.start,b.end,b.frameRate,b.loop)};
e.add=function(a,b,d,g,h){if(!1===this.f.loaded)this.c.push({method:"add",args:arguments});else{a="string"===typeof a?a:"default";b=parseInt(b,10);d=parseInt(d,10);g="number"===typeof g?g:this.m;var k=this.f.frames;if("number"!==typeof b||!0===isNaN(b)||0>b||b>=k.length)b=0;if("number"!==typeof d||!0===isNaN(d)||0>d||d>=k.length)d=k.length-1;this.j[a]=new W(this.f,a,k.slice(b,d+1),g,"boolean"===typeof h?h:!0)}};
e.play=function(a,b,d){!1===this.f.loaded?this.c.push({method:"play",args:[a,b,d]}):(a="string"===typeof a?a:null!==this.current?this.current.name:"default",b="boolean"===typeof b?b:!0,d="number"===typeof d&&!1===isNaN(d)?d:0,a=this.get(a),null!==a&&a.play(b,d))};e.pause=function(a){!1===this.f.loaded?this.c.push({method:"pause",args:[a]}):null!==this.current&&this.current.pause(a)};e.resume=function(a){!1===this.f.loaded?this.c.push({method:"resume",args:[a]}):null!==this.current&&this.current.resume(a)};
e.stop=function(){!1===this.f.loaded?this.c.push({method:"stop",args:[]}):null!==this.current&&this.current.stop()};e.get=function(a){return!0===B.R(this.j[a],"SpriteAnimation")?this.j[a]:null};e.update=function(){null!==this.current&&this.current.update()};e.destroy=function(){for(var a in this.j)this.j[a].destroy(),this.j[a]=null;this.c=this.j=this.f=null;n.prototype.destroy.call(this)};
Object.defineProperty(Je.prototype,"frameRate",{get:function(){return this.m},set:function(a){"number"===typeof a&&(this.m=a)}});Object.defineProperty(Je.prototype,"current",{get:function(){return this.get(this.o)},set:function(a){!0===B.R(a,"SpriteAnimation")&&(this.o=a.name)}});Object.defineProperty(Je.prototype,"all",{get:function(){return this.j}});
function W(a,b,d,g,h){this.B=a;this.N=b;this.C=d||[];this.O=0;this.X=g||30;this.J=h||!1;this.Z=0;this.F=1E3/g;this.G=this.I=0;this.P=1;this.L=this.c=this.H=!1;this.f=this.A=this.j=this.u=this.m=this.o=null;n.call(this,"SpriteAnimation")}W.prototype=Object.create(n.prototype);e=W.prototype;e.constructor=W;function Ke(a,b){a.O="number"===typeof b&&0<=b&&b<a.C.length?b:0;a.B.frame=a.C[a.O].frame}
e.play=function(a,b){"boolean"===typeof a&&(this.J=a);this.H=!0;this.c=this.L=!1;this.Z=0;this.I=this.B.viewer.clock.time+this.F;Ke(this,b);this.B.animations.current=this;null!==this.o&&this.o.D()};e.pause=function(a){!0!==this.c&&(this.c=!0,"number"===typeof a&&Ke(this,a),null!==this.m&&this.m.D())};e.resume=function(a){!1!==this.c&&(this.c=!1,"number"===typeof a&&Ke(this,a),this.H&&(this.I=this.B.viewer.clock.time+this.F),null!==this.u&&this.u.D())};
e.stop=function(){this.H=!1;this.L=!0;this.c=!1;Ke(this,0);null!==this.A&&this.A.D()};
e.update=function(){if(!0!==this.c){var a=this.B.viewer.clock.time;!0===this.H&&a>=this.I&&(this.P=1,this.G=a-this.I,this.G>this.F&&(this.P=Math.floor(this.G/this.F),this.G-=this.P*this.F),this.I=a+(this.F-this.G),a=this.O+this.P,a>=this.C.length?!0===this.J?(a%=this.C.length,this.Z++,null!==this.j&&this.j.D(),Ke(this,a)):(Ke(this,this.C.length-1),this.H=!1,this.L=!0,this.c=!1,null!==this.f&&this.f.D()):Ke(this,a))}};
e.destroy=function(){this.C=this.B=null;null!==this.o&&(this.o.destroy(),this.o=null);null!==this.m&&(this.m.destroy(),this.m=null);null!==this.u&&(this.u.destroy(),this.u=null);null!==this.f&&(this.f.destroy(),this.f=null);null!==this.j&&(this.j.destroy(),this.j=null);null!==this.A&&(this.A.destroy(),this.A=null);n.prototype.destroy.call(this)};Object.defineProperty(W.prototype,"name",{get:function(){return this.N}});Object.defineProperty(W.prototype,"frames",{get:function(){return this.C}});
Object.defineProperty(W.prototype,"frameIndex",{get:function(){return this.O}});Object.defineProperty(W.prototype,"frameRate",{get:function(){return this.X},set:function(a){"number"===typeof a&&(this.X=a,this.F=1E3/this.X)}});Object.defineProperty(W.prototype,"loop",{get:function(){return this.J},set:function(a){this.J=!!a}});Object.defineProperty(W.prototype,"loopCount",{get:function(){return this.Z}});Object.defineProperty(W.prototype,"playing",{get:function(){return this.H}});
Object.defineProperty(W.prototype,"paused",{get:function(){return this.c},set:function(a){!0===!!a?this.pause():this.resume()}});Object.defineProperty(W.prototype,"complete",{get:function(){return this.L}});Object.defineProperty(W.prototype,"onPlay",{get:function(){null===this.o&&(this.o=new q(this));return this.o}});Object.defineProperty(W.prototype,"onPause",{get:function(){null===this.m&&(this.m=new q(this));return this.m}});
Object.defineProperty(W.prototype,"onResume",{get:function(){null===this.u&&(this.u=new q(this));return this.u}});Object.defineProperty(W.prototype,"onLoop",{get:function(){null===this.j&&(this.j=new q(this));return this.j}});Object.defineProperty(W.prototype,"onComplete",{get:function(){null===this.f&&(this.f=new q(this));return this.f}});Object.defineProperty(W.prototype,"onStop",{get:function(){null===this.A&&(this.A=new q(this));return this.A}});
function Le(a,b){this.pc=this.B=!1;this.wf=this.Ae=0;this.W=!1;T.call(this,a,null,b)}Le.prototype=Object.create(T.prototype);e=Le.prototype;e.constructor=Le;e.Ia=function(){T.prototype.Ia.call(this);this.i.onPause.add(this.wd,this);this.i.onResume.add(this.wd,this)};
e.wd=function(a){var b=document[I.visibilityState];a=void 0===a.data.pp;!0!==this.i.config.autoPause||"hidden"!==b&&!0!==a||!0!==this.B?!0!==this.i.config.autoResume||"visible"!==b&&!0!==a||!1!==this.B||!1!==this.W||this.play():(this.pause(),this.W=!1)};e.play=function(a,b){this.currentTime=a;this.loop=b};e.pause=function(){};e.destroy=function(){this.i.onPause.remove(this.wd,this);this.i.onResume.remove(this.wd,this);T.prototype.destroy.call(this)};Object.defineProperty(Le.prototype,"playing",{get:function(){return this.B}});
Object.defineProperty(Le.prototype,"playCount",{get:function(){return this.Ae}});Object.defineProperty(Le.prototype,"canPlay",{get:function(){return this.pc}});Object.defineProperty(Le.prototype,"paused",{get:function(){return this.W}});Object.defineProperty(Le.prototype,"endCount",{get:function(){return this.wf}});
function K(a,b,d,g,h){this.Uc=b;this.gc=d||null;this.I=null;this.Tc=g||Me.Ob;this.jb="";this.N=null;this.J=this.G=-1;this.Ua=null;this.Lb=!1;this.lb=null;this.hc=!1;this.kb=1;this.cb=!1;this.zc=0;this.Ib=null;this.Hb=h||!1;this.Rc=[0,1,2,3];this.yc=!1;this.ic=this.jc=this.j=this.Mb=this.Oa=this.zb=this.wb=this.xb=this.yb=this.sb=this.S=this.Ca=this.U=this.Aa=this.Ba=this.Ea=this.La=this.ta=this.ya=this.Ha=this.Qa=this.na=this.ka=this.Fa=this.Ma=this.fa=this.Ka=this.wa=this.xa=this.ea=this.aa=this.ha=
this.za=this.ra=this.sa=this.pa=null;Le.call(this,a,"VideoHTML5")}K.prototype=Object.create(Le.prototype);e=K.prototype;e.constructor=K;
e.Ia=function(){Le.prototype.Ia.call(this);!0===this.Hb&&!1===Ne(this)&&(this.Hb=!1);this.M=this.Uc;ba(this);this.S=this.Hn.bind(this);this.sb=this.In.bind(this);this.yb=this.Kn.bind(this);this.xb=this.Jn.bind(this);this.wb=this.Gn.bind(this);this.zb=this.Ln.bind(this);this.Oa=this.Fn.bind(this);this.Mb=this.Mn.bind(this);this.j=this.wn.bind(this);this.Ua=this.i.clock.create(!1);this.lb=this.i.clock.create(!1);this.lb.hf(500,this.Cm,this);this.i.audio.onVolumeChange.add(this.ti,this);this.i.audio.onDisable.add(this.si,
this);this.U=new q(this,!0);null!==this.gc&&this.load(this.gc);this.i.display.register(this,Ne(this));ee(this);fe(this)};e.ua=function(a){var b=Oe(this);null!==b&&null!==b.element&&(b.element.setAttribute("width",this.pixelWidth),b.element.setAttribute("height",this.pixelHeight));T.prototype.ua.call(this,a)};function Pe(a,b){for(var d,g=0,h=a.N.length;g<h;g++)if(d=a.N[g],d===b)return g;return-1}function Qe(a,b){if(null===a.N)return null;a=a.N[b];return null!==a&&"undefined"!==typeof a?a:null}
function Re(a){return Qe(a,a.G)}function Oe(a){return Qe(a,a.J)}function Se(a,b){a=Oe(a);return null!==a&&null!==a.element?a.element[b]:0}
function Te(a,b){if(-1!==b){b=a.N[b];var d=b.element;if("undefined"!==typeof d&&null!==d){d.removeEventListener("loadstart",a.j,!1);d.removeEventListener("durationchange",a.j,!1);d.removeEventListener("loadedmetadata",a.j,!1);d.removeEventListener("loadeddata",a.j,!1);d.removeEventListener("progress",a.j,!1);d.removeEventListener("canplay",a.j,!1);d.removeEventListener("canplaythrough",a.j,!1);d.removeEventListener("play",a.j,!1);d.removeEventListener("pause",a.j,!1);d.removeEventListener("timeupdate",
a.j,!1);d.removeEventListener("volumechange",a.j,!1);d.removeEventListener("seeked",a.j,!1);d.removeEventListener("ended",a.j,!1);d.removeEventListener("error",a.j,!1);d.removeEventListener("waiting",a.j,!1);d.removeEventListener("stalled",a.j,!1);d.removeEventListener("playing",a.j,!1);d.removeEventListener("error",a.S,!1);d.pause();d.src="";if(!0!==I.edge)for(var g,h=0,k=d.children.length;h<k;h++)g=d.children[h],g.removeEventListener("error",a.S,!1),g.src="",d.removeChild(g);d.load();d.parentNode===
a.c&&a.c.removeChild(d)}b.element=null;null!==b.buffer&&(b.buffer.destroy(),b.buffer=null);null!==b.played&&(b.played.destroy(),b.played=null)}}
function Ue(a,b,d){a.Lb=d||!1;-1!==a.G&&a.G!==b&&Ve(a);d=b===a.G?!0:!1;a.G=b;null!==a.Ea&&a.Ea.D(b);if(b!==a.J&&!0!==d){d=a.G;var g=document.createElement("video");g.setAttribute("webkit-playsinline","true");g.setAttribute("playsinline","true");g.setAttribute("width",a.pixelWidth);g.setAttribute("height",a.pixelHeight);g.volume=0;g.crossOrigin="anonymous";g.id="FORGE-VideoHTML5-"+a.M+"-"+d;var h=new We(g,"buffered"),k=new We(g,"played");d=a.N[d];d.element=g;d.buffer=h;d.played=k;d.requestCount++;
g=a.I[a.G];-1<a.J&&(d.element.addEventListener("loadstart",a.sb,!1),d.element.addEventListener("error",a.S,!1));!0===I.edge?d.element.src=g.url:(h=document.createElement("source"),h.addEventListener("error",a.S,!1),h.src=g.url,h.type=g.mimeType,d.element.appendChild(h));a.jc=a.fj.bind(a);!0===Ne(a)?(a.f=a.i.audio.context,a.Ib=Omnitone.createFOADecoder(a.f,d.element,{channelMap:a.Rc}),a.ic=a.Xm.bind(a),a.Ib.initialize().then(a.jc,a.ic)):a.fj();-1===a.J?Xe(a,b):(a.Ua.add(2E4,a.$n,a),a.Ua.start())}}
e.fj=function(){-1===this.G?Oe(this).element.load():Re(this).element.load()};e.Xm=function(){this.log("FOA decoder could not be initialized")};e.In=function(){var a=Re(this).element;a.removeEventListener("loadstart",this.sb,!1);a.addEventListener("loadedmetadata",this.yb,!1)};e.Kn=function(){var a=Re(this).element;a.removeEventListener("loadedmetadata",this.yb,!1);a.addEventListener("loadeddata",this.xb,!1)};
e.Jn=function(){var a=Re(this).element;a.removeEventListener("loadeddata",this.xb,!1);!0===I.desktop?(a.addEventListener("play",this.wb,!1),a.play()):Xe(this,this.G,!0)};e.Gn=function(){var a=Re(this).element;a.pause();a.removeEventListener("play",this.wb,!1);a.addEventListener("seeked",this.zb,!1);var b=this.currentTime;a.currentTime=!0===this.B&&!1===this.Lb?b+6:b};
e.Ln=function(){var a=Re(this).element;a.removeEventListener("seeked",this.zb,!1);a.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA?(a.removeEventListener("error",this.S,!1),Ye(this)):!0===I.edge||!0===I.ie?a.addEventListener("canplaythrough",this.Oa,!1):a.addEventListener("canplay",this.Oa,!1)};
e.Fn=function(){var a=Re(this).element;a.currentTime=this.currentTime;!0===I.edge||!0===I.ie?a.removeEventListener("canplaythrough",this.Oa,!1):a.removeEventListener("canplay",this.Oa,!1);a.removeEventListener("error",this.S,!1);Ye(this)};
function Ye(a){var b=Oe(a);null!==b&&null!==b.element&&!1===a.Lb&&(b.element.addEventListener("seeked",a.Mb,!1),a.Ua.hf(10,a.lo,a));if(!0!==I.edge)for(var b=Re(a).element,d,g=0,h=b.children.length;g<h;g++)d=b.children[g],d.removeEventListener("error",a.S,!1);!0===a.Lb&&Xe(a,a.G)}e.Mn=function(){var a=this.G;Ze(this,!1);Ue(this,a)};e.lo=function(){var a=Re(this);null!==a&&this.currentTime>=a.element.currentTime&&this.currentTime<a.element.currentTime+.05&&Xe(this,this.G)};e.$n=function(){Ze(this,!0)};
e.Hn=function(){Ze(this,!0)};
function Xe(a,b,d){if(b!==a.J){a.c.innerHTML="";var g=Re(a);!0===a.B&&g.element.play();$e(a,g);g=Oe(a);a.G=-1;a.J=b;b=Oe(a);b.currentCount++;!0===d&&null!==g&&(b.element.currentTime=g.element.currentTime);d=b.element;d.addEventListener("loadstart",a.j,!1);d.addEventListener("durationchange",a.j,!1);d.addEventListener("loadedmetadata",a.j,!1);d.addEventListener("loadeddata",a.j,!1);d.addEventListener("progress",a.j,!1);d.addEventListener("canplay",a.j,!1);d.addEventListener("canplaythrough",a.j,!1);
d.addEventListener("play",a.j,!1);d.addEventListener("pause",a.j,!1);d.addEventListener("timeupdate",a.j,!1);d.addEventListener("volumechange",a.j,!1);d.addEventListener("seeked",a.j,!1);d.addEventListener("ended",a.j,!1);d.addEventListener("error",a.j,!1);d.addEventListener("waiting",a.j,!1);d.addEventListener("stalled",a.j,!1);d.addEventListener("playing",a.j,!1);a.c.appendChild(b.element);null!==g&&null!==g.element&&(g.element.removeEventListener("seeked",a.Mb,!1),d=Pe(a,g),-1!==d&&Te(a,d));a.Ua.stop(!0);
null!==a.Ba&&a.Ba.D(a.J);""===a.jb&&af(a,a.Tc)}}
e.Cm=function(){if(!1!==this.B&&-1===this.G){var a;a:{a=Oe(this);var b=a.element.currentTime;if(!1!==a.element.playing)if(b===a.lastTimeStamp){if(a.downCount++,3<=a.downCount){a.lastTimeStamp=0;a=!0;break a}}else a.lastTimeStamp=b,a.downCount=0;a=!1}!0===a?(Oe(this).leaveCount++,0<=this.J-1?Ue(this,this.J-1,!0):this.log("Can't downgrade video quality anymore!")):(a=Oe(this),!0===(null!==a&&null!==a.buffer&&a.buffer.Zk(a.element.currentTime,6)?!0:!1)&&this.J!==this.I.length-1&&(a=this.J+1,!this.N[a].abortCount&&
1>=this.N[a].leaveCount?Ue(this,a):this.log("AutoQuality do not attempt to load an already aborted video")))}};function af(a,b){!1===I.desktop&&(b=Me.MANUAL,a.warn("Quality mode force to manual, you are not on desktop"));a.jb===b||b!==Me.Ob&&b!==Me.MANUAL||(a.jb=b,a.lb.stop(!1),a.jb===Me.Ob&&a.lb.start(),null!==a.Ca&&a.Ca.D(a.jb))}function Ze(a,b){var d=Re(a);null!==d&&(!0===b&&d.abortCount++,Ve(a),a.Ua.stop(!0),null!==a.Aa&&a.Aa.D())}
function Ve(a){var b=Re(a);if(null!==b){var d=b.element;d.removeEventListener("loadstart",a.sb,!1);d.removeEventListener("loadedmetadata",a.yb,!1);d.removeEventListener("loadeddata",a.xb,!1);d.removeEventListener("play",a.wb,!1);d.removeEventListener("seeked",a.zb,!1);!0===I.edge||!0===I.ie?d.removeEventListener("canplaythrough",a.Oa,!1):d.removeEventListener("canplay",a.Oa,!1);d.removeEventListener("error",a.S,!1);b=Pe(a,b);-1!==b&&Te(a,b);a.G=-1}}e.ti=function(){$e(this)};
function $e(a,b){b=b||Oe(a);null!==b&&null!==b.element&&!0===a.i.audio.enabled&&(b.element.volume=a.kb*a.i.audio.volume)}e.si=function(){var a=Oe(this);null!==a&&null!==a.element&&!1===this.i.audio.enabled&&(a.element.volume=0)};
e.wn=function(a){var b=Oe(this).element;switch(a.type){case "loadstart":null!==this.pa&&this.pa.D(a);break;case "durationchange":null!==this.ha&&b.readyState===HTMLMediaElement.HAVE_METADATA&&this.ha.D(a);break;case "loadedmetadata":this.yc=!0;null!==this.sa&&this.sa.D(a);break;case "loadeddata":null!==this.ra&&this.ra.D(a);break;case "progress":null!==this.za&&this.za.D(a);break;case "canplay":this.pc=!0;null!==this.aa&&this.aa.D(a);break;case "canplaythrough":this.pc=!0;null!==this.ea&&this.ea.D(a);
break;case "play":null!==this.xa&&this.xa.D(a);break;case "pause":this.B=!1;null!==this.wa&&this.wa.D(a);break;case "timeupdate":null!==this.Ka&&this.Ka.D(a);break;case "volumechange":null!==this.Ma&&b.readyState!==HTMLMediaElement.HAVE_NOTHING&&this.Ma.D(a);break;case "seeked":this.pc=!1;null!==this.Fa&&this.Fa.D(a);break;case "ended":this.B=!1;this.currentTime=0;this.wf++;!0===this.hc&&this.play(0);null!==this.ka&&this.ka.D(a);break;case "error":null!==this.na&&this.na.D(a);break;case "waiting":null!==
this.Qa&&this.Qa.D(a);break;case "stalled":null!==this.Ha&&this.Ha.D(a);break;case "playing":null!==this.ya&&this.ya.D(a);break;default:this.warn('The event "'+a.type+'" is not handled.')}};function Ne(a){return!0===a.Hb&&!0===a.i.audio.useWebAudio&&"undefined"!==typeof Omnitone}e.update=function(){null!==this.Ib&&!0===this.B&&this.Ib.setRotationMatrixFromCamera(this.i.renderer.camera.modelViewInverse)};
e.load=function(a){if(null!==a)if(!0===B.R(a,"string")?a=[a]:!0===B.R(a,"VideoQuality")&&(a=[a]),!0===B.Ga(a,"string")){for(var b=[],d,g=0,h=a.length;g<h;g++)d=new bf(a[g]),b.push(d);this.I=b}else!0===B.Ga(a,"VideoQuality")&&(this.I=a);null!==this.U&&this.U.D(this.I);if(null===this.I||!this.I.length)throw"$_VideoHTML5.load: Can't create video with no qualities set!";a=this.I.length;b=[];for(g=0;g<a;g++)d={index:g,element:null,buffer:null,played:null,requestCount:0,currentCount:0,abortCount:0,leaveCount:0,
op:0,lastTimeStamp:0},b[g]=d;this.N=b;Ue(this,0)};e.play=function(a,b){Le.prototype.play.call(this,a,b);a=Oe(this);null!==a&&null!==a.element&&(a=a.element.play(),"undefined"!==typeof a&&"undefined"!==typeof Promise&&a instanceof Promise?a.then(function(){this.B=!0;this.W=!1;this.Ae++}.bind(this)).catch(function(a){this.log("error while playing the video : "+a)}.bind(this)):(this.W=this.B=!0,this.Ae++))};
e.pause=function(){var a=Oe(this);null!==a&&null!==a.element&&(a.element.pause(),this.B=!1,this.W=!0)};e.stop=function(){var a=Oe(this);null!==a&&null!==a.element&&(a.element.pause(),a.element.currentTime=0,this.B=!1,this.W=!0)};e.rm=function(){!0===this.B||!1===this.i.audio.enabled?this.pause():this.play()};e.hb=function(){!0!==this.cb&&!1!==this.i.audio.enabled&&(this.cb=!0,this.zc=this.kb,this.kb=0,$e(this),null!==this.ta&&this.ta.D())};
e.ui=function(a){!1!==this.cb&&(a="number"===typeof a?a:this.zc,this.cb=!1,this.kb=G.$(a,0,1),$e(this),null!==this.La&&this.La.D())};
e.destroy=function(){Ve(this);this.Ua.destroy();this.Ua=null;this.lb.destroy();this.lb=null;null!==this.pa&&(this.pa.destroy(),this.pa=null);null!==this.sa&&(this.sa.destroy(),this.sa=null);null!==this.ra&&(this.ra.destroy(),this.ra=null);null!==this.za&&(this.za.destroy(),this.za=null);null!==this.ha&&(this.ha.destroy(),this.ha=null);null!==this.aa&&(this.aa.destroy(),this.aa=null);null!==this.ea&&(this.ea.destroy(),this.ea=null);null!==this.xa&&(this.xa.destroy(),this.xa=null);null!==this.wa&&(this.wa.destroy(),
this.wa=null);null!==this.Ka&&(this.Ka.destroy(),this.Ka=null);null!==this.fa&&(this.fa.destroy(),this.fa=null);null!==this.Ma&&(this.Ma.destroy(),this.Ma=null);null!==this.Fa&&(this.Fa.destroy(),this.Fa=null);null!==this.ka&&(this.ka.destroy(),this.ka=null);null!==this.na&&(this.na.destroy(),this.na=null);null!==this.Qa&&(this.Qa.destroy(),this.Qa=null);null!==this.Ha&&(this.Ha.destroy(),this.Ha=null);null!==this.ya&&(this.ya.destroy(),this.ya=null);null!==this.ta&&(this.ta.destroy(),this.ta=null);
null!==this.La&&(this.La.destroy(),this.La=null);null!==this.Ea&&(this.Ea.destroy(),this.Ea=null);null!==this.Ba&&(this.Ba.destroy(),this.Ba=null);null!==this.Aa&&(this.Aa.destroy(),this.Aa=null);null!==this.Ca&&(this.Ca.destroy(),this.Ca=null);null!==this.U&&(this.U.destroy(),this.U=null);for(var a=0,b=this.N.length;a<b;a++)Te(this,a);this.j=this.Mb=this.Oa=this.zb=this.wb=this.xb=this.yb=this.sb=this.S=this.ic=this.jc=null;this.i.audio.onVolumeChange.remove(this.ti,this);this.i.audio.onDisable.remove(this.si,
this);this.N=this.I=this.gc=null;Le.prototype.destroy.call(this)};Object.defineProperty(K.prototype,"quality",{get:function(){return this.I[this.J]},set:function(a){if("number"===typeof a&&0<=a&&a<this.I.length)af(this,Me.MANUAL),Ue(this,a);else if(!0===B.R(a,"VideoQuality")){a:{for(var b,d=0,g=this.I.length;d<g;d++)if(b=this.I[d],b===a){a=d;break a}a=-1}if(-1!==a)af(this,Me.MANUAL),Ue(this,a);else throw"Unknown quality";}else throw"Video quality "+a+" out of bounds";}});
Object.defineProperty(K.prototype,"qualityMode",{get:function(){return this.jb},set:function(a){a!==Me.Ob&&a!==Me.MANUAL||af(this,a)}});Object.defineProperty(K.prototype,"qualities",{get:function(){return this.I}});Object.defineProperty(K.prototype,"requestIndex",{get:function(){return this.G}});Object.defineProperty(K.prototype,"currentIndex",{get:function(){return this.J}});Object.defineProperty(K.prototype,"videos",{get:function(){return this.N}});
Object.defineProperty(K.prototype,"element",{get:function(){var a=Oe(this);return null!==a&&null!==a.element?a.element:null}});Object.defineProperty(K.prototype,"buffer",{get:function(){var a=Oe(this);return null!==a&&null!==a.buffer?a.buffer:null}});Object.defineProperty(K.prototype,"played",{get:function(){var a=Oe(this);return null!==a&&null!==a.played?a.played:null}});Object.defineProperty(K.prototype,"originalWidth",{get:function(){return Se(this,"videoWidth")}});
Object.defineProperty(K.prototype,"originalHeight",{get:function(){return Se(this,"videoHeight")}});Object.defineProperty(K.prototype,"currentTime",{get:function(){return Se(this,"currentTime")},set:function(a){if("number"===typeof a){var b=Oe(this);null!==b&&null!==b.element&&(b.element.currentTime=a,null!==this.fa&&this.fa.D(a))}}});Object.defineProperty(K.prototype,"currentTimeMS",{get:function(){return 1E3*this.currentTime},set:function(a){this.currentTime=a/1E3}});
Object.defineProperty(K.prototype,"remainingTime",{get:function(){return this.duration-this.currentTime}});Object.defineProperty(K.prototype,"duration",{get:function(){return Se(this,"duration")}});Object.defineProperty(K.prototype,"durationMS",{get:function(){return Math.round(1E3*this.duration)}});Object.defineProperty(K.prototype,"metaDataLoaded",{get:function(){return this.yc}});
Object.defineProperty(K.prototype,"loop",{get:function(){return this.hc},set:function(a){"boolean"===typeof a&&(this.hc=a)}});Object.defineProperty(K.prototype,"volume",{get:function(){return this.kb},set:function(a){"number"===typeof a&&(this.kb=G.$(a,0,1),this.cb=!1,$e(this))}});Object.defineProperty(K.prototype,"muted",{get:function(){return this.cb},set:function(a){!0===!!a?this.hb():this.ui()}});Object.defineProperty(K.prototype,"ambisonic",{get:function(){return this.Hb}});
Object.defineProperty(K.prototype,"onLoadStart",{get:function(){null===this.pa&&(this.pa=new q(this));return this.pa}});Object.defineProperty(K.prototype,"onLoadedMetaData",{get:function(){null===this.sa&&(this.sa=new q(this));return this.sa}});Object.defineProperty(K.prototype,"onLoadedData",{get:function(){null===this.ra&&(this.ra=new q(this));return this.ra}});Object.defineProperty(K.prototype,"onProgress",{get:function(){null===this.za&&(this.za=new q(this));return this.za}});
Object.defineProperty(K.prototype,"onDurationChange",{get:function(){null===this.ha&&(this.ha=new q(this));return this.ha}});Object.defineProperty(K.prototype,"onCanPlay",{get:function(){null===this.aa&&(this.aa=new q(this));return this.aa}});Object.defineProperty(K.prototype,"onCanPlayThrough",{get:function(){null===this.ea&&(this.ea=new q(this));return this.ea}});Object.defineProperty(K.prototype,"onPlay",{get:function(){null===this.xa&&(this.xa=new q(this));return this.xa}});
Object.defineProperty(K.prototype,"onPause",{get:function(){null===this.wa&&(this.wa=new q(this));return this.wa}});Object.defineProperty(K.prototype,"onTimeUpdate",{get:function(){null===this.Ka&&(this.Ka=new q(this));return this.Ka}});Object.defineProperty(K.prototype,"onCurrentTimeChange",{get:function(){null===this.fa&&(this.fa=new q(this));return this.fa}});Object.defineProperty(K.prototype,"onVolumeChange",{get:function(){null===this.Ma&&(this.Ma=new q(this));return this.Ma}});
Object.defineProperty(K.prototype,"onSeeked",{get:function(){null===this.Fa&&(this.Fa=new q(this));return this.Fa}});Object.defineProperty(K.prototype,"onEnded",{get:function(){null===this.ka&&(this.ka=new q(this));return this.ka}});Object.defineProperty(K.prototype,"onError",{get:function(){null===this.na&&(this.na=new q(this));return this.na}});Object.defineProperty(K.prototype,"onWaiting",{get:function(){null===this.Qa&&(this.Qa=new q(this));return this.Qa}});
Object.defineProperty(K.prototype,"onStalled",{get:function(){null===this.Ha&&(this.Ha=new q(this));return this.Ha}});Object.defineProperty(K.prototype,"onPlaying",{get:function(){null===this.ya&&(this.ya=new q(this));return this.ya}});Object.defineProperty(K.prototype,"onMute",{get:function(){null===this.ta&&(this.ta=new q(this));return this.ta}});Object.defineProperty(K.prototype,"onUnmute",{get:function(){null===this.La&&(this.La=new q(this));return this.La}});
Object.defineProperty(K.prototype,"onQualityRequest",{get:function(){null===this.Ea&&(this.Ea=new q(this));return this.Ea}});Object.defineProperty(K.prototype,"onQualityChange",{get:function(){null===this.Ba&&(this.Ba=new q(this));return this.Ba}});Object.defineProperty(K.prototype,"onQualityAbort",{get:function(){null===this.Aa&&(this.Aa=new q(this));return this.Aa}});Object.defineProperty(K.prototype,"onQualityModeChange",{get:function(){null===this.Ca&&(this.Ca=new q(this));return this.Ca}});
Object.defineProperty(K.prototype,"onQualitiesLoaded",{get:function(){null===this.U&&(this.U=new q(this,!0));return this.U}});
function J(a,b,d,g){this.zm=b;this.nf=d||null;this.Ua="";this.Fa=null;this.ym=g||Me.Ob;this.Oa="";this.j=null;this.qf=!1;this.La=1;this.Ea=!1;this.Fi=0;this.Ei=!1;this.cb=this.f=null;this.vf=this.rf=this.Ha=this.Qa=0;this.Hb=this.yf=this.hc=this.ic=this.Mb=this.yc=this.Ma=this.sb=this.jc=this.Rc=this.zc=this.Ib=this.Lb=this.lb=this.kb=this.wb=this.gc=this.yb=this.zb=this.xb=this.Ca=this.ta=this.G=this.Ka=this.sa=this.wa=this.pa=this.ya=this.aa=this.U=this.xa=this.Aa=this.N=this.za=this.ka=this.na=
this.J=this.I=this.S=this.ra=this.fa=this.ha=this.ea=this.jb=this.Ba=this.Tc=this.Uc=null;Le.call(this,a,"VideoDash")}J.prototype=Object.create(Le.prototype);J.prototype.constructor=J;var cf={VIDEO:"video",AUDIO:"audio"};e=J.prototype;
e.Ia=function(){Le.prototype.Ia.call(this);if("undefined"===typeof dashjs)throw"$_VideoDash._boot: Can't create MPEG-DASH video stream without dash.js Media Player.";this.M=this.zm;ba(this);this.xb=this.yn.bind(this);this.wb=this.un.bind(this);this.zb=this.mm.bind(this);this.yb=this.zn.bind(this);this.gc=this.Cn.bind(this);this.kb=this.tn.bind(this);this.lb=this.km.bind(this);this.Lb=this.om.bind(this);this.Ib=this.nm.bind(this);this.zc=this.Rn.bind(this);this.Rc=this.Yn.bind(this);this.jc=this.On.bind(this);
this.sb=this.lm.bind(this);this.Ma=this.vn.bind(this);this.yc=this.Pn.bind(this);this.Mb=this.Bn.bind(this);this.ic=this.En.bind(this);this.hc=this.Dn.bind(this);this.yf=this.Qn.bind(this);this.Hb=this.An.bind(this);this.i.audio.onVolumeChange.add(this.pi,this);this.i.audio.onDisable.add(this.oi,this);this.G=new q(this,!0);null!==this.nf&&this.load(this.nf);this.i.display.register(this);ee(this);fe(this)};
e.ua=function(a){var b=this.j;null!==b&&null!==b.element&&(b.element.setAttribute("width",this.pixelWidth),b.element.setAttribute("height",this.pixelHeight));T.prototype.ua.call(this,a)};function df(a,b){a=a.j;return null!==a&&null!==a.element?a.element[b]:0}
e.yn=function(a){var b=this.Ua,d=this.f.getBitrateInfoListFor(cf.VIDEO),g=[],h;if(null!==d){for(var k=0,l=d.length;k<l;k++)h=new bf(b),h.id=d[k].qualityIndex,h.bitrate=d[k].bitrate,h.width=d[k].width,h.height=d[k].height,g.push(h);this.Fa=g;null!==this.G&&this.G.D(g)}else this.destroy();null!==this.ea&&this.ea.D(a)};e.Qn=function(a){this.cb=a.toStreamInfo};
e.An=function(a){null===this.Uc&&(this.Uc=this.f.getMetricsFor(cf.VIDEO));null===this.Tc&&(this.Tc=this.f.getMetricsFor(cf.AUDIO));null===this.Ba&&(this.Ba=this.f.getDashMetrics());if(null!==this.Ca){var b;a.mediaType===cf.VIDEO&&(b=ef(this,cf.VIDEO,this.Uc,this.Ba))&&(this.jb={videoBitrate:b.bitrate,videoIndex:b.index,videoPendingIndex:b.gl,videoMaxIndex:b.bl,videoBufferLength:b.xk,videoDroppedFrames:b.droppedFrames});a.mediaType===cf.AUDIO&&(b=ef(this,cf.AUDIO,this.Tc,this.Ba))&&(this.jb={audioBitrate:b.bitrate,
audioIndex:b.index,audioPendingIndex:b.gl,audioMaxIndex:b.bl,audioBufferLength:b.xk,audioDroppedFrames:b.droppedFrames});this.Ca.D(a)}};
function ef(a,b,d,g){if(null!==d&&null!==g){var h=a.cb.index,k,l,u,w,E,ya;k=g.getCurrentRepresentationSwitch(d);null!==k&&(l=Math.round(g.getBandwidthForRepresentation(k.to,h)/1E3));if(isNaN(l)||void 0===l)l=0;b===cf.VIDEO?(u=a.Qa+1,w=a.Ha+1):b===cf.AUDIO&&(u=a.rf+1,w=a.vf+1);if(isNaN(u)||void 0===u)u=0;if(isNaN(w)||void 0===w)w=0;a=g.getMaxIndexForBufferType(b,h);if(isNaN(a)||void 0===a)a=0;b=g.getCurrentBufferLevel(d);null!==b&&(E=b.toPrecision(5));if(isNaN(E)||void 0===E)E=0;d=g.getCurrentDroppedFrames(d);
null!==d&&(ya=d.droppedFrames);return{bitrate:l,index:u,gl:w,bl:a,xk:E,droppedFrames:ya}}return null}e.Dn=function(a){a.mediaType===cf.AUDIO?this.vf=this.rf=a.newQuality:a.mediaType===cf.VIDEO&&(this.Ha=this.Qa=a.newQuality,null!==this.sa&&this.sa.D(this.Ha))};e.En=function(a){a.mediaType===cf.AUDIO?(this.rf=a.oldQuality,this.vf=a.newQuality):a.mediaType===cf.VIDEO&&(this.Qa=a.oldQuality,this.Ha=a.newQuality,null!==this.wa&&this.wa.D(this.Ha))};
e.un=function(a){var b=this.j.element;null!==this.S&&b.readyState===HTMLMediaElement.HAVE_METADATA&&this.S.D(a)};e.mm=function(a){this.Ei=!0;null!==this.ha&&this.ha.D(a)};e.zn=function(a){null!==this.fa&&this.fa.D(a)};e.Cn=function(a){null!==this.ra&&this.ra.D(a)};e.tn=function(a){this.pc=!0;null!==this.I&&this.I.D(a)};e.km=function(a){this.pc=!0;null!==this.J&&this.J.D(a)};e.om=function(a){null!==this.na&&this.na.D(a)};e.nm=function(a){this.B=!1;null!==this.ka&&this.ka.D(a)};
e.Rn=function(a){null!==this.za&&this.za.D(a)};e.Yn=function(a){var b=this.j.element;null!==this.Aa&&b.readyState!==HTMLMediaElement.HAVE_NOTHING&&this.Aa.D(a)};e.On=function(a){this.pc=!1;null!==this.xa&&this.xa.D(a)};e.lm=function(a){this.B=!1;this.wf++;!0===this.qf&&this.play();null!==this.U&&this.U.D(a)};e.vn=function(a){null!==this.aa&&this.aa.D(a)};e.Pn=function(a){null!==this.ya&&this.ya.D(a)};e.Bn=function(a){null!==this.pa&&this.pa.D(a)};
e.oi=function(){var a=this.j;null!==a&&null!==a.element&&!1===this.i.audio.enabled&&this.f.setVolume(0)};e.pi=function(){ff(this)};function ff(a){var b=a.j;null!==b&&null!==b.element&&!0===a.i.audio.enabled&&(a.f.setVolume(a.La*a.i.audio.volume),!0===a.Ea?a.f.setMute(!0):a.f.setMute(!1))}
function gf(a,b){a.Ha=b;if(null!==a.cb&&null!==a.f&&!0===a.f.isReady()&&null!==a.Ba){var d=a.cb.index,g=a.Ba.getMaxIndexForBufferType(cf.VIDEO,d),d=a.Ba.getMaxIndexForBufferType(cf.AUDIO,d),h=b;h>=g&&(h=g-1);0>h&&(h=0);b>=d&&(b=d-1);0>b&&(b=0);a.f.setQualityFor(cf.VIDEO,h);a.f.setQualityFor(cf.AUDIO,b)}ff(a)}
function hf(a,b){a.Oa===b||b!==Me.Ob&&b!==Me.MANUAL||(a.Oa=b,null!==a.f&&!0===a.f.isReady()&&(b===Me.MANUAL?(a.f.setAutoSwitchQualityFor(cf.VIDEO,!1),a.f.setAutoSwitchQualityFor(cf.AUDIO,!1)):(a.f.setAutoSwitchQualityFor(cf.VIDEO,!0),a.f.setAutoSwitchQualityFor(cf.AUDIO,!0))),null!==a.ta&&a.ta.D(a.Oa))}
e.load=function(a){null!==a&&(!0===B.R(a,"string")?a=[a]:!0===B.R(a,"VideoQuality")&&(a=[a]),!0===B.Ga(a,"string")?this.Ua=a[0]:!0===B.Ga(a,"VideoQuality")&&(this.Ua=a[0].url));if(""===this.Ua)throw"$_VideoDash : Can't create video with no manifest!";this.j={index:0,element:null,buffer:null,played:null};a=document.createElement("video");a.setAttribute("webkit-playsinline","webkit-playsinline");a.setAttribute("width",this.pixelWidth);a.setAttribute("height",this.pixelHeight);a.volume=0;a.crossOrigin=
"anonymous";a.id="FORGE-VideoDash-"+this.M;var b=new We(a,"buffered"),d=new We(a,"played"),g=this.j;g.element=a;g.buffer=b;g.played=d;g.lastTimeStamp=0;this.f=dashjs.MediaPlayer().create();this.f.getDebug().setLogToBrowserConsole(!1);this.f.initialize();this.f.setAutoPlay(!1);this.f.attachView(this.j.element);this.f.attachSource(this.Ua);!0===this.f.isReady()&&(this.f.on(dashjs.MediaPlayer.events.CAN_PLAY,this.kb),this.f.on(dashjs.MediaPlayer.events.ERROR,this.Ma),this.f.on(dashjs.MediaPlayer.events.PLAYBACK_ENDED,
this.sb),this.f.on(dashjs.MediaPlayer.events.PLAYBACK_ERROR,this.Ma),this.f.on(dashjs.MediaPlayer.events.PLAYBACK_METADATA_LOADED,this.zb),this.f.on(dashjs.MediaPlayer.events.PLAYBACK_PAUSED,this.Ib),this.f.on(dashjs.MediaPlayer.events.PLAYBACK_PROGRESS,this.gc),this.f.on(dashjs.MediaPlayer.events.PLAYBACK_SEEKED,this.jc),this.f.on(dashjs.MediaPlayer.events.PLAYBACK_STARTED,this.Lb),this.f.on(dashjs.MediaPlayer.events.PLAYBACK_TIME_UPDATED,this.zc),this.f.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,
this.hc),this.f.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,this.ic),this.f.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,this.xb),this.f.on(dashjs.MediaPlayer.events.PLAYBACK_PLAYING,this.Mb),this.f.on(dashjs.MediaPlayer.events.BUFFER_EMPTY,this.yc),this.f.on(dashjs.MediaPlayer.events.PERIOD_SWITCH_COMPLETED,this.yf),this.f.on(dashjs.MediaPlayer.events.METRIC_CHANGED,this.Hb),this.j.element.addEventListener("loadeddata",this.yb,!1),this.j.element.addEventListener("durationchange",this.wb,
!1),this.j.element.addEventListener("canplaythrough",this.lb,!1),this.j.element.addEventListener("volumechange",this.Rc,!1),this.c.innerHTML="",this.c.appendChild(this.j.element));""===this.Oa&&hf(this,this.ym)};e.play=function(a,b){Le.prototype.play.call(this,a,b);null!==this.f&&!0===this.f.isReady()&&(this.f.play(),this.B=!0,this.W=!1,this.Ae++)};e.pause=function(){null!==this.f&&!0===this.f.isReady()&&(this.f.pause(),this.B=!1,this.W=!0)};
e.stop=function(){null!==this.f&&!0===this.f.isReady()&&(this.f.pause(),this.f.seek(0),this.j.element.currentTime=0,this.B=!1,this.W=!0)};e.qm=function(){!0===this.B||!1===this.i.audio.enabled?this.pause():this.play()};e.hb=function(){!0!==this.Ea&&!1!==this.i.audio.enabled&&(this.Ea=!0,this.Fi=this.La,this.La=0,ff(this))};e.ri=function(a){!1!==this.Ea&&(a="number"===typeof a?a:this.Fi,this.Ea=!1,this.La=G.$(a,0,1),ff(this))};e.pm=function(a){null!==this.f&&!0===this.f.isReady()&&this.f.enableBufferOccupancyABR(a)};
e.destroy=function(){null!==this.f&&!0===this.f.isReady()&&(this.f.off(dashjs.MediaPlayer.events.CAN_PLAY,this.kb),this.f.off(dashjs.MediaPlayer.events.ERROR,this.Ma),this.f.off(dashjs.MediaPlayer.events.PLAYBACK_ENDED,this.sb),this.f.off(dashjs.MediaPlayer.events.PLAYBACK_ERROR,this.Ma),this.f.off(dashjs.MediaPlayer.events.PLAYBACK_METADATA_LOADED,this.zb),this.f.off(dashjs.MediaPlayer.events.PLAYBACK_PAUSED,this.Ib),this.f.off(dashjs.MediaPlayer.events.PLAYBACK_PROGRESS,this.gc),this.f.off(dashjs.MediaPlayer.events.PLAYBACK_SEEKED,
this.jc),this.f.off(dashjs.MediaPlayer.events.PLAYBACK_STARTED,this.Lb),this.f.off(dashjs.MediaPlayer.events.PLAYBACK_TIME_UPDATED,this.zc),this.f.off(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,this.hc),this.f.off(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,this.ic),this.f.off(dashjs.MediaPlayer.events.STREAM_INITIALIZED,this.xb),this.f.off(dashjs.MediaPlayer.events.PLAYBACK_PLAYING,this.Mb),this.f.off(dashjs.MediaPlayer.events.BUFFER_EMPTY,this.yc),this.f.off(dashjs.MediaPlayer.events.PERIOD_SWITCH_COMPLETED,
this.yf),this.f.off(dashjs.MediaPlayer.events.METRIC_CHANGED,this.Hb),this.j.element.removeEventListener("loadeddata",this.yb,!1),this.j.element.removeEventListener("durationchange",this.wb,!1),this.j.element.removeEventListener("canplaythrough",this.lb,!1),this.j.element.removeEventListener("volumechange",this.Rc,!1),this.f.pause(),this.f.reset());var a=this.j,b=a.element;"undefined"!==typeof b&&null!==b&&b.parentNode===this.c&&this.c.removeChild(b);a.element=null;null!==a.buffer&&(a.buffer.destroy(),
a.buffer=null);null!==a.played&&(a.played.destroy(),a.played=null);null!==this.ea&&(this.ea.destroy(),this.ea=null);null!==this.ha&&(this.ha.destroy(),this.ha=null);null!==this.fa&&(this.fa.destroy(),this.fa=null);null!==this.ra&&(this.ra.destroy(),this.ra=null);null!==this.S&&(this.S.destroy(),this.S=null);null!==this.I&&(this.I.destroy(),this.I=null);null!==this.J&&(this.J.destroy(),this.J=null);null!==this.na&&(this.na.destroy(),this.na=null);null!==this.ka&&(this.ka.destroy(),this.ka=null);null!==
this.za&&(this.za.destroy(),this.za=null);null!==this.N&&(this.N.destroy(),this.N=null);null!==this.Aa&&(this.Aa.destroy(),this.Aa=null);null!==this.xa&&(this.xa.destroy(),this.xa=null);null!==this.U&&(this.U.destroy(),this.U=null);null!==this.aa&&(this.aa.destroy(),this.aa=null);null!==this.ya&&(this.ya.destroy(),this.ya=null);null!==this.pa&&(this.pa.destroy(),this.pa=null);null!==this.wa&&(this.wa.destroy(),this.wa=null);null!==this.sa&&(this.sa.destroy(),this.sa=null);null!==this.Ka&&(this.Ka.destroy(),
this.Ka=null);null!==this.G&&(this.G.destroy(),this.G=null);null!==this.ta&&(this.ta.destroy(),this.ta=null);null!==this.Ca&&(this.Ca.destroy(),this.Ca=null);this.Hb=this.hc=this.ic=this.yc=this.Mb=this.Ma=this.sb=this.jc=this.Rc=this.zc=this.Ib=this.Lb=this.lb=this.kb=this.wb=this.gc=this.yb=this.zb=this.xb=null;this.i.audio.onVolumeChange.remove(this.pi,this);this.i.audio.onDisable.remove(this.oi,this);this.j=this.Fa=this.nf=this.cb=this.jb=this.Ba=this.Tc=this.Uc=this.f=null;Le.prototype.destroy.call(this)};
Object.defineProperty(J.prototype,"monitoring",{get:function(){return this.jb}});Object.defineProperty(J.prototype,"quality",{get:function(){return this.Fa[this.Qa]},set:function(a){if("number"===typeof a&&0<=a&&a<this.Fa.length)hf(this,Me.MANUAL),gf(this,a);else if(!0===B.R(a,"VideoQuality")){a:{for(var b,d=0,g=this.Fa.length;d<g;d++)if(b=this.Fa[d],b===a){a=d;break a}a=-1}if(-1!==a)hf(this,Me.MANUAL),gf(this,a);else throw"Unknown quality";}else throw"Video quality "+a+" out of bounds";}});
Object.defineProperty(J.prototype,"qualityMode",{get:function(){return this.Oa},set:function(a){a!==Me.Ob&&a!==Me.MANUAL||hf(this,a)}});Object.defineProperty(J.prototype,"qualities",{get:function(){return this.Fa}});Object.defineProperty(J.prototype,"requestIndex",{get:function(){return this.Ha}});Object.defineProperty(J.prototype,"currentIndex",{get:function(){return this.Qa}});Object.defineProperty(J.prototype,"video",{get:function(){return this.j}});
Object.defineProperty(J.prototype,"element",{get:function(){var a=this.j;return null!==a&&null!==a.element?a.element:null}});Object.defineProperty(J.prototype,"buffer",{get:function(){var a=this.j;return null!==a&&null!==a.buffer?a.buffer:null}});Object.defineProperty(J.prototype,"played",{get:function(){var a=this.j;return null!==a&&null!==a.played?a.played:null}});Object.defineProperty(J.prototype,"originalWidth",{get:function(){return df(this,"videoWidth")}});
Object.defineProperty(J.prototype,"originalHeight",{get:function(){return df(this,"videoHeight")}});Object.defineProperty(J.prototype,"currentTime",{get:function(){return this.f.time()},set:function(a){"number"===typeof a&&(this.f.seek(a),null!==this.N&&this.N.D(a))}});Object.defineProperty(J.prototype,"currentTimeMS",{get:function(){return 1E3*this.currentTime},set:function(a){this.currentTime=a/1E3}});Object.defineProperty(J.prototype,"remainingTime",{get:function(){return this.duration-this.currentTime}});
Object.defineProperty(J.prototype,"duration",{get:function(){return this.f.duration()}});Object.defineProperty(J.prototype,"durationMS",{get:function(){return Math.round(1E3*this.duration)}});Object.defineProperty(J.prototype,"metaDataLoaded",{get:function(){return this.Ei}});Object.defineProperty(J.prototype,"loop",{get:function(){return this.qf},set:function(a){"boolean"===typeof a&&(this.qf=a)}});
Object.defineProperty(J.prototype,"volume",{get:function(){return this.La},set:function(a){"number"===typeof a&&(this.La=G.$(a,0,1),this.Ea=!1,ff(this))}});Object.defineProperty(J.prototype,"muted",{get:function(){return this.Ea},set:function(a){!0===!!a?this.hb():this.ri()}});Object.defineProperty(J.prototype,"onLoadStart",{get:function(){null===this.ea&&(this.ea=new q(this));return this.ea}});
Object.defineProperty(J.prototype,"onLoadedMetaData",{get:function(){null===this.ha&&(this.ha=new q(this));return this.ha}});Object.defineProperty(J.prototype,"onLoadedData",{get:function(){null===this.fa&&(this.fa=new q(this));return this.fa}});Object.defineProperty(J.prototype,"onProgress",{get:function(){null===this.ra&&(this.ra=new q(this));return this.ra}});Object.defineProperty(J.prototype,"onDurationChange",{get:function(){null===this.S&&(this.S=new q(this));return this.S}});
Object.defineProperty(J.prototype,"onCanPlay",{get:function(){null===this.I&&(this.I=new q(this));return this.I}});Object.defineProperty(J.prototype,"onCanPlayThrough",{get:function(){null===this.J&&(this.J=new q(this));return this.J}});Object.defineProperty(J.prototype,"onPlay",{get:function(){null===this.na&&(this.na=new q(this));return this.na}});Object.defineProperty(J.prototype,"onPause",{get:function(){null===this.ka&&(this.ka=new q(this));return this.ka}});
Object.defineProperty(J.prototype,"onTimeUpdate",{get:function(){null===this.za&&(this.za=new q(this));return this.za}});Object.defineProperty(J.prototype,"onCurrentTimeChange",{get:function(){null===this.N&&(this.N=new q(this));return this.N}});Object.defineProperty(J.prototype,"onVolumeChange",{get:function(){null===this.Aa&&(this.Aa=new q(this));return this.Aa}});Object.defineProperty(J.prototype,"onSeeked",{get:function(){null===this.xa&&(this.xa=new q(this));return this.xa}});
Object.defineProperty(J.prototype,"onEnded",{get:function(){null===this.U&&(this.U=new q(this));return this.U}});Object.defineProperty(J.prototype,"onError",{get:function(){null===this.aa&&(this.aa=new q(this));return this.aa}});Object.defineProperty(J.prototype,"onStalled",{get:function(){null===this.ya&&(this.ya=new q(this));return this.ya}});Object.defineProperty(J.prototype,"onWaiting",{get:function(){return this.onStalled}});
Object.defineProperty(J.prototype,"onPlaying",{get:function(){null===this.pa&&(this.pa=new q(this));return this.pa}});Object.defineProperty(J.prototype,"onQualityRequest",{get:function(){null===this.wa&&(this.wa=new q(this));return this.wa}});Object.defineProperty(J.prototype,"onQualityChange",{get:function(){null===this.sa&&(this.sa=new q(this));return this.sa}});Object.defineProperty(J.prototype,"onQualityAbort",{get:function(){null===this.Ka&&(this.Ka=new q(this));return this.Ka}});
Object.defineProperty(J.prototype,"onMetricsChanged",{get:function(){null===this.Ca&&(this.Ca=new q(this));return this.Ca}});Object.defineProperty(J.prototype,"onQualitiesLoaded",{get:function(){null===this.G&&(this.G=new q(this,!0));return this.G}});Object.defineProperty(J.prototype,"onQualityModeChange",{get:function(){null===this.ta&&(this.ta=new q(this));return this.ta}});function We(a,b){this.c=a;this.f=b;n.call(this,"VideoTimeRanges")}We.prototype=Object.create(n.prototype);
We.prototype.constructor=We;We.prototype.j=function(a){var b=this.c[this.f];if(!this.length)return this.warn("No available range for now"),null;if(a>this.length-1)return this.warn("Time range out of bounds, returning the last available range"),this.j(this.length-1);if(0>a)return this.warn("Time range out of bounds, returning the first available range"),this.j(0);var d=b.start(a);a=b.end(a);return{start:d,end:a}};
We.prototype.Zk=function(a,b){"number"!==typeof b&&(b=0);for(var d=this.c[this.f],g,h,k=this.length;k--;)if(g=d.start(k),h=d.end(k),a>=g&&a+b<=h)return!0;return!1};Object.defineProperty(We.prototype,"length",{get:function(){return this.c[this.f].length}});function bf(a){this.m="";this.j=a||"";this.o=this.c="";this.f=this.u=this.A=0;n.call(this,"VideoQuality")}bf.prototype=Object.create(n.prototype);bf.prototype.constructor=bf;
function jf(a){var b=["mp4","webm","ogg"];a=Ka(a);if(""!==a.extension&&-1!==b.indexOf(a.extension))return"video/"+a.extension;b=["mpd"];return""!==a.extension&&-1!==b.indexOf(a.extension)?"application/dash+xml":""}Object.defineProperty(bf.prototype,"id",{get:function(){return this.m},set:function(a){if("number"===typeof a||"string"===typeof a)this.m=a}});Object.defineProperty(bf.prototype,"url",{get:function(){return this.j},set:function(a){"string"===typeof a&&(this.j=a)}});
Object.defineProperty(bf.prototype,"mimeType",{get:function(){""===this.c&&""!==this.j&&(this.c=jf(this.j));return this.c}});Object.defineProperty(bf.prototype,"name",{get:function(){return this.o},set:function(a){"string"===typeof a&&(this.o=a)}});Object.defineProperty(bf.prototype,"framerate",{get:function(){return 0}});Object.defineProperty(bf.prototype,"bitrate",{get:function(){return this.A},set:function(a){"number"===typeof a&&(this.A=a)}});
Object.defineProperty(bf.prototype,"width",{get:function(){return this.u},set:function(a){"number"===typeof a&&(this.u=a)}});Object.defineProperty(bf.prototype,"height",{get:function(){return this.f},set:function(a){"number"===typeof a&&(this.f=a)}});Object.defineProperty(bf.prototype,"speed",{get:function(){return 1}});var Me={Ob:"auto",MANUAL:"manual"},Va={mf:"dash",xm:"html5",Od:"unknown"};function xa(a){this.i=a;this.M=new kf;this.m=new kf;this.f=new kf;this.c=new kf;this.j=0}
var A={JSON:"json",Zb:"xml",IMAGE:"image",ub:"sound"},lf={Yc:["forge","forgejs","FORGE"]};lf.JSON=["forge.story.config"].concat(lf.Yc);lf.Zb=[].concat(lf.Yc);lf.IMAGE=[].concat(lf.Yc);lf.ub=[].concat(lf.Yc);function mf(a,b){var d=null;switch(b){case A.JSON:d=a.M;break;case A.Zb:d=a.m;break;case A.IMAGE:d=a.f;break;case A.ub:d=a.c}return d}function nf(a,b,d){var g=mf(a,b),h=(d||"FORGE-cache")+"-"+a.j;a.j++;return!1===g.has(h)&&!1===of(b,h)?h:nf(a,b,d)}
function of(a,b){var d=null;switch(a){case A.JSON:d=lf.JSON;break;case A.Zb:d=lf.Zb;break;case A.IMAGE:d=lf.IMAGE;break;case A.ub:d=lf.ub}a=d;return null!==a?-1!==a.indexOf(b.toLowerCase()):!1}e=xa.prototype;e.has=function(a,b){a=mf(this,a);return null!==a?a.has(b):!1};e.get=function(a,b){return!0===this.has(a,b)&&(a=mf(this,a),null!==a)?a.get(b):null};
e.add=function(a,b,d){var g;(g="string"!==typeof b||""===b)||(g=mf(this,a),g=!0===(!0===of(a,b)&&!0===g.has(b)));g&&(b=nf(this,a,a+"-cache"));return!1===this.has(b,a)&&(a=mf(this,a),null!==a)?(a.set(b,d),!0):!1};e.remove=function(a,b){return!0===this.has(a,b)&&(a=mf(this,a),null!==a)?(a.bf(b),!0):!1};e.destroy=function(){this.c=this.f=this.M=this.i=null};function pf(){}e=pf.prototype;e.key="";e.url="";e.type="";e.data=null;e.kp=null;e.Jb=!1;e.yl=!1;e.xl="";e.constructor=pf;
function za(a){this.i=a;n.call(this,"Loader")}za.prototype=Object.create(n.prototype);e=za.prototype;e.constructor=za;e.json=function(a,b,d,g,h,k){var l=new pf;l.type="json";l.key=a;l.url=b;l.c=d;l.f=g;l.M=h;l.j=k;qf(this,l,"text",this.cn,this.dn)};
e.cn=function(a,b){if(b.responseText){if(a.data=Object(JSON.parse(b.responseText)),!1===this.i.cache.has(A.JSON,a.key)?this.i.cache.add(A.JSON,a.key,a):this.log("$_Loader.json : JSON file already exists"),"function"===typeof a.c&&null!==a.f){b=a.c;var d=a.f;a.c=null;a.f=null;a.M=null;a.j=null;b.call(d,a)}}else throw"$_Loader.json : JSON file empty ?";};
e.dn=function(a,b){if(b.responseText){if("function"===typeof a.M&&null!==a.j){b=a.M;var d=a.j;a.c=null;a.f=null;a.M=null;a.j=null;b.call(d,a)}}else throw"$_Loader.json : JSON file empty ?";};e.Gl=function(a,b,d,g,h,k){h=new pf;h.type="xml";h.key=a;h.url=b;h.c=d;h.f=g;h.M=d;h.j=k;qf(this,h,"document",this.mo,this.no)};
e.mo=function(a,b){if(b.responseXML){if(a.data=b.responseXML,!1===this.i.cache.has(A.Zb,a.key)?this.i.cache.add(A.Zb,a.key,a):this.log("$_Loader.xml : XML file already exists"),"function"===typeof a.c&&null!==a.f){b=a.c;var d=a.f;a.c=null;a.f=null;a.M=null;a.j=null;b.call(d,a)}}else throw"$_Loader.xml : XML file empty ?";};
e.no=function(a,b){if(b.responseXML){if("function"===typeof a.M&&null!==a.j){b=a.M;var d=a.j;a.c=null;a.f=null;a.M=null;a.j=null;b.call(d,a)}}else throw"$_Loader.xml : JSON file empty ?";};e.sound=function(a,b,d,g,h){var k=new pf;k.type="sound";k.key=a;k.url=b;k.c=d;k.f=g;!0===this.i.audio.useWebAudio&&!0!==h?qf(this,k,"arraybuffer",this.ck):!0!==this.i.audio.useAudioTag&&!0!==h||rf(k,this.ck,this)};
e.ck=function(a,b){!0===this.i.audio.useWebAudio&&"undefined"!==typeof b&&(a.data=b.response);this.i.cache.add(A.ub,a.key,a);"function"===typeof a.c&&null!==a.f&&a.c.call(a.f,a)};
function rf(a,b,d){function g(){this.removeEventListener("canplay",h);this.removeEventListener("error",g);throw"$_Loader : Could not load HTMLMediaElement "+a.url;}function h(){this.removeEventListener("canplay",h);this.removeEventListener("error",g);"function"===typeof b&&(a.data=this,b.call(d,a))}var k=new Audio;k.addEventListener("canplay",h);k.addEventListener("error",g);k.preload="auto";k.crossOrigin="anonymous";k.src=a.url;k.load()}
function qf(a,b,d,g,h){b.Jb=!0;var k=new XMLHttpRequest;k.open("GET",b.url,!0);k.responseType=d;k.onreadystatechange=function(){if(k.readyState===XMLHttpRequest.DONE){if(200!==k.status&&k.status)throw"$_Loader._xhr : Could not load "+b.url;this.onreadystatechange=null;"function"===typeof g&&(b.loaded=!0,g.call(this,b,k))}}.bind(a);k.onerror=function(){"function"===typeof h&&h.call(this,b,k)}.bind(a);k.send()}
e.image=function(a,b,d,g){var h=new pf;h.type="image";h.key=a;h.url=b;h.data=new Image;h.data.crossOrigin="anonymous";h.data.onload=function(){h.data.onload=null;h.data.onerror=null;h.Jb=!1;h.loaded=!0;this.i.cache.add(A.IMAGE,h.key,h);d.call(g,h)}.bind(this);h.data.onerror=function(){h.data.onload=null;h.data.onerror=null;throw"ERROR : $_Loader.image, failed to load image key : "+a+" at url "+b;};h.data.src=h.url;h.Jb=!0};
e.jh=function(a,b,d){for(var g=document.getElementsByTagName("head")[0],h=g.getElementsByTagName("script"),k=0,l=h.length;k<l;k++)if(h[k].src===a){this.warn("Attempt to load an already loaded script!");b.call(d);return}var u=document.createElement("script");u.type="text/javascript";u.onload=function(){u.onload=null;b.call(d)};u.src=a;g.appendChild(u)};
e.zk=function(a,b,d){var g=document.createElement("link");g.type="text/css";g.rel="stylesheet";"undefined"!==typeof b&&"undefined"!==typeof d&&(g.onload=function(){g.onload=null;b.call(d)});g.href=a;document.getElementsByTagName("head")[0].appendChild(g)};e.destroy=function(){this.i=null;n.prototype.destroy.call(this)};function ka(a){this.i=a;this.j=this.f=0;this.c=null;n.call(this,"DependencyManager")}ka.prototype=Object.create(n.prototype);ka.prototype.constructor=ka;
ka.prototype.add=function(a){"undefined"!==typeof a&&"string"===typeof a.url&&(this.f++,this.i.load.jh(a.url,this.m,this))};ka.prototype.m=function(){this.j++;this.f-this.j||(console.log("DependencyManager : all scripts loaded"),null!==this.c&&this.c.D())};ka.prototype.destroy=function(){this.i=null;n.prototype.destroy.call(this)};Object.defineProperty(ka.prototype,"dependencies",{get:function(){return this.f}});
Object.defineProperty(ka.prototype,"onAllScriptsLoaded",{get:function(){null===this.c&&(this.c=new q(this));return this.c}});function la(a){this.i=a;this.f=0;this.c=null;n.call(this,"Clock");this.f=Date.now();this.c=[]}la.prototype=Object.create(n.prototype);e=la.prototype;e.constructor=la;e.Sn=function(a){a:{if(null!==this.c)for(var b,d=0,g=this.c.length;d<g;d++)if(b=this.c[d],b===a.emitter){a=d;break a}a=-1}-1!==a&&this.c.splice(a,1)};e.create=function(a){return this.add(new X(this.i,a))};
e.add=function(a){this.c.push(a);a.onDestroy.add(this.Sn,this);return a};e.update=function(){this.f=Date.now();for(var a=0,b=this.c.length;a<b;a++)this.c[a].update(this.f)};e.destroy=function(){this.i=null;for(var a=this.c.length;a--;)this.c[a].destroy();this.c=null};Object.defineProperty(la.prototype,"time",{get:function(){return this.f}});
function X(a,b){this.i=a;this.J="undefined"!==typeof b?b:!0;this.B=0;this.j=!1;this.I=this.L=0;this.m=!1;this.f=0;this.G=!1;this.u=this.H=this.C=this.A=this.F=this.c=null;n.call(this,"Timer");this.c=[];this.f=Date.now()}X.prototype=Object.create(n.prototype);e=X.prototype;e.constructor=X;function sf(a,b){for(var d=0;d<a.c.length;d++){var g=a.c[d];if(!1===g.f){var h=g.c-b;0>h&&(h=0);g.c=a.f+h}}b=a.o-b;a.o=0>b?a.f:a.f+b}function tf(a){0<a.c.length&&(a.c.sort(a.co),a.o=a.c[0].c)}
e.co=function(a,b){return a.c<b.c?-1:a.c>b.c?1:0};e.create=function(a,b,d,g,h,k){var l=a=Math.round(a);this.f?l+=this.f:l+=this.i.clock.time;a=new uf(0,a,l,d,b,g,h,k);this.c.push(a);tf(this);this.G=!1;return a};e.add=function(a,b,d,g){return this.create(a,!1,0,b,d,Array.prototype.splice.call(arguments,3))};e.jm=function(a,b,d,g){return this.create(a,!1,b,d,g,Array.prototype.splice.call(arguments,4))};e.hf=function(a,b,d){return this.create(a,!0,0,b,d,Array.prototype.splice.call(arguments,3))};
e.remove=function(a){for(var b=0;b<this.c.length;b++)if(this.c[b]===a)return this.c[b].f=!0;return!1};e.start=function(){if(!0!==this.j){this.B=this.i.clock.time;this.j=!0;for(var a,b=0;b<this.c.length;b++)a=this.c[b],a.c=a.delay+this.B;null!==this.F&&this.F.D()}};e.stop=function(a){this.j=!1;!1!==a&&(this.c.length=0);null!==this.H&&this.H.D()};e.pause=function(){!1!==this.j&&!0!==this.m&&(this.L=this.i.clock.time,this.m=!0,null!==this.A&&this.A.D())};
e.resume=function(){if(!1!==this.m){var a=this.i.clock.time;this.I+=a-this.f;this.f=a;sf(this,this.L);this.m=!1;null!==this.C&&this.C.D()}};
e.update=function(a){if(!0!==this.m){var b=a-this.f;this.f=a;1E3<b&&sf(this,a-b);for(a=this.c.length;a--;)!0===this.c[a].f&&this.c.splice(a,1);a=this.c.length;var d=b=0;if(!0===this.j&&this.f>=this.o&&0<a){for(var g;b<a&&!0===this.j;)if(g=this.c[b],this.f>=g.c&&!1===g.f){var h=this.f+g.delay-(this.f-g.c);0>h&&(h=this.f+g.delay);!0===g.loop?g.c=h:0<g.M?(g.M--,g.c=h):(d++,g.f=!0);g.Gb();b++}else break;this.c.length>d?tf(this):(this.G=!0,this.j=!1,null!==this.u&&this.u.D())}this.G&&this.J&&this.destroy()}};
e.destroy=function(){this.j=!1;this.c=[];n.prototype.destroy.call(this)};Object.defineProperty(X.prototype,"autoDestroy",{get:function(){return this.J}});Object.defineProperty(X.prototype,"running",{get:function(){return this.j}});Object.defineProperty(X.prototype,"paused",{get:function(){return this.m}});Object.defineProperty(X.prototype,"next",{get:function(){return this.o}});Object.defineProperty(X.prototype,"duration",{get:function(){return this.j&&this.o>this.f?this.o-this.f:0}});
Object.defineProperty(X.prototype,"length",{get:function(){return this.c.length}});Object.defineProperty(X.prototype,"ms",{get:function(){return this.j?this.f-this.B-this.I:0}});Object.defineProperty(X.prototype,"seconds",{get:function(){return this.j?.001*this.ms:0}});Object.defineProperty(X.prototype,"onStart",{get:function(){null===this.F&&(this.F=new q(this));return this.F}});Object.defineProperty(X.prototype,"onPause",{get:function(){null===this.A&&(this.A=new q(this));return this.A}});
Object.defineProperty(X.prototype,"onResume",{get:function(){null===this.C&&(this.C=new q(this));return this.C}});Object.defineProperty(X.prototype,"onStop",{get:function(){null===this.H&&(this.H=new q(this));return this.H}});Object.defineProperty(X.prototype,"onComplete",{get:function(){null===this.u&&(this.u=new q(this));return this.u}});function uf(a,b,d,g,h,k,l,u){this.delay=b;this.c=d;this.M=g-1;this.loop=h;this.m=k;this.o=l;this.j=u;this.f=!1}uf.prototype.constructor=uf;
uf.prototype.Gb=function(){this.m.apply(this.o,this.j)};function Aa(a){this.i=a;this.c=[];n.call(this,"TweenManager")}Aa.prototype=Object.create(n.prototype);e=Aa.prototype;e.constructor=Aa;e.jo=function(a){this.remove(a.emitter)};e.add=function(a){this.c.push(a);a.onDestroy.ca(this.jo,this)};e.remove=function(a){a:{for(var b=0,d=this.c.length;b<d;b++)if(a===this.c[b]){a=b;break a}a=-1}-1!==a&&this.c.splice(a,1)};e.update=function(){for(var a=0,b=this.c.length;a<b;a++)this.c[a].update()};
e.destroy=function(){for(var a=this.c.length;a--;)this.c[a].destroy();this.i=this.c=null;n.prototype.destroy.call(this)};function Pb(a,b){this.i=a;this.C=b;this.f=null;this.c=Yd.LINEAR;this.H=null;this.A=this.F=this.B=!1;this.u=this.j=this.m=this.o=null;n.call(this,"Tween")}Pb.prototype=Object.create(n.prototype);e=Pb.prototype;e.constructor=Pb;
e.jf=function(a,b,d){null===this.f&&(this.f={});for(var g in a)this.f[g]={name:g,min:null,max:a[g],duration:"number"===typeof b?b:0,easing:"function"===typeof d?d:null,started:!1,complete:!1,startTime:null};return this};e.start=function(){this.H=Date.now();this.B=!0;this.A=this.F=!1;var a,b;for(b in this.f)a=this.f[b],a.min=this.C[b],a.max="string"===typeof this.f[b].max?a.min+parseInt(this.f[b].max,10):a.max,a.started=!0,a.startTime=this.H;null!==this.o&&this.o.D();return this};
e.stop=function(){this.F=!0;null!==this.u&&this.u.D();return this};e.update=function(){if(!1!==this.B&&!0!==this.A&&!0!==this.F){var a,b=0,d;for(d in this.f){a=this.f[d];if(!1===a.complete){var g=a,h=Date.now()-g.startTime;g.complete=h>=g.duration;!1===g.complete?(h=(null!==g.easing?g.easing:this.c)(h/g.duration),this.C[g.name]=h*(g.max-g.min)+g.min):this.C[g.name]=g.max}!1===a.complete&&b++}null!==this.m&&this.m.D();b||(this.A=!0,null!==this.j&&this.j.D())}};
e.destroy=function(){this.stop();this.c=this.f=this.C=this.i=null;null!==this.o&&(this.o.destroy(),this.o=null);null!==this.m&&(this.m.destroy(),this.m=null);null!==this.j&&(this.j.destroy(),this.j=null);null!==this.u&&(this.u.destroy(),this.u=null);n.prototype.destroy.call(this)};
Object.defineProperty(Pb.prototype,"easing",{get:function(){return this.c},set:function(a){if("string"===typeof a)switch(a){case Y.LINEAR:this.c=Yd.LINEAR;break;case Y.Ld:this.c=Yd.Ld;break;case Y.Md:this.c=Yd.Md;break;case Y.Nd:this.c=Yd.Nd;break;case Y.Hd:this.c=Yd.Hd;break;case Y.Id:this.c=Yd.Id;break;case Y.Jd:this.c=Yd.Jd;break;case Y.Bd:this.c=Yd.Bd;break;case Y.Cd:this.c=Yd.Cd;break;case Y.Dd:this.c=Yd.Dd;break;case Y.Xc:this.c=Yd.Xc;break;case Y.zd:this.c=Yd.zd;break;default:this.c=Yd.LINEAR}else"function"===
typeof a&&(this.c=a)}});Object.defineProperty(Pb.prototype,"complete",{get:function(){return this.A}});Object.defineProperty(Pb.prototype,"onStart",{get:function(){null===this.o&&(this.o=new q(this));return this.o}});Object.defineProperty(Pb.prototype,"onProgress",{get:function(){null===this.m&&(this.m=new q(this));return this.m}});Object.defineProperty(Pb.prototype,"onComplete",{get:function(){null===this.j&&(this.j=new q(this));return this.j}});
Object.defineProperty(Pb.prototype,"onStop",{get:function(){null===this.u&&(this.u=new q(this));return this.u}});
var Yd={LINEAR:function(a){return G.$(a,0,1)},Ld:function(a){return G.$(1+Math.sin(Math.PI/2*(a-1)),0,1)},Md:function(a){return G.$(.5*(1+Math.sin(Math.PI/2*(2*a-1))),0,1)},Nd:function(a){return G.$(Math.sin(Math.PI/2*a),0,1)},Hd:function(a){return G.$(a*a,0,1)},Id:function(a){return G.$(.5>a?2*a*a:1-2*(a-1)*(a-1),0,1)},Jd:function(a){a=1-a;return G.$(1-a*a,0,1)},Bd:function(a){return G.$(a*a*a,0,1)},Cd:function(a){return G.$(.5>a?4*a*a*a:1+4*(a-1)*(a-1)*(a-1),0,1)},Dd:function(a){a=1-a;return G.$(1-
a*a*a,0,1)},Xc:function(a){a<1/2.75?a*=7.5625*a:a<2/2.75?(a-=1.5/2.75,a=7.5625*a*a+.75):a<2.5/2.75?(a-=2.25/2.75,a=7.5625*a*a+.9375):(a-=2.625/2.75,a=7.5625*a*a+.984375);return G.$(a,0,1)},zd:function(a){return 1-Yd.Xc(1-a)}},Y={LINEAR:"linear",Ld:"easeInSine",Md:"easeInOutSine",Nd:"easeOutSine",Hd:"easeInQuad",Id:"easeInOutQuad",Jd:"easeOutQuad",Bd:"easeInCubic",Cd:"easeInOutCubic",Dd:"easeOutCubic",Xc:"easeOutBounce",zd:"easeInBounce"},B={gh:function(a){var b={value:null,Sc:null};if("string"===
typeof a){var d=parseInt(a,10);!1===isNaN(d)&&(b.value=d);-1<a.indexOf("%")?b.Sc="%":-1<a.indexOf("px")&&(b.Sc="px")}return b},Pa:function(a,b,d){var g={};a="undefined"!==typeof a?a:{};b="undefined"!==typeof b?b:{};for(var h in a)a.hasOwnProperty(h)&&(g[h]=a[h]);for(var k in b)b.hasOwnProperty(k)&&(g[k]=!1!==d&&null!==a&&null!==b[k]&&"undefined"!==typeof b[k]&&b[k].constructor===Object?B.Pa(a[k],b[k],!0):b[k]);return g},gb:function(a){for(var b=arguments,d={},g=0,h=b.length;g<h;g++)d=B.Pa(d,b[g],
!0);return d},clone:function(a){if(!(a instanceof Object))return a;var b=new a.constructor,d;for(d in a)b[d]=B.clone(a[d]);return b},Oo:function(a){return null!==a&&"object"===typeof a&&"string"===typeof a.className&&-1!==de.indexOf(a.className)?!0:!1},R:function(a,b){if("string"===typeof b&&(null!==a&&"object"===typeof a&&"string"===typeof a.className&&a.className.toLowerCase()===b.toLowerCase()||typeof a===b.toLowerCase()))return!0;if(!0===Array.isArray(b)&&!0===B.Ga(b,"string"))for(var d=0,g=b.length;d<
g;d++)if(!0===B.R(a,b[d]))return!0;return!1},Ro:function(a,b,d){b=b.split(".");for(var g=0,h=b.length;g<h;g++){a=a[b[g]];if(g===h-1)return B.R(a,d);if("undefined"===typeof a)break}return!1},Ga:function(a,b){if("object"===typeof a&&!0===Array.isArray(a)){for(var d=0,g=a.length;d<g;d++)if(!1===B.R(a[d],b))return!1;return!0}return!1},ve:function(a,b,d){b=b.split(".");for(var g=0,h=b.length;g<h;g++){a=a[b[g]];if("undefined"===typeof a)break;if(g===h-1)return a}return d},ud:function(a,b){var d=b.split("."),
g=d.length;a.sort(function(a,b){for(var h=0;h<g;)a=a[d[h]],b=b[d[h]],h++;return a<b?-1:a>b?1:0});return a},td:function(a){a=a.slice();for(var b,d,g=a.length-1;0<g;g--)d=~~(Math.random()*(g+1)),b=a[g],a[g]=a[d],a[d]=b;return a},Ce:function(a,b,d){for(a=String(a);a.length<d;)a=b+a;return a},el:function(a){a={input:a,hours:0,minutes:0,seconds:0};if("number"!==typeof a.input||isNaN(a.input))return a;a.Lo=parseInt(a.input/3600,10)%24;a.To=parseInt(a.input/60,10)%60;a.seconds=parseInt(a.input%60,10);return a},
yo:function(a,b){a=B.el(a);var d="string"===typeof b?b:"H:M:S";b=0;-1!==d.indexOf("H")?b=2:-1!==d.indexOf("h")&&(b=1);var g=0;-1!==d.indexOf("M")?g=2:-1!==d.indexOf("m")&&(g=1);var h=0;-1!==d.indexOf("S")?h=2:-1!==d.indexOf("s")&&(h=1);d=d.toLowerCase();0<b&&(d=d.replace("h",B.Ce(a.Lo,0,b)));0<g&&(d=d.replace("m",B.Ce(a.To,0,g)));0<h&&(d=d.replace("s",B.Ce(a.seconds,0,h)));return d},Me:function(a,b,d){return new THREE.Spherical(a,Math.PI/2-d,b)},Bo:function(a){return{radius:a.radius,theta:a.theta,
phi:Math.PI/2-a.phi}},wk:function(a,b){return a.filter(function(a){return 0>b.indexOf(a)})},Wo:function(a,b){return b>=a.length?null:a.splice(b,1)},endsWith:function(a,b){return"function"!==typeof String.prototype.endsWith?-1!==a.indexOf(b,a.length-b.length):a.endsWith(b)},Vg:function(a){if(!Array.prototype.keys){var b,d={},g=0;b=a.length;d.array=[];for(d.length=a.length;0<b;)d.array[--b]=b;d.next=function(){return g<a.length?{value:g++,done:!1}:{done:!0}};return d}return a.keys()}},ha={md:function(a,
b){var d=window.getComputedStyle(a,null).getPropertyValue("display");a.style.display="none";b=window.getComputedStyle(a,null).getPropertyValue(b);a.style.display=d;return b},Ok:function(a){a=ha.md(a,"width");var b="px";-1<a.indexOf("%")&&(b="%");-1<a.indexOf("px")&&(b="px");return b},Qk:function(a){a=parseInt(ha.md(a,"width"),10);return isNaN(a)?0:a},Nk:function(a){a=ha.md(a,"height");var b="px";-1<a.indexOf("%")&&(b="%");-1<a.indexOf("px")&&(b="px");return b},Pk:function(a){a=parseInt(ha.md(a,"height"),
10);return isNaN(a)?0:a},has:function(a){return document.body.contains(a)},bh:function(a){return a instanceof HTMLElement},Do:function(a){var b,d;d=["MouseEvent","PointerEvent","TouchEvent"];"object"===typeof a.srcEvent&&d.indexOf(a.srcEvent.constructor.toString())?(b=a.target.getBoundingClientRect(),d=a.srcEvent.clientX-b.left,a=a.srcEvent.clientY-b.top):(b=(a.currentTarget||a.target||a.srcElement).getBoundingClientRect(),d=a.clientX-b.left,a=a.clientY-b.top);return{x:d,y:a}}};
function kf(){this.f=0;this.c={}}e=kf.prototype;e.constructor=kf;e.set=function(a,b){if("undefined"!==typeof a)return void 0===this.c[a]&&this.f++,this.c[a]=b,this.f};e.bf=function(a){if("undefined"!==typeof a&&void 0!==this.c[a])return delete this.c[a],--this.f};e.get=function(a){return this.c[a]};e.Jl=function(){var a=new Md,b;for(b in this.c)a.add(b);return a.Ke()};e.Kl=function(){var a=new Md,b;for(b in this.c)a.add(this.c[b]);return a.Ke()};
e.Il=function(){var a=new Md,b;for(b in this.c){var d=[];d.push(b);d.push(this.c[b]);a.add(d)}return a.Ke()};e.Hl=function(){for(var a in this.c)this.bf(a)};e.has=function(a){return 0<this.f&&void 0!==this.c[a]};Object.defineProperty(kf.prototype,"size",{get:function(){return this.f}});function Md(){this.c=[]}e=Md.prototype;e.constructor=Md;e.add=function(a){this.c.push(a);return this.c.length};e.remove=function(a){for(var b=0,d=this.c.length;b<d;b++)this.c[b]===a&&this.c.splice(b,1)};e.get=function(a){return this.c[a]};
e.Ke=function(){return this.c};Object.defineProperty(Md.prototype,"size",{get:function(){return this.c.length}});function vf(a){this.j=a;this.c=this.F=this.f=this.A=this.u=this.C="";this.o=null;this.m="";n.call(this,"URL")}vf.prototype=Object.create(n.prototype);vf.prototype.constructor=vf;
function Ka(a){var b=new vf;"string"!==typeof a&&(a=window.location.toString());b.j=a;a=document.createElement("a");a.href=b.j;b.C=a.protocol;b.u=a.hostname;b.A=a.port;b.f=a.pathname;b.F=a.search;b.c=a.hash;b.m=b.f.substr(b.f.lastIndexOf(".")+1);if(""!==b.c){a=b.c.replace("#","").split("&");var d={};d.slug=a[0];for(var g=1,h=a.length;g<h;g++){var k=a[g].split("=");d[k[0]]=decodeURIComponent(k[1])}b.o=d}return b}Object.defineProperty(vf.prototype,"url",{get:function(){return this.j}});
Object.defineProperty(vf.prototype,"protocol",{get:function(){return this.C}});Object.defineProperty(vf.prototype,"host",{get:function(){return this.u}});Object.defineProperty(vf.prototype,"port",{get:function(){return this.A}});Object.defineProperty(vf.prototype,"path",{get:function(){return this.f}});Object.defineProperty(vf.prototype,"query",{get:function(){return this.F}});Object.defineProperty(vf.prototype,"hash",{get:function(){return this.c}});
Object.defineProperty(vf.prototype,"hashParameters",{get:function(){return this.o}});Object.defineProperty(vf.prototype,"extension",{get:function(){return this.m}});
var Z={Yo:function(a,b,d){a/=255;b/=255;d/=255;var g=Math.max(a,b,d),h=Math.min(a,b,d),k,l=(g+h)/2;if(g===h)k=h=0;else{var u=g-h,h=.5<l?u/(2-g-h):u/(g+h);switch(g){case a:k=(b-d)/u+(b<d?6:0);break;case b:k=(d-a)/u+2;break;case d:k=(a-b)/u+4}k/=6}return{h:k,s:h,l:l}},Mo:function(a,b,d){if(b){var g=.5>d?d*(1+b):d+b-d*b,h=2*d-g;d=Z.ze(h,g,a+1/3);b=Z.ze(h,g,a);a=Z.ze(h,g,a-1/3)}else d=b=a=d;return{r:255*d,g:255*b,b:255*a}},ze:function(a,b,d){if(!(0>d||1<d)){if(d<1/6)return a+6*(b-a)*d;if(.5>d)return b;
if(d<2/3)return a+(b-a)*(2/3-d)*6}return a},Zo:function(a,b,d){a/=255;b/=255;d/=255;var g=Math.max(a,b,d),h=Math.min(a,b,d),k,l=g-h;if(g===h)k=0;else{switch(g){case a:k=(b-d)/l+(b<d?6:0);break;case b:k=(d-a)/l+2;break;case d:k=(a-b)/l+4}k/=6}return{h:k,s:g?l/g:0,v:g}},No:function(a,b,d){var g,h,k,l=Math.floor(6*a),u=6*a-l;a=d*(1-b);var w=d*(1-u*b);b=d*(1-(1-u)*b);switch(l%6){case 0:g=d;h=b;k=a;break;case 1:g=w;h=d;k=a;break;case 2:g=a;h=d;k=b;break;case 3:g=a;h=w;k=d;break;case 4:g=b;h=a;k=d;break;
case 5:g=d,h=a,k=w}return{r:255*g,g:255*h,b:255*k}},me:function(a){a=a.toString(16);return 1===a.length?"0"+a:a},Xo:function(a,b,d){return"#"+Z.me(a)+Z.me(b)+Z.me(d)},zo:function(a){a=a.split("(")[1].split(")")[0].split(",");var b={r:parseInt(a[0],10),g:parseInt(a[1],10),b:parseInt(a[2],10)};3<a.length&&(b.a=parseInt(a[3],10));return b},Ko:function(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,d,g,h){return d+d+g+g+h+h});return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?
{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},$o:function(a){a=new THREE.Vector3(a.r,a.g,a.b);var b=(new THREE.Matrix3).set(.299,.587,.114,-.169,-.331,.5,.5,-.419,-.081),d=new THREE.Vector3(0,128,128);a.applyMatrix3(b).add(d);return{Y:a.x,Cr:a.y,Cb:a.z}},mp:function(a){a=new THREE.Vector3(a.Y,a.Cr,a.Cb);var b=new THREE.Vector3(0,-128,-128),d=(new THREE.Matrix3).set(1,0,1.4,1,-.343,-.711,1,1.765,0);a.add(b).applyMatrix3(d);return{r:a.x,g:a.y,b:a.z}},lp:function(a,b){var d=G.T(b);
b=Math.cos(d);d=Math.sin(d);return{Y:a.Y,Cb:a.Cb*b-a.Cr*d,Cr:a.Cb*d+a.Cr*b}},distance:function(a,b){return Math.sqrt((a.Cb-b.Cb)*(a.Cb-b.Cb)+(a.Cr-b.Cr)*(a.Cr-b.Cr))}};function dc(a,b,d,g){this.alpha=g}window.FORGE=window.FORGE||{};window.FORGE.BaseObject=n;window.FORGE.Viewer=r;window.FORGE.Tags=ca;window.FORGE.UID=p;window.FORGE.EventDispatcher=q;window.FORGE.Event=Fa;window.FORGE.Listener=Da;window.FORGE.Story=x;window.FORGE.Group=D;window.FORGE.Scene=C;window.FORGE.Rectangle=Qa;
window.FORGE.Size=Ra;window.FORGE.Media=Oa;window.FORGE.RenderManager=y;window.FORGE.RenderScene=jb;window.FORGE.RenderPipeline=ab;window.FORGE.RenderDisplay=Za;window.FORGE.RenderParams=zb;window.FORGE.BackgroundRenderer=Ab;window.FORGE.BackgroundMeshRenderer=ib;window.FORGE.BackgroundShaderRenderer=hb;window.FORGE.PostProcessing=ua;window.FORGE.EffectComposer=kb;window.FORGE.TexturePass=ob;window.FORGE.ShaderPass=qb;window.FORGE.AdditionPass=tb;window.FORGE.RenderPass=mb;
window.FORGE.ViewManager=Xa;window.FORGE.ViewBase=O;window.FORGE.ViewFlat=Ib;window.FORGE.ViewGoPro=Hb;window.FORGE.ViewRectilinear=Jb;window.FORGE.Timeline=Mb;window.FORGE.Keyframe=Nb;window.FORGE.Animation=Ob;window.FORGE.MetaAnimation=Sb;window.FORGE.Track=Vb;window.FORGE.Object3D=Wb;window.FORGE.ObjectRenderer=$a;window.FORGE.Raycaster=ac;window.FORGE.PickingDrawPass=ec;window.FORGE.PickingManager=Ya;window.FORGE.HotspotManager=ra;window.FORGE.Hotspot3D=hc;window.FORGE.HotspotSound=tc;
window.FORGE.HotspotMaterial=lc;window.FORGE.HotspotTransform=jc;window.FORGE.HotspotAnimation=kc;window.FORGE.HotspotAnimationTrack=ic;window.FORGE.HotspotStates=oc;window.FORGE.Camera=L;window.FORGE.CameraAnimation=Vc;window.FORGE.CameraGaze=Dc;window.FORGE.ControllerManager=pa;window.FORGE.ControllerBase=fd;window.FORGE.ControllerPointer=cd;window.FORGE.ControllerKeyboard=dd;window.FORGE.ControllerGyroscope=ed;window.FORGE.SoundManager=v;window.FORGE.Sound=N;window.FORGE.Playlist=Q;
window.FORGE.PlaylistManager=z;window.FORGE.PlaylistTrack=vd;window.FORGE.Director=ta;window.FORGE.DirectorTrack=Uc;window.FORGE.ActionEventDispatcher=Ia;window.FORGE.Action=xd;window.FORGE.ActionManager=sa;window.FORGE.Plugin=R;window.FORGE.PluginEngine=Ed;window.FORGE.PluginManager=qa;window.FORGE.PluginObjectFactory=Dd;window.FORGE.Device=I;window.FORGE.System=ja;window.FORGE.RequestAnimationFrame=ma;window.FORGE.History=oa;window.FORGE.LocaleManager=na;window.FORGE.LocaleString=Na;
window.FORGE.Locale=Rd;window.FORGE.Keyboard=va;window.FORGE.KeyBinding=P;window.FORGE.Drag=Xd;window.FORGE.Pointer=U;window.FORGE.Gyroscope=wa;window.FORGE.DisplayList=ga;window.FORGE.DisplayObject=T;window.FORGE.DisplayObjectContainer=t;window.FORGE.Iframe=ke;window.FORGE.TextField=S;window.FORGE.Button=Nd;window.FORGE.ButtonSkin=ve;window.FORGE.Canvas=ia;window.FORGE.Image=Ua;window.FORGE.Sprite=Ac;window.FORGE.SpriteAnimationManager=Je;window.FORGE.SpriteAnimation=W;window.FORGE.VideoBase=Le;
window.FORGE.VideoHTML5=K;window.FORGE.VideoDash=J;window.FORGE.VideoTimeRanges=We;window.FORGE.VideoQuality=bf;window.FORGE.Cache=xa;window.FORGE.File=pf;window.FORGE.Loader=za;window.FORGE.DependencyManager=ka;window.FORGE.Clock=la;window.FORGE.Timer=X;window.FORGE.TimerEvent=uf;window.FORGE.TweenManager=Aa;window.FORGE.Tween=Pb;window.FORGE.Map=kf;window.FORGE.Collection=Md;window.FORGE.URL=vf;window.FORGE.ColorRGBA=dc;n.prototype.log=n.prototype.log;n.prototype.warn=n.prototype.warn;
n.prototype.destroy=n.prototype.destroy;r.prototype.update=r.prototype.update;r.prototype.pause=r.prototype.pause;r.prototype.resume=r.prototype.resume;r.prototype.destroy=r.prototype.destroy;q.prototype.add=q.prototype.add;q.prototype.addOnce=q.prototype.ca;q.prototype.remove=q.prototype.remove;q.prototype.has=q.prototype.has;q.prototype.dispatch=q.prototype.D;q.prototype.destroy=q.prototype.destroy;Da.prototype.execute=Da.prototype.Gb;Da.prototype.detach=Da.prototype.Jh;Da.prototype.destroy=Da.prototype.destroy;
x.prototype.boot=x.prototype.boot;x.prototype.load=x.prototype.load;x.prototype.hasScenes=x.prototype.gm;x.prototype.hasGroups=x.prototype.xc;x.prototype.nextScene=x.prototype.hm;x.prototype.previousScene=x.prototype.im;x.prototype.loadScene=x.prototype.Qc;x.prototype.loadGroup=x.prototype.fh;x.prototype.notifySceneConfigLoadComplete=x.prototype.dl;x.prototype.destroy=x.prototype.destroy;D.prototype.load=D.prototype.load;D.prototype.hasChild=D.prototype.Ve;D.prototype.hasScene=D.prototype.Pc;
D.prototype.hasGroup=D.prototype.nd;D.prototype.hasChildren=D.prototype.Go;D.prototype.hasTypeOfChild=D.prototype.ah;D.prototype.hasScenes=D.prototype.We;D.prototype.hasGroups=D.prototype.xc;D.prototype.getChildrenUids=D.prototype.ld;D.prototype.getChildren=D.prototype.se;D.prototype.nextScene=D.prototype.zl;D.prototype.previousScene=D.prototype.Al;D.prototype.destroy=D.prototype.destroy;C.prototype.addConfig=C.prototype.ia;C.prototype.load=C.prototype.load;C.prototype.loadStart=C.prototype.$k;
C.prototype.unload=C.prototype.Ne;C.prototype.hasGroup=C.prototype.nd;C.prototype.hasGroups=C.prototype.xc;C.prototype.hasSoundSource=C.prototype.Tk;C.prototype.hasSoundTarget=C.prototype.Uk;C.prototype.isAmbisonic=C.prototype.Yk;C.prototype.destroy=C.prototype.destroy;Oa.prototype.destroy=Oa.prototype.destroy;y.prototype.update=y.prototype.update;y.prototype.render=y.prototype.render;y.prototype.enableVR=y.prototype.hi;y.prototype.disableVR=y.prototype.gi;y.prototype.toggleVR=y.prototype.fp;
y.prototype.destroy=y.prototype.destroy;jb.prototype.setSize=jb.prototype.setSize;jb.prototype.destroy=jb.prototype.destroy;ab.prototype.enablePicking=ab.prototype.Wg;ab.prototype.addBackground=ab.prototype.Tg;ab.prototype.addRenderScenes=ab.prototype.tk;ab.prototype.addGlobalFx=ab.prototype.sk;ab.prototype.getShaderPassByUID=ab.prototype.Eo;ab.prototype.setSize=ab.prototype.setSize;ab.prototype.render=ab.prototype.render;ab.prototype.clear=ab.prototype.ff;ab.prototype.destroy=ab.prototype.destroy;
Za.prototype.enableVR=Za.prototype.di;Za.prototype.disableVR=Za.prototype.ci;Za.prototype.getQuaternionFromPose=Za.prototype.Ik;Za.prototype.getRenderParams=Za.prototype.Kk;Za.prototype.setSize=Za.prototype.setSize;Za.prototype.submitFrame=Za.prototype.ei;Za.prototype.destroy=Za.prototype.destroy;Ab.prototype.updateAfterViewChange=Ab.prototype.Ac;Ab.prototype.setSize=Ab.prototype.setSize;Ab.prototype.render=Ab.prototype.render;Ab.prototype.update=Ab.prototype.update;Ab.prototype.destroy=Ab.prototype.destroy;
ib.prototype.updateAfterViewChange=ib.prototype.Ac;ib.prototype.render=ib.prototype.render;ib.prototype.destroy=ib.prototype.destroy;hb.prototype.render=hb.prototype.render;hb.prototype.updateAfterViewChange=hb.prototype.Ac;hb.prototype.destroy=hb.prototype.destroy;ua.prototype.parseShaderPasses=ua.prototype.Fe;ua.prototype.getFxSetByUID=ua.prototype.te;ua.prototype.addConfig=ua.prototype.ia;ua.prototype.destroy=ua.prototype.destroy;kb.prototype.destroy=kb.prototype.destroy;qb.prototype.render=qb.prototype.render;
tb.prototype.destroy=tb.prototype.destroy;Xa.prototype.notifyChange=Xa.prototype.sd;Xa.prototype.load=Xa.prototype.load;Xa.prototype.enableVR=Xa.prototype.wi;Xa.prototype.disableVR=Xa.prototype.vi;Xa.prototype.destroy=Xa.prototype.destroy;O.prototype.updateUniforms=O.prototype.Nb;O.prototype.worldToScreen=O.prototype.worldToScreen;O.prototype.screenToWorld=O.prototype.screenToWorld;O.prototype.getProjectionFov=O.prototype.we;O.prototype.destroy=O.prototype.destroy;Ib.prototype.updateUniforms=Ib.prototype.Nb;
Ib.prototype.worldToScreen=Ib.prototype.worldToScreen;Ib.prototype.screenToWorld=Ib.prototype.screenToWorld;Ib.prototype.destroy=Ib.prototype.destroy;Hb.prototype.updateUniforms=Hb.prototype.Nb;Hb.prototype.getProjectionFov=Hb.prototype.we;Hb.prototype.destroy=Hb.prototype.destroy;Jb.prototype.updateUniforms=Jb.prototype.Nb;Jb.prototype.worldToScreen=Jb.prototype.worldToScreen;Jb.prototype.screenToWorld=Jb.prototype.screenToWorld;Jb.prototype.destroy=Jb.prototype.destroy;
Mb.prototype.hasKeyframes=Mb.prototype.Ho;Mb.prototype.addKeyframe=Mb.prototype.rb;Mb.prototype.getKeyframes=Mb.prototype.Co;Mb.prototype.getKeyframesIndexes=Mb.prototype.ue;Mb.prototype.getSideKeyframes=Mb.prototype.Lk;Mb.prototype.getSideKeyframesIndexes=Mb.prototype.Mk;Mb.prototype.emptyKeyframes=Mb.prototype.xo;Mb.prototype.destroy=Mb.prototype.destroy;Ob.prototype.play=Ob.prototype.play;Ob.prototype.stop=Ob.prototype.stop;Ob.prototype.resume=Ob.prototype.resume;Ob.prototype.destroy=Ob.prototype.destroy;
Sb.prototype.stop=Sb.prototype.stop;Sb.prototype.resume=Sb.prototype.resume;Sb.prototype.destroy=Sb.prototype.destroy;Vb.prototype.destroy=Vb.prototype.destroy;Wb.prototype.click=Wb.prototype.click;Wb.prototype.over=Wb.prototype.Bc;Wb.prototype.out=Wb.prototype.nc;Wb.prototype.destroy=Wb.prototype.destroy;$a.prototype.register=$a.prototype.register;$a.prototype.unregister=$a.prototype.unregister;$a.prototype.createRenderScenes=$a.prototype.yk;$a.prototype.getRaycastable=$a.prototype.Jk;
$a.prototype.getByMesh=$a.prototype.Gk;$a.prototype.clear=$a.prototype.df;$a.prototype.destroy=$a.prototype.destroy;ac.prototype.start=ac.prototype.start;ac.prototype.stop=ac.prototype.stop;ac.prototype.click=ac.prototype.click;ac.prototype.clear=ac.prototype.bi;ec.prototype.start=ec.prototype.start;ec.prototype.stop=ec.prototype.stop;ec.prototype.click=ec.prototype.click;ec.prototype.setSize=ec.prototype.setSize;ec.prototype.clear=ec.prototype.Lh;ec.prototype.destroy=ec.prototype.destroy;
Ya.prototype.updateForViewType=Ya.prototype.nl;Ya.prototype.clear=Ya.prototype.Mh;Ya.prototype.setSize=Ya.prototype.setSize;Ya.prototype.click=Ya.prototype.click;Ya.prototype.start=Ya.prototype.start;Ya.prototype.stop=Ya.prototype.stop;Ya.prototype.destroy=Ya.prototype.destroy;ra.prototype.boot=ra.prototype.boot;ra.prototype.getByType=ra.prototype.Dl;ra.prototype.addConfig=ra.prototype.ia;ra.prototype.addTracks=ra.prototype.uk;ra.prototype.update=ra.prototype.update;ra.prototype.clear=ra.prototype.Ye;
ra.prototype.destroy=ra.prototype.destroy;hc.prototype.over=hc.prototype.Bc;hc.prototype.out=hc.prototype.nc;hc.prototype.update=hc.prototype.update;hc.prototype.destroy=hc.prototype.destroy;tc.prototype.load=tc.prototype.load;tc.prototype.update=tc.prototype.update;tc.prototype.destroy=tc.prototype.destroy;lc.prototype.updateShader=lc.prototype.ol;lc.prototype.load=lc.prototype.load;lc.prototype.update=lc.prototype.update;lc.prototype.setTextureFrame=lc.prototype.lh;lc.prototype.destroy=lc.prototype.destroy;
jc.prototype.load=jc.prototype.load;jc.prototype.destroy=jc.prototype.destroy;kc.prototype.load=kc.prototype.load;kc.prototype.play=kc.prototype.play;kc.prototype.destroy=kc.prototype.destroy;oc.prototype.addConfig=oc.prototype.ia;oc.prototype.load=oc.prototype.load;oc.prototype.toggle=oc.prototype.Fl;oc.prototype.destroy=oc.prototype.destroy;L.prototype.load=L.prototype.load;L.prototype.lookAt=L.prototype.al;L.prototype.update=L.prototype.update;L.prototype.destroy=L.prototype.destroy;
Vc.prototype.play=Vc.prototype.play;Vc.prototype.destroy=Vc.prototype.destroy;Dc.prototype.load=Dc.prototype.load;Dc.prototype.start=Dc.prototype.start;Dc.prototype.stop=Dc.prototype.stop;Dc.prototype.update=Dc.prototype.update;Dc.prototype.destroy=Dc.prototype.destroy;pa.prototype.notifyControlStart=pa.prototype.Ee;pa.prototype.notifyControlEnd=pa.prototype.De;pa.prototype.update=pa.prototype.update;pa.prototype.addConfig=pa.prototype.ia;pa.prototype.getByType=pa.prototype.ul;
pa.prototype.destroy=pa.prototype.destroy;fd.prototype.enable=fd.prototype.enable;fd.prototype.disable=fd.prototype.bb;fd.prototype.destroy=fd.prototype.destroy;cd.prototype.enable=cd.prototype.enable;cd.prototype.disable=cd.prototype.bb;cd.prototype.update=cd.prototype.update;cd.prototype.destroy=cd.prototype.destroy;dd.prototype.enable=dd.prototype.enable;dd.prototype.disable=dd.prototype.bb;dd.prototype.update=dd.prototype.update;dd.prototype.destroy=dd.prototype.destroy;ed.prototype.enable=ed.prototype.enable;
ed.prototype.disable=ed.prototype.bb;ed.prototype.update=ed.prototype.update;ed.prototype.destroy=ed.prototype.destroy;v.prototype.boot=v.prototype.boot;v.prototype.addConfig=v.prototype.ia;v.prototype.update=v.prototype.update;v.prototype.add=v.prototype.add;v.prototype.remove=v.prototype.remove;v.prototype.suspend=v.prototype.suspend;v.prototype.resume=v.prototype.resume;v.prototype.pauseAll=v.prototype.fl;v.prototype.resumeAll=v.prototype.il;v.prototype.mute=v.prototype.hb;v.prototype.unmute=v.prototype.ji;
v.prototype.destroy=v.prototype.destroy;N.prototype.update=N.prototype.update;N.prototype.play=N.prototype.play;N.prototype.stop=N.prototype.stop;N.prototype.pause=N.prototype.pause;N.prototype.resume=N.prototype.resume;N.prototype.mute=N.prototype.hb;N.prototype.unmute=N.prototype.ni;N.prototype.destroy=N.prototype.destroy;Q.prototype.hasTracks=Q.prototype.Wl;Q.prototype.play=Q.prototype.play;Q.prototype.stop=Q.prototype.stop;Q.prototype.pause=Q.prototype.pause;Q.prototype.resume=Q.prototype.resume;
Q.prototype.nextTrack=Q.prototype.rd;Q.prototype.previousTrack=Q.prototype.Ge;Q.prototype.destroy=Q.prototype.destroy;z.prototype.boot=z.prototype.boot;z.prototype.addConfig=z.prototype.ia;z.prototype.add=z.prototype.add;z.prototype.addTrack=z.prototype.Oh;z.prototype.hasPlaylists=z.prototype.Io;z.prototype.hasTracks=z.prototype.Ql;z.prototype.play=z.prototype.play;z.prototype.stop=z.prototype.stop;z.prototype.pause=z.prototype.pause;z.prototype.resume=z.prototype.resume;z.prototype.nextTrack=z.prototype.rd;
z.prototype.previousTrack=z.prototype.Ge;z.prototype.destroy=z.prototype.destroy;vd.prototype.play=vd.prototype.play;vd.prototype.stop=vd.prototype.stop;vd.prototype.pause=vd.prototype.pause;vd.prototype.resume=vd.prototype.resume;vd.prototype.destroy=vd.prototype.destroy;ta.prototype.load=ta.prototype.load;ta.prototype.play=ta.prototype.play;ta.prototype.stop=ta.prototype.stop;ta.prototype.destroy=ta.prototype.destroy;Ia.prototype.addActions=Ia.prototype.c;Ia.prototype.dispatch=Ia.prototype.D;
Ia.prototype.destroy=Ia.prototype.destroy;xd.prototype.execute=xd.prototype.Gb;xd.prototype.destroy=xd.prototype.destroy;sa.prototype.get=sa.prototype.get;sa.prototype.addConfig=sa.prototype.ia;sa.prototype.destroy=sa.prototype.destroy;R.prototype.instantiate=R.prototype.Xk;R.prototype.notifyInstanceReady=R.prototype.Vo;R.prototype.update=R.prototype.update;R.prototype.resetInstance=R.prototype.hl;R.prototype.destroy=R.prototype.destroy;Ed.prototype.load=Ed.prototype.load;
Ed.prototype.getNewInstance=Ed.prototype.Hk;Ed.prototype.destroy=Ed.prototype.destroy;qa.prototype.boot=qa.prototype.boot;qa.prototype.addConfig=qa.prototype.ia;qa.prototype.getById=qa.prototype.re;qa.prototype.getByIndex=qa.prototype.Fk;qa.prototype.get=qa.prototype.get;qa.prototype.remove=qa.prototype.remove;qa.prototype.update=qa.prototype.update;qa.prototype.render=qa.prototype.render;qa.prototype.destroy=qa.prototype.destroy;Dd.prototype.string=Dd.prototype.cp;Dd.prototype.textField=Dd.prototype.ep;
Dd.prototype.sound=Dd.prototype.sound;Dd.prototype.displayObjectContainer=Dd.prototype.wo;Dd.prototype.displayObject=Dd.prototype.Zl;Dd.prototype.image=Dd.prototype.image;Dd.prototype.sprite=Dd.prototype.sprite;Dd.prototype.button=Dd.prototype.Yl;Dd.prototype.video=Dd.prototype.am;Dd.prototype.canvas=Dd.prototype.canvas;Dd.prototype.tween=Dd.prototype.$l;Dd.prototype.destroyAllObjects=Dd.prototype.Ak;Dd.prototype.destroy=Dd.prototype.destroy;ja.prototype.boot=ja.prototype.boot;
ja.prototype.destroy=ja.prototype.destroy;ma.prototype.boot=ma.prototype.boot;ma.prototype.start=ma.prototype.start;ma.prototype.stop=ma.prototype.stop;ma.prototype.destroy=ma.prototype.destroy;oa.prototype.addConfig=oa.prototype.ia;oa.prototype.destroy=oa.prototype.destroy;na.prototype.addConfig=na.prototype.ia;na.prototype.getValue=na.prototype.fc;na.prototype.hasValue=na.prototype.Ab;na.prototype.destroy=na.prototype.destroy;Na.prototype.destroy=Na.prototype.destroy;Rd.prototype.addConfig=Rd.prototype.ia;
Rd.prototype.loadFiles=Rd.prototype.eh;Rd.prototype.getValue=Rd.prototype.fc;Rd.prototype.hasValue=Rd.prototype.Ab;Rd.prototype.getKey=Rd.prototype.Kh;Rd.prototype.destroy=Rd.prototype.destroy;va.prototype.update=va.prototype.update;va.prototype.isKeyPressed=va.prototype.Po;va.prototype.isKeyOut=va.prototype.dh;va.prototype.addBinding=va.prototype.Ug;va.prototype.removeBinding=va.prototype.He;va.prototype.hasBinding=va.prototype.Fo;va.prototype.getBindings=va.prototype.Yg;va.prototype.destroy=va.prototype.destroy;
P.prototype.hasKeyIn=P.prototype.xe;P.prototype.hasKeyOut=P.prototype.$g;P.prototype.down=P.prototype.Ih;P.prototype.waitToHold=P.prototype.jp;P.prototype.up=P.prototype.ml;P.prototype.hold=P.prototype.Wk;P.prototype.destroy=P.prototype.destroy;Xd.prototype.enable=Xd.prototype.enable;Xd.prototype.disable=Xd.prototype.Eh;Xd.prototype.destroy=Xd.prototype.destroy;U.prototype.enable=U.prototype.enable;U.prototype.disable=U.prototype.ef;U.prototype.destroy=U.prototype.destroy;wa.prototype.destroy=wa.prototype.destroy;
ga.prototype.register=ga.prototype.register;ga.prototype.unregister=ga.prototype.unregister;ga.prototype.update=ga.prototype.update;ga.prototype.destroy=ga.prototype.destroy;T.prototype.show=T.prototype.Ah;T.prototype.hide=T.prototype.Vk;T.prototype.toggleVisibility=T.prototype.gp;T.prototype.maximize=T.prototype.Kb;T.prototype.isInDom=T.prototype.pd;T.prototype.resize=T.prototype.zh;T.prototype.fullscreenEnter=T.prototype.Ck;T.prototype.fullscreenExit=T.prototype.Dk;T.prototype.isFullscreen=T.prototype.od;
T.prototype.destroy=T.prototype.destroy;t.prototype.update=t.prototype.update;t.prototype.addChild=t.prototype.ec;t.prototype.addChildAt=t.prototype.oo;t.prototype.fitToContent=t.prototype.Bk;t.prototype.removeChild=t.prototype.removeChild;t.prototype.removeChildAt=t.prototype.hh;t.prototype.empty=t.prototype.yh;t.prototype.hasChild=t.prototype.wl;t.prototype.destroy=t.prototype.destroy;ke.prototype.load=ke.prototype.load;ke.prototype.destroy=ke.prototype.destroy;S.prototype.load=S.prototype.load;
S.prototype.destroy=S.prototype.destroy;Nd.prototype.load=Nd.prototype.load;Nd.prototype.addSkin=Nd.prototype.vc;Nd.prototype.setSkin=Nd.prototype.jl;Nd.prototype.hasSkin=Nd.prototype.Sk;Nd.prototype.updateSkin=Nd.prototype.hp;Nd.prototype.destroy=Nd.prototype.destroy;ve.prototype.setDefaultFromState=ve.prototype.kh;ve.prototype.getProperty=ve.prototype.Ra;ve.prototype.hasImage=ve.prototype.Rk;ve.prototype.hasLabel=ve.prototype.m;Ua.prototype.load=Ua.prototype.load;Ua.prototype.unload=Ua.prototype.Ne;
Ua.prototype.destroy=Ua.prototype.destroy;Ac.prototype.play=Ac.prototype.play;Ac.prototype.pause=Ac.prototype.pause;Ac.prototype.resume=Ac.prototype.resume;Ac.prototype.stop=Ac.prototype.stop;Ac.prototype.update=Ac.prototype.update;Ac.prototype.destroy=Ac.prototype.destroy;Je.prototype.addConfig=Je.prototype.ia;Je.prototype.add=Je.prototype.add;Je.prototype.play=Je.prototype.play;Je.prototype.pause=Je.prototype.pause;Je.prototype.resume=Je.prototype.resume;Je.prototype.stop=Je.prototype.stop;
Je.prototype.get=Je.prototype.get;Je.prototype.update=Je.prototype.update;Je.prototype.destroy=Je.prototype.destroy;W.prototype.play=W.prototype.play;W.prototype.pause=W.prototype.pause;W.prototype.resume=W.prototype.resume;W.prototype.stop=W.prototype.stop;W.prototype.update=W.prototype.update;W.prototype.destroy=W.prototype.destroy;Le.prototype.play=Le.prototype.play;Le.prototype.pause=Le.prototype.pause;Le.prototype.destroy=Le.prototype.destroy;K.prototype.update=K.prototype.update;
K.prototype.load=K.prototype.load;K.prototype.play=K.prototype.play;K.prototype.pause=K.prototype.pause;K.prototype.stop=K.prototype.stop;K.prototype.togglePlayback=K.prototype.rm;K.prototype.mute=K.prototype.hb;K.prototype.unmute=K.prototype.ui;K.prototype.destroy=K.prototype.destroy;J.prototype.load=J.prototype.load;J.prototype.play=J.prototype.play;J.prototype.pause=J.prototype.pause;J.prototype.stop=J.prototype.stop;J.prototype.togglePlayback=J.prototype.qm;J.prototype.mute=J.prototype.hb;
J.prototype.unmute=J.prototype.ri;J.prototype.enableBufferOccupancyABR=J.prototype.pm;J.prototype.destroy=J.prototype.destroy;We.prototype.getTimeRange=We.prototype.j;We.prototype.isInRanges=We.prototype.Zk;xa.prototype.has=xa.prototype.has;xa.prototype.get=xa.prototype.get;xa.prototype.add=xa.prototype.add;xa.prototype.remove=xa.prototype.remove;xa.prototype.destroy=xa.prototype.destroy;pf.prototype.key=pf.prototype.key;pf.prototype.url=pf.prototype.url;pf.prototype.type=pf.prototype.type;
pf.prototype.data=pf.prototype.data;pf.prototype.xhr=pf.prototype.kp;pf.prototype.loading=pf.prototype.Jb;pf.prototype.loaded=pf.prototype.yl;pf.prototype.error=pf.prototype.xl;za.prototype.json=za.prototype.json;za.prototype.xml=za.prototype.Gl;za.prototype.sound=za.prototype.sound;za.prototype.image=za.prototype.image;za.prototype.script=za.prototype.jh;za.prototype.css=za.prototype.zk;za.prototype.destroy=za.prototype.destroy;ka.prototype.add=ka.prototype.add;ka.prototype.destroy=ka.prototype.destroy;
la.prototype.create=la.prototype.create;la.prototype.add=la.prototype.add;la.prototype.update=la.prototype.update;la.prototype.destroy=la.prototype.destroy;X.prototype.create=X.prototype.create;X.prototype.add=X.prototype.add;X.prototype.repeat=X.prototype.jm;X.prototype.loop=X.prototype.hf;X.prototype.remove=X.prototype.remove;X.prototype.start=X.prototype.start;X.prototype.stop=X.prototype.stop;X.prototype.pause=X.prototype.pause;X.prototype.resume=X.prototype.resume;X.prototype.update=X.prototype.update;
X.prototype.destroy=X.prototype.destroy;uf.prototype.execute=uf.prototype.Gb;Aa.prototype.add=Aa.prototype.add;Aa.prototype.remove=Aa.prototype.remove;Aa.prototype.update=Aa.prototype.update;Aa.prototype.destroy=Aa.prototype.destroy;Pb.prototype.to=Pb.prototype.jf;Pb.prototype.start=Pb.prototype.start;Pb.prototype.stop=Pb.prototype.stop;Pb.prototype.update=Pb.prototype.update;Pb.prototype.destroy=Pb.prototype.destroy;kf.prototype.set=kf.prototype.set;kf.prototype["delete"]=kf.prototype.bf;
kf.prototype.get=kf.prototype.get;kf.prototype.keys=kf.prototype.Jl;kf.prototype.values=kf.prototype.Kl;kf.prototype.entries=kf.prototype.Il;kf.prototype.clear=kf.prototype.Hl;kf.prototype.has=kf.prototype.has;Md.prototype.add=Md.prototype.add;Md.prototype.remove=Md.prototype.remove;Md.prototype.get=Md.prototype.get;Md.prototype.toArray=Md.prototype.Ke;window.FORGE.Math=G;G.degToRad=G.T;G.radToDeg=G.Ya;G.round10=G.Ie;G.clamp=G.$;G.wrap=G.Za;G.mix=G.Uo;G.smoothStep=G.ap;G.isPowerOfTwo=G.qd;
G.rotationMatrixToEuler=G.ih;G.eulerToRotationMatrix=G.ne;window.FORGE.Quaternion=H;H.toEuler=H.Le;H.fromEuler=H.wc;H.toRotationMatrix=H.ll;H.fromRotationMatrix=H.Ao;H.cancelRoll=H.cancelRoll;H.diffBetweenQuaternions=H.vo;H.angularDistance=H.vk;H.multiplyScalar=H.multiplyScalar;H.add=H.add;H.log=H.log;H.exp=H.exp;H.slerp=H.slerp;H.squad=H.bp;H.nlerpNoInvert=H.cl;H.slerpNoInvert=H.Je;H.squadNoInvert=H.kl;H.spline=H.mh;kb.getUniqueName=Eb;Cb.parseIncludes=Cb.ib;ec.colorFrom3DObject=Xb;
ve.isValid=function(a){return a?!0:!1};bf.mimeTypeFromURL=jf;window.FORGE.Utils=B;B.parseSizeString=B.gh;B.extendSimpleObject=B.Pa;B.extendMultipleObjects=B.gb;B.clone=B.clone;B.isDisplayObject=B.Oo;B.isTypeOf=B.R;B.isTypeOfRecursive=B.Ro;B.isArrayOf=B.Ga;B.getObjectProperty=B.ve;B.sortArrayByProperty=B.ud;B.randomize=B.td;B.leftFill=B.Ce;B.parseTime=B.el;B.formatTime=B.yo;B.toTHREESpherical=B.Me;B.fromTHREESpherical=B.Bo;B.arrayByDifference=B.wk;B.removeItemFromArrayAtIndex=B.Wo;B.endsWith=B.endsWith;
B.arrayKeys=B.Vg;window.FORGE.Dom=ha;ha.getCssProperty=ha.md;ha.getUnitWidth=ha.Ok;ha.getValueWidth=ha.Qk;ha.getUnitHeight=ha.Nk;ha.getValueHeight=ha.Pk;ha.has=ha.has;ha.isHtmlElement=ha.bh;ha.getMouseEventOffset=ha.Do;vf.parse=Ka;
vf.exists=function(a,b,d,g){var h=new XMLHttpRequest,k=null;h.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&200===this.status&&(clearTimeout(k),"function"===typeof b&&b.call(g))};h.onerror=function(a){console.log(a)};h.open("HEAD",a);h.send();k=window.setTimeout(function(){"function"===typeof d&&d.call(g)},500)};
vf.isValid=function(a){return/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-]*)?\??(?:[\-\+=&;%@\.\w]*)#?(?:[\.\!\/\\\w]*))?)/.test(a)?!0:!1};window.FORGE.Color=Z;Z.rgbToHsl=Z.Yo;Z.hslToRgb=Z.Mo;Z.hueToRgb=Z.ze;Z.rgbToHsv=Z.Zo;Z.hsvToRgb=Z.No;Z.componentToHex=Z.me;Z.rgbToHex=Z.Xo;Z.fromRgbaString=Z.zo;Z.hexToRgb=Z.Ko;Z.rgbToYcbcr=Z.$o;Z.ycbcrToRgb=Z.mp;Z.ycbcrRotate=Z.lp;Z.distance=Z.distance;I.canPlayAudio=I.so;
I.canPlayVideo=I.uo;I.isLowBattery=I.Qo;I.check=I.check;p.generate=p.Xg;p.validate=p.pl;p.register=p.register;p.unregister=p.unregister;p.getUids=p.Zg;p.filterType=p.pe;p.get=p.get;p.isTypeOf=p.R;p.exists=p.Xa;ca.register=ca.register;ca.getUids=ca.Zg;ca.get=ca.get;ca.hasTypeOf=ca.Jo;ca.exists=ca.Xa;window.FORGE.VIEWERS=aa;window.FORGE.VERSION="0.9.3";window.FORGE.DEBUG=!1;window.FORGE.WARNING=!0;r.DEFAULT_CONFIG=fa;window.FORGE.Math=G;G.DEGREES=G.Na;G.RADIANS=G.tb;G.DEG2RAD=G.Ci;G.RAD2DEG=G.Ki;
G.TWOPI=G.Qi;window.FORGE.MediaType=F;F.UNDEFINED=F.Db;F.IMAGE=F.IMAGE;F.VIDEO=F.VIDEO;F.GRID=F.oc;window.FORGE.MediaFormat=Sa;Sa.EQUIRECTANGULAR=Sa.Dc;Sa.CUBE=Sa.Ad;Sa.FLAT=Sa.Sa;Sa.HOTSPOT=Sa.wm;window.FORGE.BackgroundType=Wa;Wa.UNDEFINED=Wa.Db;Wa.SHADER=Wa.Kd;Wa.MESH=Wa.Fc;window.FORGE.EffectComposerType=lb;lb.MAIN=lb.Gi;lb.RENDER=lb.Yb;lb.PICKING=lb.Ef;window.FORGE.PassPosition=nb;nb.UNKNOWN=nb.Od;nb.BACKGROUND=nb.yd;nb.RENDER=nb.Yb;nb.GLOBAL=nb.sf;window.FORGE.ViewType=db;db.UNDEFINED=db.Db;
db.FLAT=db.Sa;db.RECTILINEAR=db.rc;db.GOPRO=db.tf;window.FORGE.PickingManager.modes=gb;gb.POINTER=gb.$a;gb.GAZE=gb.Ec;window.FORGE.HotspotMaterial.types=uc;uc.IMAGE=uc.IMAGE;uc.SPRITE=uc.Of;uc.VIDEO=uc.VIDEO;uc.PLUGIN=uc.Ji;uc.GRAPHICS=uc.uf;window.FORGE.HotspotMaterial.presets=rc;rc.TRANSPARENT=rc.Pi;rc.DEBUG=rc.Bi;window.FORGE.HotspotGeometryType=pc;pc.SHAPE=pc.Li;pc.PLANE=pc.Ii;pc.BOX=pc.zi;pc.SPHERE=pc.Mi;pc.CYLINDER=pc.Ai;window.FORGE.HotspotType=gc;gc.THREE_DIMENSIONAL=gc.Rf;L.RADIUS=50;
L.DEFAULT_CONFIG=Ec;window.FORGE.ControllerType=ad;ad.BASE=ad.yi;ad.POINTER=ad.$a;ad.KEYBOARD=ad.Gd;ad.GYROSCOPE=ad.Fd;pa.DEFAULT_CONFIG=bd;window.FORGE.SoundType=Pa;Pa.STEREO=Pa.Bm;Pa.SPATIAL=Pa.Am;Pa.AMBISONIC=Pa.kf;window.FORGE.Action.operation=yd;yd.SET=yd.Nf;yd.ADD=yd.xi;yd.SUBSTRACT=yd.Ni;yd.MULTIPLY=yd.Hi;yd.DIVIDE=yd.Di;yd.TOGGLE=yd.Oi;oa.DEFAULT_CONFIG=Od;window.FORGE.Pointer.listenerTypes=V;V.NATIVE=V.Ta;V.HAMMER=V.oa;window.FORGE.Pointer.events=U.events;U.events.TAP=U.events.Qf;
U.events.DOUBLE_TAP=U.events.Ed;U.events.PRESS_START=U.events.Jf;U.events.PRESS_END=U.events.If;U.events.PAN_START=U.events.Df;U.events.PAN_MOVE=U.events.Cf;U.events.PAN_END=U.events.Bf;U.events.PINCH_START=U.events.Hf;U.events.PINCH_MOVE=U.events.Gf;U.events.PINCH_END=U.events.Ff;U.events.ROTATE_START=U.events.Mf;U.events.ROTATE_MOVE=U.events.Lf;U.events.ROTATE_END=U.events.Kf;U.events.SWIPE=U.events.Pf;U.events.ENTER=U.events.pf;U.events.LEAVE=U.events.zf;U.events.OVER=U.events.Gc;
U.events.OUT=U.events.Xb;U.events.MOVE=U.events.Af;U.events.WHEEL=U.events.Sf;window.FORGE.Pointer.cursors=$d;$d.DEFAULT=$d.DEFAULT;$d.POINTER=$d.$a;$d.GRAB=$d.um;$d.GRABBING=$d.vm;ve.EMPTY_STATE_IMAGE=xe;ve.EMPTY_STATE_LABEL=ye;ve.EMPTY_STATE=ze;ve.DEFAULT_STATE_IMAGE=Ae;ve.DEFAULT_STATE_LABEL=Be;ve.DEFAULT_STATE=we;window.FORGE.Image.renderModes=zc;zc.CSS=zc.CSS;zc.CANVAS=zc.Rb;window.FORGE.VideoDash.mediaType=cf;cf.VIDEO=cf.VIDEO;cf.AUDIO=cf.AUDIO;window.FORGE.VideoQualityMode=Me;Me.AUTO=Me.Ob;
Me.MANUAL=Me.MANUAL;window.FORGE.VideoFormat=Va;Va.DASH=Va.mf;Va.HTML5=Va.xm;Va.UNKNOWN=Va.Od;A.JSON=A.JSON;A.XML=A.Zb;A.IMAGE=A.IMAGE;A.SOUND=A.ub;window.FORGE.Cache.reserved=lf;lf.COMMON=lf.Yc;lf.JSON=lf.JSON;lf.XML=lf.Zb;lf.IMAGE=lf.IMAGE;lf.SOUND=lf.ub;window.FORGE.EasingType=Y;Y.LINEAR=Y.LINEAR;Y.SINE_IN=Y.Ld;Y.SINE_IN_OUT=Y.Md;Y.SINE_OUT=Y.Nd;Y.QUAD_IN=Y.Hd;Y.QUAD_IN_OUT=Y.Id;Y.QUAD_OUT=Y.Jd;Y.CUBIC_IN=Y.Bd;Y.CUBIC_IN_OUT=Y.Cd;Y.CUBIC_OUT=Y.Dd;Y.BOUNCE_OUT=Y.Xc;Y.BOUNCE_IN=Y.zd;
  root.FORGE = window.FORGE;
}).call(this);

